(()=>{var bP=Object.create;var Xu=Object.defineProperty,xP=Object.defineProperties,wP=Object.getOwnPropertyDescriptor,EP=Object.getOwnPropertyDescriptors,_P=Object.getOwnPropertyNames,Gv=Object.getOwnPropertySymbols,SP=Object.getPrototypeOf,Uv=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable;var Ku=(t,e,r)=>e in t?Xu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hi=(t,e)=>{for(var r in e||(e={}))Uv.call(e,r)&&Ku(t,r,e[r]);if(Gv)for(var r of Gv(e))CP.call(e,r)&&Ku(t,r,e[r]);return t},ko=(t,e)=>xP(t,EP(e));var Ga=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ao=(t,e)=>()=>(t&&(e=t(t=0)),e);var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var TP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of _P(e))!Uv.call(t,a)&&a!==r&&Xu(t,a,{get:()=>e[a],enumerable:!(n=wP(e,a))||n.enumerable});return t};var kP=(t,e,r)=>(r=t!=null?bP(SP(t)):{},TP(e||!t||!t.__esModule?Xu(r,"default",{value:t,enumerable:!0}):r,t));var Oe=(t,e,r)=>Ku(t,typeof e!="symbol"?e+"":e,r);function $i(t){return t+.5|0}function Gi(t){return Cn($i(t*2.55),0,255)}function Tn(t){return Cn($i(t*255),0,255)}function nn(t){return Cn($i(t/2.55)/100,0,1)}function $v(t){return Cn($i(t*100),0,100)}function DP(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&xr[t[1]]*17,g:255&xr[t[2]]*17,b:255&xr[t[3]]*17,a:e===5?xr[t[4]]*17:255}:(e===7||e===9)&&(r={r:xr[t[1]]<<4|xr[t[2]],g:xr[t[3]]<<4|xr[t[4]],b:xr[t[5]]<<4|xr[t[6]],a:e===9?xr[t[7]]<<4|xr[t[8]]:255})),r}function RP(t){var e=MP(t)?AP:PP;return t?"#"+e(t.r)+e(t.g)+e(t.b)+LP(t.a,e):void 0}function Xv(t,e,r){let n=e*Math.min(r,1-r),a=(i,s=(i+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[a(0),a(8),a(4)]}function BP(t,e,r){let n=(a,i=(a+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function IP(t,e,r){let n=Xv(t,1,.5),a;for(e+r>1&&(a=1/(e+r),e*=a,r*=a),a=0;a<3;a++)n[a]*=1-e-r,n[a]+=e;return n}function qP(t,e,r,n,a){return t===a?(e-r)/n+(e<r?6:0):e===a?(r-t)/n+2:(t-e)/n+4}function Ju(t){let r=t.r/255,n=t.g/255,a=t.b/255,i=Math.max(r,n,a),s=Math.min(r,n,a),o=(i+s)/2,l,u,c;return i!==s&&(c=i-s,u=o>.5?c/(2-i-s):c/(i+s),l=qP(r,n,a,c,i),l=l*60+.5),[l|0,u||0,o]}function ec(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Tn)}function tc(t,e,r){return ec(Xv,t,e,r)}function FP(t,e,r){return ec(IP,t,e,r)}function NP(t,e,r){return ec(BP,t,e,r)}function Zv(t){return(t%360+360)%360}function zP(t){let e=OP.exec(t),r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Gi(+e[5]):Tn(+e[5]));let a=Zv(+e[2]),i=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=FP(a,i,s):e[1]==="hsv"?n=NP(a,i,s):n=tc(a,i,s),{r:n[0],g:n[1],b:n[2],a:r}}function VP(t,e){var r=Ju(t);r[0]=Zv(r[0]+e),r=tc(r),t.r=r[0],t.g=r[1],t.b=r[2]}function WP(t){if(!t)return;let e=Ju(t),r=e[0],n=$v(e[1]),a=$v(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${a}%, ${nn(t.a)})`:`hsl(${r}, ${n}%, ${a}%)`}function HP(){let t={},e=Object.keys(jv),r=Object.keys(Yv),n,a,i,s,o;for(n=0;n<e.length;n++){for(s=o=e[n],a=0;a<r.length;a++)i=r[a],o=o.replace(i,Yv[i]);i=parseInt(jv[s],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}function GP(t){Mo||(Mo=HP(),Mo.transparent=[0,0,0,0]);let e=Mo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}function $P(t){let e=UP.exec(t),r=255,n,a,i;if(e){if(e[7]!==n){let s=+e[7];r=e[8]?Gi(s):Cn(s*255,0,255)}return n=+e[1],a=+e[3],i=+e[5],n=255&(e[2]?Gi(n):Cn(n,0,255)),a=255&(e[4]?Gi(a):Cn(a,0,255)),i=255&(e[6]?Gi(i):Cn(i,0,255)),{r:n,g:a,b:i,a:r}}}function YP(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${nn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}function jP(t,e,r){let n=Ua(nn(t.r)),a=Ua(nn(t.g)),i=Ua(nn(t.b));return{r:Tn(Zu(n+r*(Ua(nn(e.r))-n))),g:Tn(Zu(a+r*(Ua(nn(e.g))-a))),b:Tn(Zu(i+r*(Ua(nn(e.b))-i))),a:t.a+r*(e.a-t.a)}}function Do(t,e,r){if(t){let n=Ju(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=tc(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Qv(t,e){return t&&Object.assign(e||{},t)}function Kv(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Tn(t[3]))):(e=Qv(t,{r:0,g:0,b:0,a:1}),e.a=Tn(e.a)),e}function KP(t){return t.charAt(0)==="r"?$P(t):zP(t)}var Cn,xr,Qu,AP,PP,Po,MP,LP,OP,Yv,jv,Mo,UP,Zu,Ua,Ui,Jv=Ao(()=>{Cn=(t,e,r)=>Math.max(Math.min(t,r),e);xr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qu=[..."0123456789ABCDEF"],AP=t=>Qu[t&15],PP=t=>Qu[(t&240)>>4]+Qu[t&15],Po=t=>(t&240)>>4===(t&15),MP=t=>Po(t.r)&&Po(t.g)&&Po(t.b)&&Po(t.a);LP=(t,e)=>t<255?e(t):"";OP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;Yv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};UP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;Zu=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ua=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);Ui=class t{constructor(e){if(e instanceof t)return e;let r=typeof e,n;r==="object"?n=Kv(e):r==="string"&&(n=DP(e)||GP(e)||KP(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Qv(this._rgb);return e&&(e.a=nn(e.a)),e}set rgb(e){this._rgb=Kv(e)}rgbString(){return this._valid?YP(this._rgb):void 0}hexString(){return this._valid?RP(this._rgb):void 0}hslString(){return this._valid?WP(this._rgb):void 0}mix(e,r){if(e){let n=this.rgb,a=e.rgb,i,s=r===i?.5:r,o=2*s-1,l=n.a-a.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-u,n.r=255&u*n.r+i*a.r+.5,n.g=255&u*n.g+i*a.g+.5,n.b=255&u*n.b+i*a.b+.5,n.a=s*n.a+(1-s)*a.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=jP(this._rgb,e._rgb,r)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=Tn(e),this}clearer(e){let r=this._rgb;return r.a*=1-e,this}greyscale(){let e=this._rgb,r=$i(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){let r=this._rgb;return r.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Do(this._rgb,2,e),this}darken(e){return Do(this._rgb,2,-e),this}saturate(e){return Do(this._rgb,1,e),this}desaturate(e){return Do(this._rgb,1,-e),this}rotate(e){return VP(this._rgb,e),this}}});function Vr(){}function ct(t){return t==null}function _t(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Qe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ft(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function lr(t,e){return Ft(t)?t:e}function je(t,e){return typeof t=="undefined"?e:t}function ft(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function at(t,e,r,n){let a,i,s;if(_t(t))if(i=t.length,n)for(a=i-1;a>=0;a--)e.call(r,t[a],a);else for(a=0;a<i;a++)e.call(r,t[a],a);else if(Qe(t))for(s=Object.keys(t),i=s.length,a=0;a<i;a++)e.call(r,t[s[a]],s[a])}function Ki(t,e){let r,n,a,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(a=t[r],i=e[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Io(t){if(_t(t))return t.map(Io);if(Qe(t)){let e=Object.create(null),r=Object.keys(t),n=r.length,a=0;for(;a<n;++a)e[r[a]]=Io(t[r[a]]);return e}return t}function dg(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function XP(t,e,r,n){if(!dg(t))return;let a=e[t],i=r[t];Qe(a)&&Qe(i)?Ya(a,i,n):e[t]=Io(i)}function Ya(t,e,r){let n=_t(e)?e:[e],a=n.length;if(!Qe(t))return t;r=r||{};let i=r.merger||XP,s;for(let o=0;o<a;++o){if(s=n[o],!Qe(s))continue;let l=Object.keys(s);for(let u=0,c=l.length;u<c;++u)i(l[u],t,s,r)}return t}function Ka(t,e){return Ya(t,e,{merger:ZP})}function ZP(t,e,r){if(!dg(t))return;let n=e[t],a=r[t];Qe(n)&&Qe(a)?Ka(n,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Io(a))}function QP(t){let e=t.split("."),r=[],n="";for(let a of e)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function JP(t){let e=QP(t);return r=>{for(let n of e){if(n==="")break;r=r&&r[n]}return r}}function Xi(t,e){return(eg[e]||(eg[e]=JP(e)))(t)}function zo(t){return t.charAt(0).toUpperCase()+t.slice(1)}function hg(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}function Xa(t,e,r){return Math.abs(t-e)<r}function sc(t){let e=Math.round(t);t=Xa(t,e,t/1e3)?e:t;let r=Math.pow(10,Math.floor(sn(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function vg(t){let e=[],r=Math.sqrt(t),n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((a,i)=>a-i).pop(),e}function rM(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Qi(t){return!rM(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function gg(t,e){let r=Math.round(t);return r-e<=t&&r+e>=t}function oc(t,e,r){let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function on(t){return t*(Pt/180)}function Vo(t){return t*(180/Pt)}function lc(t){if(!Ft(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function pg(t,e){let r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n),i=Math.atan2(n,r);return i<-.5*Pt&&(i+=gr),{angle:i,distance:a}}function Fo(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nM(t,e){return(t-e+eM)%gr-Pt}function wr(t){return(t%gr+gr)%gr}function uc(t,e,r,n){let a=wr(t),i=wr(e),s=wr(r),o=wr(i-a),l=wr(s-a),u=wr(a-i),c=wr(a-s);return a===i||a===s||n&&i===s||o>l&&u<c}function Er(t,e,r){return Math.max(e,Math.min(r,t))}function mg(t){return Er(t,-32768,32767)}function An(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function Wo(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}function bg(t,e,r){let n=0,a=t.length;for(;n<a&&t[n]<e;)n++;for(;a>n&&t[a-1]>r;)a--;return n>0||a<t.length?t.slice(n,a):t}function wg(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xg.forEach(r=>{let n="_onData"+zo(r),a=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){let s=a.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...i)}),s}})})}function cc(t,e){let r=t._chartjs;if(!r)return;let n=r.listeners,a=n.indexOf(e);a!==-1&&n.splice(a,1),!(n.length>0)&&(xg.forEach(i=>{delete t[i]}),delete t._chartjs)}function Eg(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}function dc(t,e){let r=[],n=!1;return function(...a){r=a,n||(n=!0,fc.call(window,()=>{n=!1,t.apply(e,r)}))}}function _g(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}function hc(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vc(t){return hc(t)?t:new Ui(t)}function rc(t){return hc(t)?t:new Ui(t).saturate(.5).darken(.1).hexString()}function sM(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iM},numbers:{type:"number",properties:aM}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function oM(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}function lM(t,e){e=e||{};let r=t+JSON.stringify(e),n=ag.get(r);return n||(n=new Intl.NumberFormat(t,e),ag.set(r,n)),n}function Uo(t,e,r){return lM(e,r).format(t)}function uM(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}function cM(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ji.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}function Yi(t,e){if(!e)return t;let r=e.split(".");for(let n=0,a=r.length;n<a;++n){let i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function nc(t,e,r){return typeof e=="string"?Ya(Yi(t,e),r):Ya(Yi(t,""),e)}function fM(t){return!t||ct(t.size)||ct(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ji(t,e,r,n,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,r.push(a)),i>n&&(n=i),n}function Tg(t,e,r,n){n=n||{};let a=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(a=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0,o=r.length,l,u,c,f,d;for(l=0;l<o;l++)if(f=r[l],f!=null&&!_t(f))s=ji(t,a,i,s,f);else if(_t(f))for(u=0,c=f.length;u<c;u++)d=f[u],d!=null&&!_t(d)&&(s=ji(t,a,i,s,d));t.restore();let h=i.length/2;if(h>r.length){for(l=0;l<h;l++)delete a[i[l]];i.splice(0,h)}return s}function Mn(t,e,r){let n=t.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((e-a)*n)/n+a}function gc(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Yo(t,e,r,n){pc(t,e,r,n,null)}function pc(t,e,r,n,a){let i,s,o,l,u,c,f,d,h=e.pointStyle,v=e.rotation,p=e.radius,g=(v||0)*tM;if(h&&typeof h=="object"&&(i=h.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(g),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),h){default:a?t.ellipse(r,n,a/2,p,0,0,gr):t.arc(r,n,p,0,gr),t.closePath();break;case"triangle":c=a?a/2:p,t.moveTo(r+Math.sin(g)*c,n-Math.cos(g)*p),g+=tg,t.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*p),g+=tg,t.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*p),t.closePath();break;case"rectRounded":u=p*.516,l=p-u,s=Math.cos(g+ua)*l,f=Math.cos(g+ua)*(a?a/2-u:l),o=Math.sin(g+ua)*l,d=Math.sin(g+ua)*(a?a/2-u:l),t.arc(r-f,n-o,u,g-Pt,g-or),t.arc(r+d,n-s,u,g-or,g),t.arc(r+f,n+o,u,g,g+or),t.arc(r-d,n+s,u,g+or,g+Pt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*p,c=a?a/2:l,t.rect(r-c,n-l,2*c,2*l);break}g+=ua;case"rectRot":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+d,n-s),t.lineTo(r+f,n+o),t.lineTo(r-d,n+s),t.closePath();break;case"crossRot":g+=ua;case"cross":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s);break;case"star":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s),g+=ua,f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s);break;case"line":s=a?a/2:Math.cos(g)*p,o=Math.sin(g)*p,t.moveTo(r-s,n-o),t.lineTo(r+s,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(g)*(a?a/2:p),n+Math.sin(g)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zr(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function jo(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ko(t){t.restore()}function kg(t,e,r,n,a){if(!e)return t.lineTo(r.x,r.y);if(a==="middle"){let i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else a==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Ag(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function dM(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ct(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function hM(t,e,r,n,a){if(a.strikethrough||a.underline){let i=t.measureText(n),s=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,u=r+i.actualBoundingBoxDescent,c=a.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(s,c),t.lineTo(o,c),t.stroke()}}function vM(t,e){let r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Dn(t,e,r,n,a,i={}){let s=_t(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="",l,u;for(t.save(),t.font=a.string,dM(t,i),l=0;l<s.length;++l)u=s[l],i.backdrop&&vM(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ct(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,r,n,i.maxWidth)),t.fillText(u,r,n,i.maxWidth),hM(t,r,n,u,i),n+=Number(a.lineHeight);t.restore()}function Za(t,e){let{x:r,y:n,w:a,h:i,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*Pt,Pt,!0),t.lineTo(r,n+i-s.bottomLeft),t.arc(r+s.bottomLeft,n+i-s.bottomLeft,s.bottomLeft,Pt,or,!0),t.lineTo(r+a-s.bottomRight,n+i),t.arc(r+a-s.bottomRight,n+i-s.bottomRight,s.bottomRight,or,0,!0),t.lineTo(r+a,n+s.topRight),t.arc(r+a-s.topRight,n+s.topRight,s.topRight,0,-or,!0),t.lineTo(r+s.topLeft,n)}function mM(t,e){let r=(""+t).match(gM);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}function mc(t,e){let r={},n=Qe(e),a=n?Object.keys(e):e,i=Qe(t)?n?s=>je(t[s],t[e[s]]):s=>t[s]:()=>t;for(let s of a)r[s]=yM(i(s));return r}function yc(t){return mc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ln(t){return mc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jt(t){let e=yc(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ot(t,e){t=t||{},e=e||Tt.font;let r=je(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=je(t.style,e.style);n&&!(""+n).match(pM)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let a={family:je(t.family,e.family),lineHeight:mM(je(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:je(t.weight,e.weight),string:""};return a.string=fM(a),a}function es(t,e,r,n){let a=!0,i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),a=!1),r!==void 0&&_t(o)&&(o=o[r%o.length],a=!1),o!==void 0))return n&&!a&&(n.cacheable=!1),o}function Pg(t,e,r){let{min:n,max:a}=t,i=fg(e,(a-n)/2),s=(o,l)=>r&&o===0?0:o+l;return{min:s(n,-Math.abs(i)),max:s(a,i)}}function ln(t,e){return Object.assign(Object.create(t),e)}function Xo(t,e=[""],r,n,a=()=>t[0]){let i=r||t;typeof n=="undefined"&&(n=Lg("_fallback",t));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:a,override:o=>Xo([o,...t],e,i,n)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Mg(o,l,()=>TM(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return sg(o).includes(l)},ownKeys(o){return sg(o)},set(o,l,u){let c=o._storage||(o._storage=a());return o[l]=c[l]=u,delete o._keys,!0}})}function da(t,e,r,n){let a={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:bc(t,n),setContext:i=>da(t,i,r,n),override:i=>da(t.override(i),e,r,n)};return new Proxy(a,{deleteProperty(i,s){return delete i[s],delete t[s],!0},get(i,s,o){return Mg(i,s,()=>xM(i,s,o))},getOwnPropertyDescriptor(i,s){return i._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(i,s,o){return t[s]=o,delete i[s],!0}})}function bc(t,e={scriptable:!0,indexable:!0}){let{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:r,indexable:n,isScriptable:an(r)?r:()=>r,isIndexable:an(n)?n:()=>n}}function Mg(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let n=r();return t[e]=n,n}function xM(t,e,r){let{_proxy:n,_context:a,_subProxy:i,_descriptors:s}=t,o=n[e];return an(o)&&s.isScriptable(e)&&(o=wM(e,o,t,r)),_t(o)&&o.length&&(o=EM(e,o,t,s.isIndexable)),xc(e,o)&&(o=da(o,a,i&&i[e],s)),o}function wM(t,e,r,n){let{_proxy:a,_context:i,_subProxy:s,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,s||n);return o.delete(t),xc(t,l)&&(l=wc(a._scopes,a,t,l)),l}function EM(t,e,r,n){let{_proxy:a,_context:i,_subProxy:s,_descriptors:o}=r;if(typeof i.index!="undefined"&&n(t))return e[i.index%e.length];if(Qe(e[0])){let l=e,u=a._scopes.filter(c=>c!==l);e=[];for(let c of l){let f=wc(u,a,t,c);e.push(da(f,i,s&&s[t],o))}}return e}function Dg(t,e,r){return an(t)?t(e,r):t}function SM(t,e,r,n,a){for(let i of e){let s=_M(r,i);if(s){t.add(s);let o=Dg(s._fallback,r,a);if(typeof o!="undefined"&&o!==r&&o!==n)return o}else if(s===!1&&typeof n!="undefined"&&r!==n)return null}return!1}function wc(t,e,r,n){let a=e._rootScopes,i=Dg(e._fallback,r,n),s=[...t,...a],o=new Set;o.add(n);let l=ig(o,s,r,i||r,n);return l===null||typeof i!="undefined"&&i!==r&&(l=ig(o,s,i,l,n),l===null)?!1:Xo(Array.from(o),[""],a,i,()=>CM(e,r,n))}function ig(t,e,r,n,a){for(;r;)r=SM(t,e,r,n,a);return r}function CM(t,e,r){let n=t._getTarget();e in n||(n[e]={});let a=n[e];return _t(a)&&Qe(r)?r:a||{}}function TM(t,e,r,n){let a;for(let i of e)if(a=Lg(bM(i,t),r),typeof a!="undefined")return xc(t,a)?wc(r,n,t,a):a}function Lg(t,e){for(let r of e){if(!r)continue;let n=r[t];if(typeof n!="undefined")return n}}function sg(t){let e=t._keys;return e||(e=t._keys=kM(t._scopes)),e}function kM(t){let e=new Set;for(let r of t)for(let n of Object.keys(r).filter(a=>!a.startsWith("_")))e.add(n);return Array.from(e)}function PM(t,e,r,n){let a=t.skip?e:t,i=e,s=r.skip?e:r,o=Fo(i,a),l=Fo(s,i),u=o/(o+l),c=l/(o+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;let f=n*u,d=n*c;return{previous:{x:i.x-f*(s.x-a.x),y:i.y-f*(s.y-a.y)},next:{x:i.x+d*(s.x-a.x),y:i.y+d*(s.y-a.y)}}}function MM(t,e,r){let n=t.length,a,i,s,o,l,u=ja(t,0);for(let c=0;c<n-1;++c)if(l=u,u=ja(t,c+1),!(!l||!u)){if(Xa(e[c],0,AM)){r[c]=r[c+1]=0;continue}a=r[c]/e[c],i=r[c+1]/e[c],o=Math.pow(a,2)+Math.pow(i,2),!(o<=9)&&(s=3/Math.sqrt(o),r[c]=a*s*e[c],r[c+1]=i*s*e[c])}}function DM(t,e,r="x"){let n=Rg(r),a=t.length,i,s,o,l=ja(t,0);for(let u=0;u<a;++u){if(s=o,o=l,l=ja(t,u+1),!o)continue;let c=o[r],f=o[n];s&&(i=(c-s[r])/3,o[`cp1${r}`]=c-i,o[`cp1${n}`]=f-i*e[u]),l&&(i=(l[r]-c)/3,o[`cp2${r}`]=c+i,o[`cp2${n}`]=f+i*e[u])}}function LM(t,e="x"){let r=Rg(e),n=t.length,a=Array(n).fill(0),i=Array(n),s,o,l,u=ja(t,0);for(s=0;s<n;++s)if(o=l,l=u,u=ja(t,s+1),!!l){if(u){let c=u[e]-l[e];a[s]=c!==0?(u[r]-l[r])/c:0}i[s]=o?u?fa(a[s-1])!==fa(a[s])?0:(a[s-1]+a[s])/2:a[s-1]:a[s]}MM(t,a,i),DM(t,i,e)}function Ro(t,e,r){return Math.max(Math.min(t,r),e)}function RM(t,e){let r,n,a,i,s,o=zr(t[0],e);for(r=0,n=t.length;r<n;++r)s=i,i=o,o=r<n-1&&zr(t[r+1],e),i&&(a=t[r],s&&(a.cp1x=Ro(a.cp1x,e.left,e.right),a.cp1y=Ro(a.cp1y,e.top,e.bottom)),o&&(a.cp2x=Ro(a.cp2x,e.left,e.right),a.cp2y=Ro(a.cp2y,e.top,e.bottom)))}function Og(t,e,r,n,a){let i,s,o,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")LM(t,a);else{let u=n?t[t.length-1]:t[0];for(i=0,s=t.length;i<s;++i)o=t[i],l=PM(u,o,t[Math.min(i+1,s-(n?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&RM(t,r)}function Zo(){return typeof window!="undefined"&&typeof document!="undefined"}function Qo(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function No(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}function OM(t,e){return Jo(t).getPropertyValue(e)}function ca(t,e,r){let n={};r=r?"-"+r:"";for(let a=0;a<4;a++){let i=BM[a];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function qM(t,e){let r=t.touches,n=r&&r.length?r[0]:t,{offsetX:a,offsetY:i}=n,s=!1,o,l;if(IM(a,i,t.target))o=a,l=i;else{let u=e.getBoundingClientRect();o=n.clientX-u.left,l=n.clientY-u.top,s=!0}return{x:o,y:l,box:s}}function Rn(t,e){if("native"in t)return t;let{canvas:r,currentDevicePixelRatio:n}=e,a=Jo(r),i=a.boxSizing==="border-box",s=ca(a,"padding"),o=ca(a,"border","width"),{x:l,y:u,box:c}=qM(t,r),f=s.left+(c&&o.left),d=s.top+(c&&o.top),{width:h,height:v}=e;return i&&(h-=s.width+o.width,v-=s.height+o.height),{x:Math.round((l-f)/h*r.width/n),y:Math.round((u-d)/v*r.height/n)}}function FM(t,e,r){let n,a;if(e===void 0||r===void 0){let i=t&&Qo(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{let s=i.getBoundingClientRect(),o=Jo(i),l=ca(o,"border","width"),u=ca(o,"padding");e=s.width-u.width-l.width,r=s.height-u.height-l.height,n=No(o.maxWidth,i,"clientWidth"),a=No(o.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||qo,maxHeight:a||qo}}function Bg(t,e,r,n){let a=Jo(t),i=ca(a,"margin"),s=No(a.maxWidth,t,"clientWidth")||qo,o=No(a.maxHeight,t,"clientHeight")||qo,l=FM(t,e,r),{width:u,height:c}=l;if(a.boxSizing==="content-box"){let d=ca(a,"border","width"),h=ca(a,"padding");u-=h.width+d.width,c-=h.height+d.height}return u=Math.max(0,u-i.width),c=Math.max(0,n?u/n:c-i.height),u=Oo(Math.min(u,s,l.maxWidth)),c=Oo(Math.min(c,o,l.maxHeight)),u&&!c&&(c=Oo(u/2)),(e!==void 0||r!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,u=Oo(Math.floor(c*n))),{width:u,height:c}}function Ec(t,e,r){let n=e||1,a=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==a||s.width!==i?(t.currentDevicePixelRatio=n,s.height=a,s.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}function _c(t,e){let r=OM(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function kn(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function qg(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function Fg(t,e,r,n){let a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},s=kn(t,a,r),o=kn(a,i,r),l=kn(i,e,r),u=kn(s,o,r),c=kn(o,l,r);return kn(u,c,r)}function ha(t,e,r){return t?NM(e,r):zM()}function Sc(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Cc(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ng(t){return t==="angle"?{between:uc,compare:nM,normalize:wr}:{between:An,compare:(e,r)=>e-r,normalize:e=>e}}function og({start:t,end:e,count:r,loop:n,style:a}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:a}}function VM(t,e,r){let{property:n,start:a,end:i}=r,{between:s,normalize:o}=Ng(n),l=e.length,{start:u,end:c,loop:f}=t,d,h;if(f){for(u+=l,c+=l,d=0,h=l;d<h&&s(o(e[u%l][n]),a,i);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:f,style:t.style}}function zg(t,e,r){if(!r)return[t];let{property:n,start:a,end:i}=r,s=e.length,{compare:o,between:l,normalize:u}=Ng(n),{start:c,end:f,loop:d,style:h}=VM(t,e,r),v=[],p=!1,g=null,m,y,b,x=()=>l(a,b,m)&&o(a,b)!==0,E=()=>o(i,m)===0||l(i,b,m),S=()=>p||x(),w=()=>!p||E();for(let T=c,k=c;T<=f;++T)y=e[T%s],!y.skip&&(m=u(y[n]),m!==b&&(p=l(m,a,i),g===null&&S()&&(g=o(m,a)===0?T:k),g!==null&&w()&&(v.push(og({start:g,end:T,loop:d,count:s,style:h})),g=null),k=T,b=m));return g!==null&&v.push(og({start:g,end:f,loop:d,count:s,style:h})),v}function Vg(t,e){let r=[],n=t.segments;for(let a=0;a<n.length;a++){let i=zg(n[a],t.points,e);i.length&&r.push(...i)}return r}function WM(t,e,r,n){let a=0,i=e-1;if(r&&!n)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,r&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function HM(t,e,r,n){let a=t.length,i=[],s=e,o=t[e],l;for(l=e+1;l<=r;++l){let u=t[l%a];u.skip||u.stop?o.skip||(n=!1,i.push({start:e%a,end:(l-1)%a,loop:n}),e=s=u.stop?l:null):(s=l,o.skip&&(e=l)),o=u}return s!==null&&i.push({start:e%a,end:s%a,loop:n}),i}function Wg(t,e){let r=t.points,n=t.options.spanGaps,a=r.length;if(!a)return[];let i=!!t._loop,{start:s,end:o}=WM(r,a,i,n);if(n===!0)return lg(t,[{start:s,end:o,loop:i}],r,e);let l=o<s?o+a:o,u=!!t._fullLoop&&s===0&&o===a-1;return lg(t,HM(r,s,l,u),r,e)}function lg(t,e,r,n){return!n||!n.setContext||!r?e:GM(t,e,r,n)}function GM(t,e,r,n){let a=t._chart.getContext(),i=ug(t.options),{_datasetIndex:s,options:{spanGaps:o}}=t,l=r.length,u=[],c=i,f=e[0].start,d=f;function h(v,p,g,m){let y=o?-1:1;if(v!==p){for(v+=l;r[v%l].skip;)v-=y;for(;r[p%l].skip;)p+=y;v%l!==p%l&&(u.push({start:v%l,end:p%l,loop:g,style:m}),c=m,f=p%l)}}for(let v of e){f=o?f:v.start;let p=r[f%l],g;for(d=f+1;d<=v.end;d++){let m=r[d%l];g=ug(n.setContext(ln(a,{type:"segment",p0:p,p1:m,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),UM(g,c)&&h(f,d-1,v.loop,c),p=m,c=g}f<d-1&&h(f,d-1,v.loop,c)}return u}function ug(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function UM(t,e){if(!e)return!1;let r=[],n=function(a,i){return hc(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Bo(t,e,r){return t.options.clip?t[r]:e[r]}function $M(t,e){let{xScale:r,yScale:n}=t;return r&&n?{left:Bo(r,e,"left"),right:Bo(r,e,"right"),top:Bo(n,e,"top"),bottom:Bo(n,e,"bottom")}:e}function Hg(t,e){let r=e._clip;if(r.disabled)return!1;let n=$M(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}var cg,fg,eg,Zi,an,ic,Pt,gr,eM,qo,tM,or,ua,tg,sn,fa,Ho,yg,xg,fc,Go,Yt,Sg,Lo,rg,ng,$a,aM,iM,ag,Cg,Ji,Pn,$o,ac,Tt,gM,pM,yM,bM,xc,_M,AM,ja,Rg,Jo,BM,IM,Oo,Ig,NM,zM,Gg=Ao(()=>{Jv();cg=(()=>{let t=0;return()=>t++})();fg=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;eg={"":t=>t,x:t=>t.x,y:t=>t.y};Zi=t=>typeof t!="undefined",an=t=>typeof t=="function",ic=(t,e)=>{if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0};Pt=Math.PI,gr=2*Pt,eM=gr+Pt,qo=Number.POSITIVE_INFINITY,tM=Pt/180,or=Pt/2,ua=Pt/4,tg=Pt*2/3,sn=Math.log10,fa=Math.sign;Ho=(t,e,r,n)=>Wo(t,r,n?a=>{let i=t[a][e];return i<r||i===r&&t[a+1][e]===r}:a=>t[a][e]<r),yg=(t,e,r)=>Wo(t,r,n=>t[n][e]>=r);xg=["push","pop","shift","splice","unshift"];fc=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();Go=t=>t==="start"?"left":t==="end"?"right":"center",Yt=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,Sg=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e,Lo=t=>t===0||t===1,rg=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*gr/r)),ng=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*gr/r)+1,$a={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*or)+1,easeOutSine:t=>Math.sin(t*or),easeInOutSine:t=>-.5*(Math.cos(Pt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Lo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Lo(t)?t:rg(t,.075,.3),easeOutElastic:t=>Lo(t)?t:ng(t,.075,.3),easeInOutElastic(t){return Lo(t)?t:t<.5?.5*rg(t*2,.1125,.45):.5+.5*ng(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$a.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$a.easeInBounce(t*2)*.5:$a.easeOutBounce(t*2-1)*.5+.5};aM=["x","y","borderWidth","radius","tension"],iM=["color","borderColor","backgroundColor"];ag=new Map;Cg={values(t){return _t(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";let n=this.chart.options.locale,a,i=t;if(r.length>1){let u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),i=uM(t,r)}let s=sn(Math.abs(i)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Uo(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";let n=r[e].significand||t/Math.pow(10,Math.floor(sn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?Cg.numeric.call(this,t,e,r):""}};Ji={formatters:Cg};Pn=Object.create(null),$o=Object.create(null);ac=class{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>rc(a.backgroundColor),this.hoverBorderColor=(n,a)=>rc(a.borderColor),this.hoverColor=(n,a)=>rc(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return nc(this,e,r)}get(e){return Yi(this,e)}describe(e,r){return nc($o,e,r)}override(e,r){return nc(Pn,e,r)}route(e,r,n,a){let i=Yi(this,e),s=Yi(this,n),o="_"+r;Object.defineProperties(i,{[o]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){let l=this[o],u=s[a];return Qe(l)?Object.assign({},u,l):je(l,u)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}},Tt=new ac({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sM,oM,cM]);gM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;yM=t=>+t||0;bM=(t,e)=>t?t+zo(e):e,xc=(t,e)=>Qe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);_M=(t,e)=>t===!0?e:typeof t=="string"?Xi(e,t):void 0;AM=Number.EPSILON||1e-14,ja=(t,e)=>e<t.length&&!t[e].skip&&t[e],Rg=t=>t==="x"?"y":"x";Jo=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);BM=["top","right","bottom","left"];IM=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);Oo=t=>Math.round(t*10)/10;Ig=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};Zo()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();NM=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},zM=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}}});function jM(t,e){let r=[],n=Object.keys(e);for(let a=0;a<n.length;a++){let i=t[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function KM(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function $g(t,e){let r=t&&t.options||{},n=r.reverse,a=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:a,end:n?a:i}}function XM(t,e,r){if(r===!1)return!1;let n=$g(t,r),a=$g(e,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function ZM(t){let e,r,n,a;return Qe(t)?(e=t.top,r=t.right,n=t.bottom,a=t.left):e=r=n=a=t,{top:e,right:r,bottom:n,left:a,disabled:t===!1}}function Rp(t,e){let r=[],n=t._getSortedDatasetMetas(e),a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function Yg(t,e,r,n={}){let a=t.keys,i=n.mode==="single",s,o,l,u;if(e===null)return;let c=!1;for(s=0,o=a.length;s<o;++s){if(l=+a[s],l===r){if(c=!0,n.all)continue;break}u=t.values[l],Ft(u)&&(i||e===0||fa(e)===fa(u))&&(e+=u)}return!c&&!n.all?0:e}function QM(t,e){let{iScale:r,vScale:n}=e,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",s=Object.keys(t),o=new Array(s.length),l,u,c;for(l=0,u=s.length;l<u;++l)c=s[l],o[l]={[a]:c,[i]:t[c]};return o}function Tc(t,e){let r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function JM(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function eD(t){let{min:e,max:r,minDefined:n,maxDefined:a}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function tD(t,e,r){let n=t[e]||(t[e]={});return n[r]||(n[r]={})}function jg(t,e,r,n){for(let a of e.getMatchingVisibleMetas(n).reverse()){let i=t[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function Kg(t,e){let{chart:r,_cachedMeta:n}=t,a=r._stacks||(r._stacks={}),{iScale:i,vScale:s,index:o}=n,l=i.axis,u=s.axis,c=JM(i,s,n),f=e.length,d;for(let h=0;h<f;++h){let v=e[h],{[l]:p,[u]:g}=v,m=v._stacks||(v._stacks={});d=m[u]=tD(a,c,p),d[o]=g,d._top=jg(d,s,!0,n.type),d._bottom=jg(d,s,!1,n.type);let y=d._visualValues||(d._visualValues={});y[o]=g}}function kc(t,e){let r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function rD(t,e){return ln(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function nD(t,e,r){return ln(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function ts(t,e){let r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(let a of e){let i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}function va(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}function sD(t,e,r,n){let{controller:a,data:i,_sorted:s}=t,o=a._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&s&&i.length){let u=o._reversePixels?yg:Ho;if(n){if(a._sharedOptions){let c=i[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){let d=u(i,e,r-f),h=u(i,e,r+f);return{lo:d.lo,hi:h.hi}}}}else{let c=u(i,e,r);if(l){let{vScale:f}=a._cachedMeta,{_parsed:d}=t,h=d.slice(0,c.lo+1).reverse().findIndex(p=>!ct(p[f.axis]));c.lo-=Math.max(0,h);let v=d.slice(c.hi).findIndex(p=>!ct(p[f.axis]));c.hi+=Math.max(0,v)}return c}}return{lo:0,hi:i.length-1}}function fs(t,e,r,n,a){let i=t.getSortedVisibleDatasetMetas(),s=r[e];for(let o=0,l=i.length;o<l;++o){let{index:u,data:c}=i[o],{lo:f,hi:d}=sD(i[o],e,s,a);for(let h=f;h<=d;++h){let v=c[h];v.skip||n(v,u,h)}}}function oD(t){let e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,a){let i=e?Math.abs(n.x-a.x):0,s=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}function Pc(t,e,r,n,a){let i=[];return!a&&!t.isPointInArea(e)||fs(t,r,e,function(o,l,u){!a&&!zr(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&i.push({element:o,datasetIndex:l,index:u})},!0),i}function lD(t,e,r,n){let a=[];function i(s,o,l){let{startAngle:u,endAngle:c}=s.getProps(["startAngle","endAngle"],n),{angle:f}=pg(s,{x:e.x,y:e.y});uc(f,u,c)&&a.push({element:s,datasetIndex:o,index:l})}return fs(t,r,e,i),a}function uD(t,e,r,n,a,i){let s=[],o=oD(r),l=Number.POSITIVE_INFINITY;function u(c,f,d){let h=c.inRange(e.x,e.y,a);if(n&&!h)return;let v=c.getCenterPoint(a);if(!(!!i||t.isPointInArea(v))&&!h)return;let g=o(e,v);g<l?(s=[{element:c,datasetIndex:f,index:d}],l=g):g===l&&s.push({element:c,datasetIndex:f,index:d})}return fs(t,r,e,u),s}function Mc(t,e,r,n,a,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?lD(t,e,r,a):uD(t,e,r,n,a,i)}function Zg(t,e,r,n,a){let i=[],s=r==="x"?"inXRange":"inYRange",o=!1;return fs(t,r,e,(l,u,c)=>{l[s]&&l[s](e[r],a)&&(i.push({element:l,datasetIndex:u,index:c}),o=o||l.inRange(e.x,e.y,a))}),n&&!o?[]:i}function rs(t,e){return t.filter(r=>r.pos===e)}function Qg(t,e){return t.filter(r=>Op.indexOf(r.pos)===-1&&r.box.axis===e)}function ns(t,e){return t.sort((r,n)=>{let a=e?n:r,i=e?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function fD(t){let e=[],r,n,a,i,s,o;for(r=0,n=(t||[]).length;r<n;++r)a=t[r],{position:i,options:{stack:s,stackWeight:o=1}}=a,e.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:s&&i+s,stackWeight:o});return e}function dD(t){let e={};for(let r of t){let{stack:n,pos:a,stackWeight:i}=r;if(!n||!Op.includes(a))continue;let s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}function hD(t,e){let r=dD(t),{vBoxMaxWidth:n,hBoxMaxHeight:a}=e,i,s,o;for(i=0,s=t.length;i<s;++i){o=t[i];let{fullSize:l}=o.box,u=r[o.stack],c=u&&o.stackWeight/u.weight;o.horizontal?(o.width=c?c*n:l&&e.availableWidth,o.height=a):(o.width=n,o.height=c?c*a:l&&e.availableHeight)}return r}function vD(t){let e=fD(t),r=ns(e.filter(u=>u.box.fullSize),!0),n=ns(rs(e,"left"),!0),a=ns(rs(e,"right")),i=ns(rs(e,"top"),!0),s=ns(rs(e,"bottom")),o=Qg(e,"x"),l=Qg(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(l).concat(s).concat(o),chartArea:rs(e,"chartArea"),vertical:n.concat(a).concat(l),horizontal:i.concat(s).concat(o)}}function Jg(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function Bp(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function gD(t,e,r,n){let{pos:a,box:i}=r,s=t.maxPadding;if(!Qe(a)){r.size&&(t[a]-=r.size);let f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,t[a]+=r.size}i.getPadding&&Bp(s,i.getPadding());let o=Math.max(0,e.outerWidth-Jg(s,t,"left","right")),l=Math.max(0,e.outerHeight-Jg(s,t,"top","bottom")),u=o!==t.w,c=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:u,other:c}:{same:c,other:u}}function pD(t){let e=t.maxPadding;function r(n){let a=Math.max(e[n]-t[n],0);return t[n]+=a,a}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function mD(t,e){let r=e.maxPadding;function n(a){let i={left:0,top:0,right:0,bottom:0};return a.forEach(s=>{i[s]=Math.max(e[s],r[s])}),i}return n(t?["left","right"]:["top","bottom"])}function ss(t,e,r,n){let a=[],i,s,o,l,u,c;for(i=0,s=t.length,u=0;i<s;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,mD(o.horizontal,e));let{same:f,other:d}=gD(e,r,o,n);u|=f&&a.length,c=c||d,l.fullSize||a.push(o)}return u&&ss(a,e,r,n)||c}function el(t,e,r,n,a){t.top=r,t.left=e,t.right=e+n,t.bottom=r+a,t.width=n,t.height=a}function ep(t,e,r,n){let a=r.padding,{x:i,y:s}=e;for(let o of t){let l=o.box,u=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/u.weight||1;if(o.horizontal){let f=e.w*c,d=u.size||l.height;Zi(u.start)&&(s=u.start),l.fullSize?el(l,a.left,s,r.outerWidth-a.right-a.left,d):el(l,e.left+u.placed,s,f,d),u.start=s,u.placed+=f,s=l.bottom}else{let f=e.h*c,d=u.size||l.width;Zi(u.start)&&(i=u.start),l.fullSize?el(l,i,a.top,d,r.outerHeight-a.bottom-a.top):el(l,i,e.top+u.placed,d,f),u.start=i,u.placed+=f,i=l.right}}e.x=i,e.y=s}function bD(t,e){let r=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[ol]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",tp(a)){let i=_c(t,"width");i!==void 0&&(t.width=i)}if(tp(n))if(t.style.height==="")t.height=t.width/(e||2);else{let i=_c(t,"height");i!==void 0&&(t.height=i)}return t}function xD(t,e,r){t&&t.addEventListener(e,r,Ip)}function wD(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,Ip)}function ED(t,e){let r=yD[t.type]||t.type,{x:n,y:a}=Rn(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:a!==void 0?a:null}}function fl(t,e){for(let r of t)if(r===e||r.contains(e))return!0}function _D(t,e,r){let n=t.canvas,a=new MutationObserver(i=>{let s=!1;for(let o of i)s=s||fl(o.addedNodes,n),s=s&&!fl(o.removedNodes,n);s&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function SD(t,e,r){let n=t.canvas,a=new MutationObserver(i=>{let s=!1;for(let o of i)s=s||fl(o.removedNodes,n),s=s&&!fl(o.addedNodes,n);s&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function qp(){let t=window.devicePixelRatio;t!==rp&&(rp=t,us.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function CD(t,e){us.size||window.addEventListener("resize",qp),us.set(t,e)}function TD(t){us.delete(t),us.size||window.removeEventListener("resize",qp)}function kD(t,e,r){let n=t.canvas,a=n&&Qo(n);if(!a)return;let i=dc((o,l)=>{let u=a.clientWidth;r(o,l),u<a.clientWidth&&r()},window),s=new ResizeObserver(o=>{let l=o[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||i(u,c)});return s.observe(a),CD(t,i),s}function Dc(t,e,r){r&&r.disconnect(),e==="resize"&&TD(t)}function AD(t,e,r){let n=t.canvas,a=dc(i=>{t.ctx!==null&&r(ED(i,t))},t);return xD(n,e,a),a}function PD(t){return!Zo()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?qc:Fc}function MD(t,e){let r=t.options.ticks,n=DD(t),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?RD(e):[],s=i.length,o=i[0],l=i[s-1],u=[];if(s>a)return OD(e,u,i,s/a),u;let c=LD(i,e,a);if(s>0){let f,d,h=s>1?Math.round((l-o)/(s-1)):null;for(tl(e,u,c,ct(h)?0:o-h,o),f=0,d=s-1;f<d;f++)tl(e,u,c,i[f],i[f+1]);return tl(e,u,c,l,ct(h)?e.length:l+h),u}return tl(e,u,c),u}function DD(t){let e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),a=t._maxLength/r;return Math.floor(Math.min(n,a))}function LD(t,e,r){let n=BD(t),a=e.length/r;if(!n)return Math.max(a,1);let i=vg(n);for(let s=0,o=i.length-1;s<o;s++){let l=i[s];if(l>a)return l}return Math.max(a,1)}function RD(t){let e=[],r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function OD(t,e,r,n){let a=0,i=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===i&&(e.push(t[s]),a++,i=r[a*n])}function tl(t,e,r,n,a){let i=je(n,0),s=Math.min(je(a,t.length),t.length),o=0,l,u,c;for(r=Math.ceil(r),a&&(l=a-n,r=l/Math.floor(l/r)),c=i;c<0;)o++,c=Math.round(i+o*r);for(u=Math.max(i,0);u<s;u++)u===c&&(e.push(t[u]),o++,c=Math.round(i+o*r))}function BD(t){let e=t.length,r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}function ip(t,e){let r=[],n=t.length/e,a=t.length,i=0;for(;i<a;i+=n)r.push(t[Math.floor(i)]);return r}function qD(t,e,r){let n=t.ticks.length,a=Math.min(e,n-1),i=t._startPixel,s=t._endPixel,o=1e-6,l=t.getPixelForTick(a),u;if(!(r&&(n===1?u=Math.max(l-i,s-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(a-1))/2,l+=a<e?u:-u,l<i-o||l>s+o)))return l}function FD(t,e){at(t,r=>{let n=r.gc,a=n.length/2,i;if(a>e){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function as(t){return t.drawTicks?t.tickLength:0}function sp(t,e){if(!t.display)return 0;let r=Ot(t.font,e),n=jt(t.padding);return(_t(t.text)?t.text.length:1)*r.lineHeight+n.height}function ND(t,e){return ln(t,{scale:e,type:"scale"})}function zD(t,e,r){return ln(t,{tick:r,index:e,type:"tick"})}function VD(t,e,r){let n=Go(t);return(r&&e!=="right"||!r&&e==="right")&&(n=ID(n)),n}function WD(t,e,r,n){let{top:a,left:i,bottom:s,right:o,chart:l}=t,{chartArea:u,scales:c}=l,f=0,d,h,v,p=s-a,g=o-i;if(t.isHorizontal()){if(h=Yt(n,i,o),Qe(r)){let m=Object.keys(r)[0],y=r[m];v=c[m].getPixelForValue(y)+p-e}else r==="center"?v=(u.bottom+u.top)/2+p-e:v=np(t,r,e);d=o-i}else{if(Qe(r)){let m=Object.keys(r)[0],y=r[m];h=c[m].getPixelForValue(y)-g+e}else r==="center"?h=(u.left+u.right)/2-g+e:h=np(t,r,e);v=Yt(n,s,a),f=r==="left"?-or:or}return{titleX:h,titleY:v,maxWidth:d,rotation:f}}function HD(t,e,r){let n=Ya(Object.create(null),[r?Tt.get(r):{},Tt.get(e),t.defaults]);Tt.set(e,n),t.defaultRoutes&&GD(e,t.defaultRoutes),t.descriptors&&Tt.describe(e,t.descriptors)}function GD(t,e){Object.keys(e).forEach(r=>{let n=r.split("."),a=n.pop(),i=[t].concat(n).join("."),s=e[r].split("."),o=s.pop(),l=s.join(".");Tt.route(i,a,l,o)})}function UD(t){return"id"in t&&"defaults"in t}function $D(t){let e={},r=[],n=Object.keys(Hr.plugins.items);for(let i=0;i<n.length;i++)r.push(Hr.getPlugin(n[i]));let a=t.plugins||[];for(let i=0;i<a.length;i++){let s=a[i];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function YD(t,e){return!e&&t===!1?null:t===!0?{}:t}function jD(t,{plugins:e,localIds:r},n,a){let i=[],s=t.getContext();for(let o of e){let l=o.id,u=YD(n[l],a);u!==null&&i.push({plugin:o,options:KD(t.config,{plugin:o,local:r[l]},u,s)})}return i}function KD(t,{plugin:e,local:r},n,a){let i=t.pluginScopeKeys(e),s=t.getOptionScopes(n,i);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vc(t,e){let r=Tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function XD(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function ZD(t,e){return t===e?"_index_":"_value_"}function op(t){if(t==="x"||t==="y"||t==="r")return t}function QD(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Wc(t,...e){if(op(t))return t;for(let r of e){let n=r.axis||QD(r.position)||t.length>1&&op(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function lp(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function JD(t,e){if(e.data&&e.data.datasets){let r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return lp(t,"x",r[0])||lp(t,"y",r[0])}return{}}function eL(t,e){let r=Pn[t.type]||{scales:{}},n=e.scales||{},a=Vc(t.type,e),i=Object.create(null);return Object.keys(n).forEach(s=>{let o=n[s];if(!Qe(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let l=Wc(s,o,JD(s,t),Tt.scales[o.type]),u=ZD(l,a),c=r.scales||{};i[s]=Ka(Object.create(null),[{axis:l},o,c[l],c[u]])}),t.data.datasets.forEach(s=>{let o=s.type||t.type,l=s.indexAxis||Vc(o,e),c=(Pn[o]||{}).scales||{};Object.keys(c).forEach(f=>{let d=XD(f,l),h=s[d+"AxisID"]||d;i[h]=i[h]||Object.create(null),Ka(i[h],[{axis:d},n[h],c[f]])})}),Object.keys(i).forEach(s=>{let o=i[s];Ka(o,[Tt.scales[o.type],Tt.scale])}),i}function Fp(t){let e=t.options||(t.options={});e.plugins=je(e.plugins,{}),e.scales=eL(t,e)}function Np(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function tL(t){return t=t||{},t.data=Np(t.data),Fp(t),t}function rl(t,e){let r=up.get(t);return r||(r=e(),up.set(t,r),zp.add(r)),r}function cp(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));let a=r.join(),i=n.get(a);return i||(i={resolver:Xo(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(a,i)),i}function nL(t,e){let{isScriptable:r,isIndexable:n}=bc(t);for(let a of e){let i=r(a),s=n(a),o=(s||i)&&t[a];if(i&&(an(o)||rL(o))||s&&_t(o))return!0}return!1}function fp(t,e){return t==="top"||t==="bottom"||iL.indexOf(t)===-1&&e==="x"}function dp(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function hp(t){let e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),ft(r&&r.onComplete,[t],e)}function sL(t){let e=t.chart,r=e.options.animation;ft(r&&r.onProgress,[t],e)}function Vp(t){return Zo()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}function oL(t,e,r){let n=Object.keys(t);for(let a of n){let i=+a;if(i>=e){let s=t[a];delete t[a],(r>0||i>e)&&(t[i+r]=s)}}}function lL(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function gp(){return at(rr.instances,t=>t._plugins.invalidate())}function Wp(t,e,r=e){t.lineCap=je(r.borderCapStyle,e.borderCapStyle),t.setLineDash(je(r.borderDash,e.borderDash)),t.lineDashOffset=je(r.borderDashOffset,e.borderDashOffset),t.lineJoin=je(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=je(r.borderWidth,e.borderWidth),t.strokeStyle=je(r.borderColor,e.borderColor)}function uL(t,e,r){t.lineTo(r.x,r.y)}function cL(t){return t.stepped?kg:t.tension||t.cubicInterpolationMode==="monotone"?Ag:uL}function Hp(t,e,r={}){let n=t.length,{start:a=0,end:i=n-1}=r,{start:s,end:o}=e,l=Math.max(a,s),u=Math.min(i,o),c=a<s&&i<s||a>o&&i>o;return{count:n,start:l,loop:e.loop,ilen:u<l&&!c?n+u-l:u-l}}function fL(t,e,r,n){let{points:a,options:i}=e,{count:s,start:o,loop:l,ilen:u}=Hp(a,r,n),c=cL(i),{move:f=!0,reverse:d}=n||{},h,v,p;for(h=0;h<=u;++h)v=a[(o+(d?u-h:h))%s],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):c(t,p,v,d,i.stepped),p=v);return l&&(v=a[(o+(d?u:0))%s],c(t,p,v,d,i.stepped)),!!l}function dL(t,e,r,n){let a=e.points,{count:i,start:s,ilen:o}=Hp(a,r,n),{move:l=!0,reverse:u}=n||{},c=0,f=0,d,h,v,p,g,m,y=x=>(s+(u?o-x:x))%i,b=()=>{p!==g&&(t.lineTo(c,g),t.lineTo(c,p),t.lineTo(c,m))};for(l&&(h=a[y(0)],t.moveTo(h.x,h.y)),d=0;d<=o;++d){if(h=a[y(d)],h.skip)continue;let x=h.x,E=h.y,S=x|0;S===v?(E<p?p=E:E>g&&(g=E),c=(f*c+x)/++f):(b(),t.lineTo(x,E),v=S,f=0,p=g=E),m=E}b()}function Gc(t){let e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?dL:fL}function hL(t){return t.stepped?qg:t.tension||t.cubicInterpolationMode==="monotone"?Fg:kn}function vL(t,e,r,n){let a=e._path;a||(a=e._path=new Path2D,e.path(a,r,n)&&a.closePath()),Wp(t,e.options),t.stroke(a)}function gL(t,e,r,n){let{segments:a,options:i}=e,s=Gc(e);for(let o of a)Wp(t,i,o.style),t.beginPath(),s(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}function mL(t,e,r,n){pL&&!e.options.segment?vL(t,e,r,n):gL(t,e,r,n)}function pp(t,e,r,n){let a=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<a.radius+a.hitRadius}function Gp(t,e){let{x:r,y:n,base:a,width:i,height:s}=t.getProps(["x","y","base","width","height"],e),o,l,u,c,f;return t.horizontal?(f=s/2,o=Math.min(r,a),l=Math.max(r,a),u=n-f,c=n+f):(f=i/2,o=r-f,l=r+f,u=Math.min(n,a),c=Math.max(n,a)),{left:o,top:u,right:l,bottom:c}}function Bn(t,e,r,n){return t?0:Er(e,r,n)}function yL(t,e,r){let n=t.options.borderWidth,a=t.borderSkipped,i=yc(n);return{t:Bn(a.top,i.top,0,r),r:Bn(a.right,i.right,0,e),b:Bn(a.bottom,i.bottom,0,r),l:Bn(a.left,i.left,0,e)}}function bL(t,e,r){let{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=Ln(a),s=Math.min(e,r),o=t.borderSkipped,l=n||Qe(a);return{topLeft:Bn(!l||o.top||o.left,i.topLeft,0,s),topRight:Bn(!l||o.top||o.right,i.topRight,0,s),bottomLeft:Bn(!l||o.bottom||o.left,i.bottomLeft,0,s),bottomRight:Bn(!l||o.bottom||o.right,i.bottomRight,0,s)}}function xL(t){let e=Gp(t),r=e.right-e.left,n=e.bottom-e.top,a=yL(t,r/2,n/2),i=bL(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Lc(t,e,r,n){let a=e===null,i=r===null,o=t&&!(a&&i)&&Gp(t,n);return o&&(a||An(e,o.left,o.right))&&(i||An(r,o.top,o.bottom))}function wL(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function EL(t,e){t.rect(e.x,e.y,e.w,e.h)}function Rc(t,e,r={}){let n=t.x!==r.x?-e:0,a=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-a;return{x:t.x+n,y:t.y+a,w:t.w+i,h:t.h+s,radius:t.radius}}function SL(t,e,r,n,a){let i=CL(n,t,e,r),s=TL(a,n,e.lineHeight);return{itemWidth:i,itemHeight:s}}function CL(t,e,r,n){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,s)=>i.length>s.length?i:s)),e+r.size/2+n.measureText(a).width}function TL(t,e,r){let n=t;return typeof e.text!="string"&&(n=Up(e,r)),n}function Up(t,e){let r=t.text?t.text.length:0;return e*r}function kL(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}function AL(t,e){let r=new hl({ctx:t.ctx,options:e,chart:t});_r.configure(t,r,e),_r.addBox(t,r),t.titleBlock=r}function Wr(t,e){return e&&(_t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function cn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function PL(t,e){let{element:r,datasetIndex:n,index:a}=e,i=t.getDatasetMeta(n).controller,{label:s,value:o}=i.getLabelAndValue(a);return{chart:t,label:s,parsed:i.getParsed(a),raw:t.data.datasets[n].data[a],formattedValue:o,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function yp(t,e){let r=t.chart.ctx,{body:n,footer:a,title:i}=t,{boxWidth:s,boxHeight:o}=e,l=Ot(e.bodyFont),u=Ot(e.titleFont),c=Ot(e.footerFont),f=i.length,d=a.length,h=n.length,v=jt(e.padding),p=v.height,g=0,m=n.reduce((x,E)=>x+E.before.length+E.lines.length+E.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),m){let x=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;p+=h*x+(m-h)*l.lineHeight+(m-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let y=0,b=function(x){g=Math.max(g,r.measureText(x).width+y)};return r.save(),r.font=u.string,at(t.title,b),r.font=l.string,at(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?s+2+e.boxPadding:0,at(n,x=>{at(x.before,b),at(x.lines,b),at(x.after,b)}),y=0,r.font=c.string,at(t.footer,b),r.restore(),g+=v.width,{width:g,height:p}}function ML(t,e){let{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function DL(t,e,r,n){let{x:a,width:i}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&a+i+s>e.width||t==="right"&&a-i-s<0)return!0}function LL(t,e,r,n){let{x:a,width:i}=r,{width:s,chartArea:{left:o,right:l}}=t,u="center";return n==="center"?u=a<=(o+l)/2?"left":"right":a<=i/2?u="left":a>=s-i/2&&(u="right"),DL(u,t,e,r)&&(u="center"),u}function bp(t,e,r){let n=r.yAlign||e.yAlign||ML(t,r);return{xAlign:r.xAlign||e.xAlign||LL(t,e,r,n),yAlign:n}}function RL(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function OL(t,e,r){let{y:n,height:a}=t;return e==="top"?n+=r:e==="bottom"?n-=a+r:n-=a/2,n}function xp(t,e,r,n){let{caretSize:a,caretPadding:i,cornerRadius:s}=t,{xAlign:o,yAlign:l}=r,u=a+i,{topLeft:c,topRight:f,bottomLeft:d,bottomRight:h}=Ln(s),v=RL(e,o),p=OL(e,l,u);return l==="center"?o==="left"?v+=u:o==="right"&&(v-=u):o==="left"?v-=Math.max(c,d)+a:o==="right"&&(v+=Math.max(f,h)+a),{x:Er(v,0,n.width-e.width),y:Er(p,0,n.height-e.height)}}function nl(t,e,r){let n=jt(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function wp(t){return Wr([],cn(t))}function BL(t,e,r){return ln(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Ep(t,e){let r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}function ur(t,e,r,n){let a=t[e].call(r,n);return typeof a=="undefined"?jp[e].call(r,n):a}function qL(t,e,r,n){let a=t.indexOf(e);if(a===-1)return IL(t,e,r,n);let i=t.lastIndexOf(e);return a!==i?r:a}function _p(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function NL(t,e){let r=[],{bounds:a,step:i,min:s,max:o,precision:l,count:u,maxTicks:c,maxDigits:f,includeBounds:d}=t,h=i||1,v=c-1,{min:p,max:g}=e,m=!ct(s),y=!ct(o),b=!ct(u),x=(g-p)/(f+1),E=sc((g-p)/v/h)*h,S,w,T,k;if(E<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/E)-Math.floor(p/E),k>v&&(E=sc(k*E/v/h)*h),ct(l)||(S=Math.pow(10,l),E=Math.ceil(E*S)/S),a==="ticks"?(w=Math.floor(p/E)*E,T=Math.ceil(g/E)*E):(w=p,T=g),m&&y&&i&&gg((o-s)/i,E/1e3)?(k=Math.round(Math.min((o-s)/E,c)),E=(o-s)/k,w=s,T=o):b?(w=m?s:w,T=y?o:T,k=u-1,E=(T-w)/k):(k=(T-w)/E,Xa(k,Math.round(k),E/1e3)?k=Math.round(k):k=Math.ceil(k));let P=Math.max(lc(E),lc(w));S=Math.pow(10,ct(l)?P:l),w=Math.round(w*S)/S,T=Math.round(T*S)/S;let A=0;for(m&&(d&&w!==s?(r.push({value:s}),w<s&&A++,Xa(Math.round((w+A*E)*S)/S,s,Sp(s,x,t))&&A++):w<s&&A++);A<k;++A){let C=Math.round((w+A*E)*S)/S;if(y&&C>o)break;r.push({value:C})}return y&&d&&T!==o?r.length&&Xa(r[r.length-1].value,o,Sp(o,x,t))?r[r.length-1].value=o:r.push({value:o}):(!y||T===o)&&r.push({value:T}),r}function Sp(t,e,{horizontal:r,minRotation:n}){let a=on(n),i=(r?Math.sin(a):Math.cos(a))||.001,s=.75*e*(""+t).length;return Math.min(e/i,s)}function Cp(t){return t/Math.pow(10,cs(t))===1}function Tp(t,e,r){let n=Math.pow(10,r),a=Math.floor(t/n);return Math.ceil(e/n)-a}function zL(t,e){let r=e-t,n=cs(r);for(;Tp(t,e,n)>10;)n++;for(;Tp(t,e,n)<10;)n--;return Math.min(n,cs(t))}function VL(t,{min:e,max:r}){e=lr(t.min,e);let n=[],a=cs(e),i=zL(e,r),s=i<0?Math.pow(10,Math.abs(i)):1,o=Math.pow(10,i),l=a>i?Math.pow(10,a):0,u=Math.round((e-l)*s)/s,c=Math.floor((e-l)/o/10)*o*10,f=Math.floor((u-c)/Math.pow(10,i)),d=lr(t.min,Math.round((l+c+f*Math.pow(10,i))*s)/s);for(;d<r;)n.push({value:d,major:Cp(d),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(i++,f=2,s=i>=0?1:s),d=Math.round((l+c+f*Math.pow(10,i))*s)/s;let h=lr(t.max,d);return n.push({value:h,major:Cp(h),significand:f}),n}function Uc(t){let e=t.ticks;if(e.display&&t.display){let r=jt(e.backdropPadding);return je(e.font&&e.font.size,Tt.font.size)+r.height}return 0}function WL(t,e,r){return r=_t(r)?r:[r],{w:Tg(t,e.string,r),h:r.length*e.lineHeight}}function kp(t,e,r,n,a){return t===n||t===a?{start:e-r/2,end:e+r/2}:t<n||t>a?{start:e-r,end:e}:{start:e,end:e+r}}function HL(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],a=[],i=t._pointLabels.length,s=t.options.pointLabels,o=s.centerPointLabels?Pt/i:0;for(let l=0;l<i;l++){let u=s.setContext(t.getPointLabelContext(l));a[l]=u.padding;let c=t.getPointPosition(l,t.drawingArea+a[l],o),f=Ot(u.font),d=WL(t.ctx,f,t._pointLabels[l]);n[l]=d;let h=wr(t.getIndexAngle(l)+o),v=Math.round(Vo(h)),p=kp(v,c.x,d.w,0,180),g=kp(v,c.y,d.h,90,270);GL(r,e,h,p,g)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=YL(t,n,a)}function GL(t,e,r,n,a){let i=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r)),o=0,l=0;n.start<e.l?(o=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+o)),a.start<e.t?(l=(e.t-a.start)/s,t.t=Math.min(t.t,e.t-l)):a.end>e.b&&(l=(a.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function UL(t,e,r){let n=t.drawingArea,{extra:a,additionalAngle:i,padding:s,size:o}=r,l=t.getPointPosition(e,n+a+s,i),u=Math.round(Vo(wr(l.angle+or))),c=XL(l.y,o.h,u),f=jL(u),d=KL(l.x,o.w,f);return{visible:!0,x:l.x,y:c,textAlign:f,left:d,top:c,right:d+o.w,bottom:c+o.h}}function $L(t,e){if(!e)return!0;let{left:r,top:n,right:a,bottom:i}=t;return!(zr({x:r,y:n},e)||zr({x:r,y:i},e)||zr({x:a,y:n},e)||zr({x:a,y:i},e))}function YL(t,e,r){let n=[],a=t._pointLabels.length,i=t.options,{centerPointLabels:s,display:o}=i.pointLabels,l={extra:Uc(i)/2,additionalAngle:s?Pt/a:0},u;for(let c=0;c<a;c++){l.padding=r[c],l.size=e[c];let f=UL(t,c,l);n.push(f),o==="auto"&&(f.visible=$L(f,u),f.visible&&(u=f))}return n}function jL(t){return t===0||t===180?"center":t<180?"left":"right"}function KL(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function XL(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function ZL(t,e,r){let{left:n,top:a,right:i,bottom:s}=r,{backdropColor:o}=e;if(!ct(o)){let l=Ln(e.borderRadius),u=jt(e.backdropPadding);t.fillStyle=o;let c=n-u.left,f=a-u.top,d=i-n+u.width,h=s-a+u.height;Object.values(l).some(v=>v!==0)?(t.beginPath(),Za(t,{x:c,y:f,w:d,h,radius:l}),t.fill()):t.fillRect(c,f,d,h)}}function QL(t,e){let{ctx:r,options:{pointLabels:n}}=t;for(let a=e-1;a>=0;a--){let i=t._pointLabelItems[a];if(!i.visible)continue;let s=n.setContext(t.getPointLabelContext(a));ZL(r,s,i);let o=Ot(s.font),{x:l,y:u,textAlign:c}=i;Dn(r,t._pointLabels[a],l,u+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}function Xp(t,e,r,n){let{ctx:a}=t;if(r)a.arc(t.xCenter,t.yCenter,e,0,gr);else{let i=t.getPointPosition(0,e);a.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=t.getPointPosition(s,e),a.lineTo(i.x,i.y)}}function JL(t,e,r,n,a){let i=t.ctx,s=e.circular,{color:o,lineWidth:l}=e;!s&&!n||!o||!l||r<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(a.dash||[]),i.lineDashOffset=a.dashOffset,i.beginPath(),Xp(t,r,s,n),i.closePath(),i.stroke(),i.restore())}function eR(t,e,r){return ln(t,{label:r,index:e,type:"pointLabel"})}function Ap(t,e){return t-e}function Pp(t,e){if(ct(e))return null;let r=t._adapter,{parser:n,round:a,isoWeekday:i}=t._parseOpts,s=e;return typeof n=="function"&&(s=n(s)),Ft(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(a&&(s=a==="week"&&(Qi(i)||i===!0)?r.startOf(s,"isoWeek",i):r.startOf(s,a)),+s)}function Mp(t,e,r,n){let a=cr.length;for(let i=cr.indexOf(t);i<a-1;++i){let s=vl[cr[i]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(o*s.size))<=n)return cr[i]}return cr[a-1]}function tR(t,e,r,n,a){for(let i=cr.length-1;i>=cr.indexOf(r);i--){let s=cr[i];if(vl[s].common&&t._adapter.diff(a,n,s)>=e-1)return s}return cr[r?cr.indexOf(r):0]}function rR(t){for(let e=cr.indexOf(t)+1,r=cr.length;e<r;++e)if(vl[cr[e]].common)return cr[e]}function Dp(t,e,r){if(!r)t[e]=!0;else if(r.length){let{lo:n,hi:a}=Wo(r,e),i=r[n]>=e?r[n]:r[a];t[i]=!0}}function nR(t,e,r,n){let a=t._adapter,i=+a.startOf(e[0].value,n),s=e[e.length-1].value,o,l;for(o=i;o<=s;o=+a.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function Lp(t,e,r){let n=[],a={},i=e.length,s,o;for(s=0;s<i;++s)o=e[s],a[o]=s,n.push({value:o,major:!1});return i===0||!r?n:nR(t,n,a,r)}function il(t,e,r){let n=0,a=t.length-1,i,s,o,l;r?(e>=t[n].pos&&e<=t[a].pos&&({lo:n,hi:a}=Ho(t,"pos",e)),{pos:i,time:o}=t[n],{pos:s,time:l}=t[a]):(e>=t[n].time&&e<=t[a].time&&({lo:n,hi:a}=Ho(t,"time",e)),{time:i,pos:o}=t[n],{time:s,pos:l}=t[a]);let u=s-i;return u?o+(l-o)*(e-i)/u:o}var Oc,un,Ug,YM,Bc,ul,Ac,Xg,aD,Ja,Ic,iD,cD,Op,_r,cl,qc,ol,yD,tp,Ip,us,rp,Fc,Sr,ID,np,ap,ya,ei,Nc,Hr,zc,up,zp,is,Hc,rL,aL,iL,ll,vp,rr,pL,On,pa,ma,mp,_L,dl,$p,hl,Yp,os,jp,ls,Kp,IL,FL,ti,ai,ri,cs,ga,al,Qa,vl,cr,ni,sl,Zp=Ao(()=>{Gg();Oc=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,a){let i=r.listeners[a],s=r.duration;i.forEach(o=>o({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=fc.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;let i=n.items,s=i.length-1,o=!1,l;for(;s>=0;--s)l=i[s],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(i[s]=i[i.length-1],i.pop());o&&(a.draw(),this._notify(a,n,e,"progress")),i.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){let r=this._charts,n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){let r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;let r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){let r=this._charts.get(e);if(!r||!r.items.length)return;let n=r.items,a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},un=new Oc,Ug="transparent",YM={boolean(t,e,r){return r>.5?e:t},color(t,e,r){let n=vc(t||Ug),a=n.valid&&vc(e||Ug);return a&&a.valid?a.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}},Bc=class{constructor(e,r,n,a){let i=r[n];a=es([e.to,a,i,e.from]);let s=es([e.from,i,a]);this._active=!0,this._fn=e.fn||YM[e.type||typeof s],this._easing=$a[e.easing]||$a.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=a,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);let a=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=es([e.to,r,a,e.from]),this._from=es([e.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let r=e-this._start,n=this._duration,a=this._prop,i=this._from,s=this._loop,o=this._to,l;if(this._active=i!==o&&(s||r<n),!this._active){this._target[a]=o,this._notify(!0);return}if(r<0){this._target[a]=i;return}l=r/n%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(i,o,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){let r=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}},ul=class{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Qe(e))return;let r=Object.keys(Tt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{let i=e[a];if(!Qe(i))return;let s={};for(let o of r)s[o]=i[o];(_t(i.properties)&&i.properties||[a]).forEach(o=>{(o===a||!n.has(o))&&n.set(o,s)})})}_animateOptions(e,r){let n=r.options,a=KM(e,n);if(!a)return[];let i=this._createAnimations(a,n);return n.$shared&&jM(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){let n=this._properties,a=[],i=e.$animations||(e.$animations={}),s=Object.keys(r),o=Date.now(),l;for(l=s.length-1;l>=0;--l){let u=s[l];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,r));continue}let c=r[u],f=i[u],d=n.get(u);if(f)if(d&&f.active()){f.update(d,c,o);continue}else f.cancel();if(!d||!d.duration){e[u]=c;continue}i[u]=f=new Bc(d,e,u,c),a.push(f)}return a}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}let n=this._createAnimations(e,r);if(n.length)return un.add(this._chart,n),!0}};Ac=t=>t==="reset"||t==="none",Xg=(t,e)=>e?t:Object.assign({},t),aD=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:Rp(r,!0),values:null},Ja=class{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ts(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(f,d,h,v)=>f==="x"?d:f==="r"?v:h,i=r.xAxisID=je(n.xAxisID,kc(e,"x")),s=r.yAxisID=je(n.yAxisID,kc(e,"y")),o=r.rAxisID=je(n.rAxisID,kc(e,"r")),l=r.indexAxis,u=r.iAxisID=a(l,i,s,o),c=r.vAxisID=a(l,s,i,o);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&cc(this._data,this),e._stacked&&ts(e)}_dataCheck(){let e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Qe(r)){let a=this._cachedMeta;this._data=QM(r,a)}else if(n!==r){if(n){cc(n,this);let a=this._cachedMeta;ts(a),a._parsed=[]}r&&Object.isExtensible(r)&&wg(r,this),this._syncList=[],this._data=r}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let r=this._cachedMeta,n=this.getDataset(),a=!1;this._dataCheck();let i=r._stacked;r._stacked=Tc(r.vScale,r),r.stack!==n.stack&&(a=!0,ts(r),r.stack=n.stack),this._resyncElements(e),(a||i!==r._stacked)&&(Kg(this,r._parsed),r._stacked=Tc(r.vScale,r))}configure(){let e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){let{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:s}=n,o=i.axis,l=e===0&&r===a.length?!0:n._sorted,u=e>0&&n._parsed[e-1],c,f,d;if(this._parsing===!1)n._parsed=a,n._sorted=!0,d=a;else{_t(a[e])?d=this.parseArrayData(n,a,e,r):Qe(a[e])?d=this.parseObjectData(n,a,e,r):d=this.parsePrimitiveData(n,a,e,r);let h=()=>f[o]===null||u&&f[o]<u[o];for(c=0;c<r;++c)n._parsed[c+e]=f=d[c],l&&(h()&&(l=!1),u=f);n._sorted=l}s&&Kg(this,d)}parsePrimitiveData(e,r,n,a){let{iScale:i,vScale:s}=e,o=i.axis,l=s.axis,u=i.getLabels(),c=i===s,f=new Array(a),d,h,v;for(d=0,h=a;d<h;++d)v=d+n,f[d]={[o]:c||i.parse(u[v],v),[l]:s.parse(r[v],v)};return f}parseArrayData(e,r,n,a){let{xScale:i,yScale:s}=e,o=new Array(a),l,u,c,f;for(l=0,u=a;l<u;++l)c=l+n,f=r[c],o[l]={x:i.parse(f[0],c),y:s.parse(f[1],c)};return o}parseObjectData(e,r,n,a){let{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(a),c,f,d,h;for(c=0,f=a;c<f;++c)d=c+n,h=r[d],u[c]={x:i.parse(Xi(h,o),d),y:s.parse(Xi(h,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){let a=this.chart,i=this._cachedMeta,s=r[e.axis],o={keys:Rp(a,!0),values:r._stacks[e.axis]._visualValues};return Yg(o,s,i.index,{mode:n})}updateRangeFromParsed(e,r,n,a){let i=n[r.axis],s=i===null?NaN:i,o=a&&n._stacks[r.axis];a&&o&&(a.values=o,s=Yg(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){let n=this._cachedMeta,a=n._parsed,i=n._sorted&&e===n.iScale,s=a.length,o=this._getOtherScale(e),l=aD(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=eD(o),d,h;function v(){h=a[d];let p=h[o.axis];return!Ft(h[e.axis])||c>p||f<p}for(d=0;d<s&&!(!v()&&(this.updateRangeFromParsed(u,e,h,l),i));++d);if(i){for(d=s-1;d>=0;--d)if(!v()){this.updateRangeFromParsed(u,e,h,l);break}}return u}getAllParsedValues(e){let r=this._cachedMeta._parsed,n=[],a,i,s;for(a=0,i=r.length;a<i;++a)s=r[a][e.axis],Ft(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){let r=this._cachedMeta;this.update(e||"default"),r._clip=ZM(je(this.options.clip,XM(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||a.length-o,u=this.options.drawActiveElementsOnTop,c;for(n.dataset&&n.dataset.draw(e,i,o,l),c=o;c<o+l;++c){let f=a[c];f.hidden||(f.active&&u?s.push(f):f.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,r){let n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){let a=this.getDataset(),i;if(e>=0&&e<this._cachedMeta.data.length){let s=this._cachedMeta.data[e];i=s.$context||(s.$context=nD(this.getContext(),e,s)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=rD(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){let a=r==="active",i=this._cachedDataOpts,s=e+"-"+r,o=i[s],l=this.enableOptionSharing&&Zi(n);if(o)return Xg(o,l);let u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),h=Object.keys(Tt.elements[e]),v=()=>this.getContext(n,a,r),p=u.resolveNamedOptions(d,h,v,f);return p.$shared&&(p.$shared=l,i[s]=Object.freeze(Xg(p,l))),p}_resolveAnimations(e,r,n){let a=this.chart,i=this._cachedDataOpts,s=`animation-${r}`,o=i[s];if(o)return o;let l;if(a.options.animation!==!1){let c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,r),d=c.getOptionScopes(this.getDataset(),f);l=c.createResolver(d,this.getContext(e,n,r))}let u=new ul(a,l&&l.animations);return l&&l._cacheable&&(i[s]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Ac(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){let n=this.resolveDataElementOptions(e,r),a=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:s}}updateElement(e,r,n,a){Ac(a)?Object.assign(e,n):this._resolveAnimations(r,a).update(e,n)}updateSharedOptions(e,r,n){e&&!Ac(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,a){e.active=a;let i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let r=this._data,n=this._cachedMeta.data;for(let[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];let a=n.length,i=r.length,s=Math.min(i,a);s&&this.parse(0,s),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,r,n=!0){let a=this._cachedMeta,i=a.data,s=e+r,o,l=u=>{for(u.length+=r,o=u.length-1;o>=s;o--)u[o]=u[o-r]};for(l(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,a){}_removeElements(e,r){let n=this._cachedMeta;if(this._parsing){let a=n._parsed.splice(e,r);n._stacked&&ts(n,a)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[r,n,a]=e;this[r](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};Oe(Ja,"defaults",{}),Oe(Ja,"datasetElementType",null),Oe(Ja,"dataElementType",null);Ic=class t{constructor(e){Oe(this,"options");this.options=e||{}}static override(e){Object.assign(t.prototype,e)}init(){}formats(){return va()}parse(){return va()}format(){return va()}add(){return va()}diff(){return va()}startOf(){return va()}endOf(){return va()}},iD={_date:Ic};cD={evaluateInteractionItems:fs,modes:{index(t,e,r,n){let a=Rn(e,t),i=r.axis||"x",s=r.includeInvisible||!1,o=r.intersect?Pc(t,a,i,n,s):Mc(t,a,i,!1,n,s),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{let c=o[0].index,f=u.data[c];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,r,n){let a=Rn(e,t),i=r.axis||"xy",s=r.includeInvisible||!1,o=r.intersect?Pc(t,a,i,n,s):Mc(t,a,i,!1,n,s);if(o.length>0){let l=o[0].datasetIndex,u=t.getDatasetMeta(l).data;o=[];for(let c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:l,index:c})}return o},point(t,e,r,n){let a=Rn(e,t),i=r.axis||"xy",s=r.includeInvisible||!1;return Pc(t,a,i,n,s)},nearest(t,e,r,n){let a=Rn(e,t),i=r.axis||"xy",s=r.includeInvisible||!1;return Mc(t,a,i,r.intersect,n,s)},x(t,e,r,n){let a=Rn(e,t);return Zg(t,a,"x",r.intersect,n)},y(t,e,r,n){let a=Rn(e,t);return Zg(t,a,"y",r.intersect,n)}}},Op=["left","top","right","bottom"];_r={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){let r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;let a=jt(t.options.layout.padding),i=Math.max(e-a.width,0),s=Math.max(r-a.height,0),o=vD(t.boxes),l=o.vertical,u=o.horizontal;at(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});let c=l.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:r,padding:a,availableWidth:i,availableHeight:s,vBoxMaxWidth:i/2/c,hBoxMaxHeight:s/2}),d=Object.assign({},a);Bp(d,jt(n));let h=Object.assign({maxPadding:d,w:i,h:s,x:a.left,y:a.top},a),v=hD(l.concat(u),f);ss(o.fullSize,h,f,v),ss(l,h,f,v),ss(u,h,f,v)&&ss(l,h,f,v),pD(h),ep(o.leftAndTop,h,f,v),h.x+=h.w,h.y+=h.h,ep(o.rightAndBottom,h,f,v),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},at(o.chartArea,p=>{let g=p.box;Object.assign(g,t.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}},cl=class{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,a){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(e){return!0}updateConfig(e){}},qc=class extends cl{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},ol="$chartjs",yD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tp=t=>t===null||t==="";Ip=Ig?{passive:!0}:!1;us=new Map,rp=0;Fc=class extends cl{acquireContext(e,r){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(bD(e,r),n):null}releaseContext(e){let r=e.canvas;if(!r[ol])return!1;let n=r[ol].initial;["height","width"].forEach(i=>{let s=n[i];ct(s)?r.removeAttribute(i):r.setAttribute(i,s)});let a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[ol],!0}addEventListener(e,r,n){this.removeEventListener(e,r);let a=e.$proxies||(e.$proxies={}),s={attach:_D,detach:SD,resize:kD}[r]||AD;a[r]=s(e,r,n)}removeEventListener(e,r){let n=e.$proxies||(e.$proxies={}),a=n[r];if(!a)return;({attach:Dc,detach:Dc,resize:Dc}[r]||wD)(e,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,a){return Bg(e,r,n,a)}isAttached(e){let r=e&&Qo(e);return!!(r&&r.isConnected)}};Sr=class{constructor(){Oe(this,"x");Oe(this,"y");Oe(this,"active",!1);Oe(this,"options");Oe(this,"$animations")}tooltipPosition(e){let{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Qi(this.x)&&Qi(this.y)}getProps(e,r){let n=this.$animations;if(!r||!n)return this;let a={};return e.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}};Oe(Sr,"defaults",{}),Oe(Sr,"defaultRoutes");ID=t=>t==="left"?"right":t==="right"?"left":t,np=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,ap=(t,e)=>Math.min(e||t,t);ya=class t extends Sr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return e=lr(e,Number.POSITIVE_INFINITY),r=lr(r,Number.NEGATIVE_INFINITY),n=lr(n,Number.POSITIVE_INFINITY),a=lr(a,Number.NEGATIVE_INFINITY),{min:lr(e,n),max:lr(r,a),minDefined:Ft(e),maxDefined:Ft(r)}}getMinMax(e){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),s;if(a&&i)return{min:r,max:n};let o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)s=o[l].controller.getMinMax(this,e),a||(r=Math.min(r,s.min)),i||(n=Math.max(n,s.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:lr(r,lr(n,r)),max:lr(n,lr(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,r,n){let{beginAtZero:a,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Pg(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=o<this.ticks.length;this._convertTicksToLabels(l?ip(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=MD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let r=this.options.ticks,n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n],i.label=ft(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,r=e.ticks,n=ap(this.ticks.length,e.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation,s=a,o,l,u;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}let c=this._getLabelSizes(),f=c.widest.width,d=c.highest.height,h=Er(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),f+6>o&&(o=h/(n-(e.offset?.5:1)),l=this.maxHeight-as(e.grid)-r.padding-sp(e.title,this.chart.options.font),u=Math.sqrt(f*f+d*d),s=Vo(Math.min(Math.asin(Er((c.highest.height+6)/o,-1,1)),Math.asin(Er(l/u,-1,1))-Math.asin(Er(d/u,-1,1)))),s=Math.max(a,Math.min(i,s))),this.labelRotation=s}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){let l=sp(a,r.options.font);if(o?(e.width=this.maxWidth,e.height=as(i)+l):(e.height=this.maxHeight,e.width=as(i)+l),n.display&&this.ticks.length){let{first:u,last:c,widest:f,highest:d}=this._getLabelSizes(),h=n.padding*2,v=on(this.labelRotation),p=Math.cos(v),g=Math.sin(v);if(o){let m=n.mirror?0:g*f.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+m+h)}else{let m=n.mirror?0:p*f.width+g*d.height;e.width=Math.min(this.maxWidth,e.width+m+h)}this._calculatePadding(u,c,g,p)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,a){let{ticks:{align:i,padding:s},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){let c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),d=0,h=0;l?u?(d=a*e.width,h=n*r.height):(d=n*e.height,h=a*r.width):i==="start"?h=r.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,h=r.width/2),this.paddingLeft=Math.max((d-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-f+s)*this.width/(this.width-f),0)}else{let c=r.height/2,f=e.height/2;i==="start"?(c=0,f=e.height):i==="end"&&(c=r.height,f=0),this.paddingTop=c+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)ct(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let r=this.options.ticks.sampleSize,n=this.ticks;r<n.length&&(n=ip(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){let{ctx:a,_longestTextCache:i}=this,s=[],o=[],l=Math.floor(r/ap(r,n)),u=0,c=0,f,d,h,v,p,g,m,y,b,x,E;for(f=0;f<r;f+=l){if(v=e[f].label,p=this._resolveTickFontOptions(f),a.font=g=p.string,m=i[g]=i[g]||{data:{},gc:[]},y=p.lineHeight,b=x=0,!ct(v)&&!_t(v))b=ji(a,m.data,m.gc,b,v),x=y;else if(_t(v))for(d=0,h=v.length;d<h;++d)E=v[d],!ct(E)&&!_t(E)&&(b=ji(a,m.data,m.gc,b,E),x+=y);s.push(b),o.push(x),u=Math.max(b,u),c=Math.max(x,c)}FD(i,r);let S=s.indexOf(u),w=o.indexOf(c),T=k=>({width:s[k]||0,height:o[k]||0});return{first:T(0),last:T(r-1),widest:T(S),highest:T(w),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let r=this._startPixel+e*this._length;return mg(this._alignToPixels?Mn(this.chart,r,0):r)}getDecimalForPixel(e){let r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){let r=this.ticks||[];if(e>=0&&e<r.length){let n=r[e];return n.$context||(n.$context=zD(this.getContext(),e,n))}return this.$context||(this.$context=ND(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,r=on(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,l=i?i.highest.height+s:0;return this.isHorizontal()?l*n>o*a?o/n:l/a:l*a<o*n?l/n:o/a}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let r=this.axis,n=this.chart,a=this.options,{grid:i,position:s,border:o}=a,l=i.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=as(i),h=[],v=o.setContext(this.getContext()),p=v.display?v.width:0,g=p/2,m=function(O){return Mn(n,O,p)},y,b,x,E,S,w,T,k,P,A,C,_;if(s==="top")y=m(this.bottom),w=this.bottom-d,k=y-g,A=m(e.top)+g,_=e.bottom;else if(s==="bottom")y=m(this.top),A=e.top,_=m(e.bottom)-g,w=y+g,k=this.top+d;else if(s==="left")y=m(this.right),S=this.right-d,T=y-g,P=m(e.left)+g,C=e.right;else if(s==="right")y=m(this.left),P=e.left,C=m(e.right)-g,S=y+g,T=this.left+d;else if(r==="x"){if(s==="center")y=m((e.top+e.bottom)/2+.5);else if(Qe(s)){let O=Object.keys(s)[0],D=s[O];y=m(this.chart.scales[O].getPixelForValue(D))}A=e.top,_=e.bottom,w=y+g,k=w+d}else if(r==="y"){if(s==="center")y=m((e.left+e.right)/2);else if(Qe(s)){let O=Object.keys(s)[0],D=s[O];y=m(this.chart.scales[O].getPixelForValue(D))}S=y-g,T=S-d,P=e.left,C=e.right}let R=je(a.ticks.maxTicksLimit,f),L=Math.max(1,Math.ceil(f/R));for(b=0;b<f;b+=L){let O=this.getContext(b),D=i.setContext(O),I=o.setContext(O),F=D.lineWidth,z=D.color,q=I.dash||[],N=I.dashOffset,U=D.tickWidth,Y=D.tickColor,$=D.tickBorderDash||[],j=D.tickBorderDashOffset;x=qD(this,b,l),x!==void 0&&(E=Mn(n,x,F),u?S=T=P=C=E:w=k=A=_=E,h.push({tx1:S,ty1:w,tx2:T,ty2:k,x1:P,y1:A,x2:C,y2:_,width:F,color:z,borderDash:q,borderDashOffset:N,tickWidth:U,tickColor:Y,tickBorderDash:$,tickBorderDashOffset:j}))}return this._ticksLength=f,this._borderValue=y,h}_computeLabelItems(e){let r=this.axis,n=this.options,{position:a,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:c,mirror:f}=i,d=as(n.grid),h=d+c,v=f?-c:h,p=-on(this.labelRotation),g=[],m,y,b,x,E,S,w,T,k,P,A,C,_="middle";if(a==="top")S=this.bottom-v,w=this._getXAxisLabelAlignment();else if(a==="bottom")S=this.top+v,w=this._getXAxisLabelAlignment();else if(a==="left"){let L=this._getYAxisLabelAlignment(d);w=L.textAlign,E=L.x}else if(a==="right"){let L=this._getYAxisLabelAlignment(d);w=L.textAlign,E=L.x}else if(r==="x"){if(a==="center")S=(e.top+e.bottom)/2+h;else if(Qe(a)){let L=Object.keys(a)[0],O=a[L];S=this.chart.scales[L].getPixelForValue(O)+h}w=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")E=(e.left+e.right)/2-h;else if(Qe(a)){let L=Object.keys(a)[0],O=a[L];E=this.chart.scales[L].getPixelForValue(O)}w=this._getYAxisLabelAlignment(d).textAlign}r==="y"&&(l==="start"?_="top":l==="end"&&(_="bottom"));let R=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){b=o[m],x=b.label;let L=i.setContext(this.getContext(m));T=this.getPixelForTick(m)+i.labelOffset,k=this._resolveTickFontOptions(m),P=k.lineHeight,A=_t(x)?x.length:1;let O=A/2,D=L.color,I=L.textStrokeColor,F=L.textStrokeWidth,z=w;s?(E=T,w==="inner"&&(m===y-1?z=this.options.reverse?"left":"right":m===0?z=this.options.reverse?"right":"left":z="center"),a==="top"?u==="near"||p!==0?C=-A*P+P/2:u==="center"?C=-R.highest.height/2-O*P+P:C=-R.highest.height+P/2:u==="near"||p!==0?C=P/2:u==="center"?C=R.highest.height/2-O*P:C=R.highest.height-A*P,f&&(C*=-1),p!==0&&!L.showLabelBackdrop&&(E+=P/2*Math.sin(p))):(S=T,C=(1-A)*P/2);let q;if(L.showLabelBackdrop){let N=jt(L.backdropPadding),U=R.heights[m],Y=R.widths[m],$=C-N.top,j=0-N.left;switch(_){case"middle":$-=U/2;break;case"bottom":$-=U;break}switch(w){case"center":j-=Y/2;break;case"right":j-=Y;break;case"inner":m===y-1?j-=Y:m>0&&(j-=Y/2);break}q={left:j,top:$,width:Y+N.width,height:U+N.height,color:L.backdropColor}}g.push({label:x,font:k,textOffset:C,options:{rotation:p,color:D,strokeColor:I,strokeWidth:F,textAlign:z,textBaseline:_,translation:[E,S],backdrop:q}})}return g}_getXAxisLabelAlignment(){let{position:e,ticks:r}=this.options;if(-on(this.labelRotation))return e==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){let{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,s=this._getLabelSizes(),o=e+i,l=s.widest.width,u,c;return r==="left"?a?(c=this.right+i,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-o,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c=this.left)):r==="right"?a?(c=this.left+i,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+o,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:r},left:n,top:a,width:i,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,a,i,s),e.restore())}getLineWidthForValue(e){let r=this.options.grid;if(!this._isVisible()||!r.display)return 0;let a=this.ticks.findIndex(i=>i.value===e);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){let r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),i,s,o=(l,u,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(i=0,s=a.length;i<s;++i){let l=a[i];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;let o=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue,u,c,f,d;this.isHorizontal()?(u=Mn(e,this.left,s)-s/2,c=Mn(e,this.right,o)+o/2,f=d=l):(f=Mn(e,this.top,s)-s/2,d=Mn(e,this.bottom,o)+o/2,u=c=l),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(u,f),r.lineTo(c,d),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,a=this._computeLabelArea();a&&jo(n,a);let i=this.getLabelItems(e);for(let s of i){let o=s.options,l=s.font,u=s.label,c=s.textOffset;Dn(n,u,0,c,l,o)}a&&Ko(n)}drawTitle(){let{ctx:e,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;let i=Ot(n.font),s=jt(n.padding),o=n.align,l=i.lineHeight/2;r==="bottom"||r==="center"||Qe(r)?(l+=s.bottom,_t(n.text)&&(l+=i.lineHeight*(n.text.length-1))):l+=s.top;let{titleX:u,titleY:c,maxWidth:f,rotation:d}=WD(this,l,r,o);Dn(e,n.text,0,0,i,{color:n.color,maxWidth:f,rotation:d,textAlign:VD(o,r,a),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,r=e.ticks&&e.ticks.z||0,n=je(e.grid&&e.grid.z,-1),a=je(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){let r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[],i,s;for(i=0,s=r.length;i<s;++i){let o=r[i];o[n]===this.id&&(!e||o.type===e)&&a.push(o)}return a}_resolveTickFontOptions(e){let r=this.options.ticks.setContext(this.getContext(e));return Ot(r.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},ei=class{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let r=Object.getPrototypeOf(e),n;UD(r)&&(n=this.register(r));let a=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,HD(e,s,n),this.override&&Tt.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let r=this.items,n=e.id,a=this.scope;n in r&&delete r[n],a&&n in Tt[a]&&(delete Tt[a][n],this.override&&delete Pn[n])}};Nc=class{constructor(){this.controllers=new ei(Ja,"datasets",!0),this.elements=new ei(Sr,"elements"),this.plugins=new ei(Object,"plugins"),this.scales=new ei(ya,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(a=>{let i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):at(a,s=>{let o=n||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,r,n){let a=zo(e);ft(n["before"+a],[],n),r[e](n),ft(n["after"+a],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){let n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){let a=r.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return a}},Hr=new Nc,zc=class{constructor(){this._init=[]}notify(e,r,n,a){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let i=a?this._descriptors(e).filter(a):this._descriptors(e),s=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,r,n,a){a=a||{};for(let i of e){let s=i.plugin,o=s[n],l=[r,a,i.options];if(ft(o,l,s)===!1&&a.cancelable)return!1}return!0}invalidate(){ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){let n=e&&e.config,a=je(n.options&&n.options.plugins,{}),i=$D(n);return a===!1&&!r?[]:jD(e,i,a,r)}_notifyStateChanges(e){let r=this._oldCache||[],n=this._cache,a=(i,s)=>i.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(a(r,n),e,"stop"),this._notify(a(n,r),e,"start")}};up=new Map,zp=new Set;is=(t,e,r)=>{let n=Xi(e,r);n!==void 0&&t.add(n)},Hc=class{constructor(e){this._config=tL(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Np(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),Fp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return rl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return rl(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return rl(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){let r=e.id,n=this.type;return rl(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){let n=this._scopeCache,a=n.get(e);return(!a||r)&&(a=new Map,n.set(e,a)),a}getOptionScopes(e,r,n){let{options:a,type:i}=this,s=this._cachedScopes(e,n),o=s.get(r);if(o)return o;let l=new Set;r.forEach(c=>{e&&(l.add(e),c.forEach(f=>is(l,e,f))),c.forEach(f=>is(l,a,f)),c.forEach(f=>is(l,Pn[i]||{},f)),c.forEach(f=>is(l,Tt,f)),c.forEach(f=>is(l,$o,f))});let u=Array.from(l);return u.length===0&&u.push(Object.create(null)),zp.has(r)&&s.set(r,u),u}chartOptionScopes(){let{options:e,type:r}=this;return[e,Pn[r]||{},Tt.datasets[r]||{},{type:r},Tt,$o]}resolveNamedOptions(e,r,n,a=[""]){let i={$shared:!0},{resolver:s,subPrefixes:o}=cp(this._resolverCache,e,a),l=s;if(nL(s,r)){i.$shared=!1,n=an(n)?n():n;let u=this.createResolver(e,n,o);l=da(s,n,u)}for(let u of r)i[u]=l[u];return i}createResolver(e,r,n=[""],a){let{resolver:i}=cp(this._resolverCache,e,n);return Qe(r)?da(i,r,void 0,a):i}};rL=t=>Qe(t)&&Object.getOwnPropertyNames(t).some(e=>an(t[e]));aL="4.5.0",iL=["top","bottom","left","right","chartArea"];ll={},vp=t=>{let e=Vp(t);return Object.values(ll).filter(r=>r.canvas===e).pop()};rr=class{static register(...e){Hr.add(...e),gp()}static unregister(...e){Hr.remove(...e),gp()}constructor(e,r){let n=this.config=new Hc(r),a=Vp(e),i=vp(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");let s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||PD(a)),this.platform.updateConfig(n);let o=this.platform.acquireContext(a,s.aspectRatio),l=o&&o.canvas,u=l&&l.height,c=l&&l.width;if(this.id=cg(),this.ctx=o,this.canvas=l,this.width=c,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_g(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],ll[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}un.listen(this,"complete",hp),un.listen(this,"progress",sL),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return ct(e)?r&&i?i:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ec(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gc(this.canvas,this.ctx),this}stop(){return un.stop(this),this}resize(e,r){un.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){let n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(a,e,r,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Ec(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),ft(n.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};at(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){let e=this.options,r=e.scales,n=this.scales,a=Object.keys(n).reduce((s,o)=>(s[o]=!1,s),{}),i=[];r&&(i=i.concat(Object.keys(r).map(s=>{let o=r[s],l=Wc(s,o),u=l==="r",c=l==="x";return{options:o,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),at(i,s=>{let o=s.options,l=o.id,u=Wc(l,o),c=je(o.type,s.dtype);(o.position===void 0||fp(o.position,u)!==fp(s.dposition))&&(o.position=s.dposition),a[l]=!0;let f=null;if(l in n&&n[l].type===c)f=n[l];else{let d=Hr.getScale(c);f=new d({id:l,type:c,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(o,e)}),at(a,(s,o)=>{s||delete n[o]}),at(n,s=>{_r.configure(this,s,s.options),_r.addBox(this,s)})}_updateMetasets(){let e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(dp("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){let e=[],r=this.data.datasets,n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){let i=r[n],s=this.getDatasetMeta(n),o=i.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=o,s.indexAxis=i.indexAxis||Vc(o,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{let l=Hr.getController(o),{datasetElementType:u,dataElementType:c}=Tt.datasets[o];Object.assign(l,{dataElementType:Hr.getElement(c),datasetElementType:u&&Hr.getElement(u)}),s.controller=new l(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){at(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let r=this.config;r.update();let n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let u=0,c=this.data.datasets.length;u<c;u++){let{controller:f}=this.getDatasetMeta(u),d=!a&&i.indexOf(f)===-1;f.buildOrUpdateElements(d),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),a||at(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(dp("z","_idx"));let{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){at(this.scales,e=>{_r.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!ic(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(let{method:n,start:a,count:i}of r){let s=n==="_removeElements"?-i:i;oL(e,a,s)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let r=this.data.datasets.length,n=i=>new Set(e.filter(s=>s[0]===i).map((s,o)=>o+","+s.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!ic(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_r.update(this,this.width,this.height,e);let r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],at(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,an(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){let n=this.getDatasetMeta(e),a={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(un.has(this)?this.attached&&!un.running(this)&&un.start(this):(this.draw(),hp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let r=this._sortedMetasets,n=[],a,i;for(a=0,i=r.length;a<i;++a){let s=r[a];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let r=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=Hg(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&jo(r,a),e.controller.draw(),a&&Ko(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return zr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,a){let i=cD.modes[r];return typeof i=="function"?i(this,e,n,a):[]}getDatasetMeta(e){let r=this.data.datasets[e],n=this._metasets,a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=ln(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let r=this.data.datasets[e];if(!r)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){let n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){let a=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,a);Zi(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(o=>o.datasetIndex===e?a:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){let r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),un.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),gc(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete ll[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,r=this.platform,n=(i,s)=>{r.addEventListener(this,i,s),e[i]=s},a=(i,s,o)=>{i.offsetX=s,i.offsetY=o,this._eventHandler(i)};at(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},a=(l,u)=>{e[l]&&(r.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)},s,o=()=>{a("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():s()}unbindEvents(){at(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},at(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){let a=n?"set":"remove",i,s,o,l;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];let u=s&&this.getDatasetMeta(s.datasetIndex).controller;u&&u[a+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let r=this._active||[],n=e.map(({datasetIndex:i,index:s})=>{let o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[s],index:s}});!Ki(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){let a=this.options.hover,i=(l,u)=>l.filter(c=>!u.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),s=i(r,e),o=n?e:i(e,r);s.length&&this.updateHoverStyle(s,a.mode,!1),o.length&&a.mode&&this.updateHoverStyle(o,a.mode,!0)}_eventHandler(e,r){let n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},a=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;let i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){let{_active:a=[],options:i}=this,s=r,o=this._getActiveElements(e,a,n,s),l=hg(e),u=lL(e,this._lastEvent,n,l);n&&(this._lastEvent=null,ft(i.onHover,[e,o,this],this),l&&ft(i.onClick,[e,o,this],this));let c=!Ki(o,a);return(c||r)&&(this._active=o,this._updateHoverStyles(o,a,r)),this._lastEvent=u,c}_getActiveElements(e,r,n,a){if(e.type==="mouseout")return[];if(!n)return r;let i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}};Oe(rr,"defaults",Tt),Oe(rr,"instances",ll),Oe(rr,"overrides",Pn),Oe(rr,"registry",Hr),Oe(rr,"version",aL),Oe(rr,"getChart",vp);pL=typeof Path2D=="function";On=class extends Sr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let a=n.spanGaps?this._loop:this._fullLoop;Og(this._points,n,e,a,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Wg(this,this.options.segment))}first(){let e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){let e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){let n=this.options,a=e[r],i=this.points,s=Vg(this,{property:r,start:a,end:a});if(!s.length)return;let o=[],l=hL(n),u,c;for(u=0,c=s.length;u<c;++u){let{start:f,end:d}=s[u],h=i[f],v=i[d];if(h===v){o.push(h);continue}let p=Math.abs((a-h[r])/(v[r]-h[r])),g=l(h,v,p,n.stepped);g[r]=e[r],o.push(g)}return o.length===1?o[0]:o}pathSegment(e,r,n){return Gc(this)(e,this,r,n)}path(e,r,n){let a=this.segments,i=Gc(this),s=this._loop;r=r||0,n=n||this.points.length-r;for(let o of a)s&=i(e,this,o,{start:r,end:r+n-1});return!!s}draw(e,r,n,a){let i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),mL(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};Oe(On,"id","line"),Oe(On,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Oe(On,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Oe(On,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});pa=class extends Sr{constructor(r){super();Oe(this,"parsed");Oe(this,"skip");Oe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){let i=this.options,{x:s,y:o}=this.getProps(["x","y"],a);return Math.pow(r-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return pp(this,r,"x",n)}inYRange(r,n){return pp(this,r,"y",n)}getCenterPoint(r){let{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);let a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){let a=this.options;this.skip||a.radius<.1||!zr(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,Yo(r,a,this.x,this.y))}getRange(){let r=this.options||{};return r.radius+r.hitRadius}};Oe(pa,"id","point"),Oe(pa,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Oe(pa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});ma=class extends Sr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:s}=xL(this),o=wL(s.radius)?Za:EL;e.save(),(s.w!==i.w||s.h!==i.h)&&(e.beginPath(),o(e,Rc(s,r,i)),e.clip(),o(e,Rc(i,-r,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,Rc(i,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,r,n){return Lc(this,e,r,n)}inXRange(e,r){return Lc(this,e,null,r)}inYRange(e,r){return Lc(this,null,e,r)}getCenterPoint(e){let{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};Oe(ma,"id","bar"),Oe(ma,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Oe(ma,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});mp=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},_L=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,dl=class extends Sr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},r=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,a)=>e.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){let{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,a=Ot(n.font),i=a.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=mp(n,i),u,c;r.font=a.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(s,i,o,l)+10):(c=this.maxHeight,u=this._fitCols(s,a,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,a){let{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=a+o,f=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((v,p)=>{let g=n+r/2+i.measureText(v.text).width;(p===0||u[u.length-1]+g+2*o>s)&&(f+=c,u[u.length-(p>0?0:1)]=0,h+=c,d++),l[p]={left:0,top:h,row:d,width:g,height:a},u[u.length-1]+=g+o}),f}_fitCols(e,r,n,a){let{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=s-e,f=o,d=0,h=0,v=0,p=0;return this.legendItems.forEach((g,m)=>{let{itemWidth:y,itemHeight:b}=SL(n,r,i,g,a);m>0&&h+b+2*o>c&&(f+=d+o,u.push({width:d,height:h}),v+=d+o,p++,d=h=0),l[m]={left:v,top:h,col:p,width:y,height:b},d=Math.max(d,y),h+=b+o}),f+=d,u.push({width:d,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,s=ha(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=Yt(n,this.left+a,this.right-this.lineWidths[o]);for(let u of r)o!==u.row&&(o=u.row,l=Yt(n,this.left+a,this.right-this.lineWidths[o])),u.top+=this.top+e+a,u.left=s.leftForLtr(s.x(l),u.width),l+=u.width+a}else{let o=0,l=Yt(n,this.top+e+a,this.bottom-this.columnSizes[o].height);for(let u of r)u.col!==o&&(o=u.col,l=Yt(n,this.top+e+a,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+a,u.left=s.leftForLtr(s.x(u.left),u.width),l+=u.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;jo(e,this),this._draw(),Ko(e)}}_draw(){let{options:e,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:s}=e,o=Tt.color,l=ha(e.rtl,this.left,this.width),u=Ot(s.font),{padding:c}=s,f=u.size,d=f/2,h;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=u.string;let{boxWidth:v,boxHeight:p,itemHeight:g}=mp(s,f),m=function(S,w,T){if(isNaN(v)||v<=0||isNaN(p)||p<0)return;a.save();let k=je(T.lineWidth,1);if(a.fillStyle=je(T.fillStyle,o),a.lineCap=je(T.lineCap,"butt"),a.lineDashOffset=je(T.lineDashOffset,0),a.lineJoin=je(T.lineJoin,"miter"),a.lineWidth=k,a.strokeStyle=je(T.strokeStyle,o),a.setLineDash(je(T.lineDash,[])),s.usePointStyle){let P={radius:p*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:k},A=l.xPlus(S,v/2),C=w+d;pc(a,P,A,C,s.pointStyleWidth&&v)}else{let P=w+Math.max((f-p)/2,0),A=l.leftForLtr(S,v),C=Ln(T.borderRadius);a.beginPath(),Object.values(C).some(_=>_!==0)?Za(a,{x:A,y:P,w:v,h:p,radius:C}):a.rect(A,P,v,p),a.fill(),k!==0&&a.stroke()}a.restore()},y=function(S,w,T){Dn(a,T.text,S,w+g/2,u,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},b=this.isHorizontal(),x=this._computeTitleHeight();b?h={x:Yt(i,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:h={x:this.left+c,y:Yt(i,this.top+x+c,this.bottom-r[0].height),line:0},Sc(this.ctx,e.textDirection);let E=g+c;this.legendItems.forEach((S,w)=>{a.strokeStyle=S.fontColor,a.fillStyle=S.fontColor;let T=a.measureText(S.text).width,k=l.textAlign(S.textAlign||(S.textAlign=s.textAlign)),P=v+d+T,A=h.x,C=h.y;l.setWidth(this.width),b?w>0&&A+P+c>this.right&&(C=h.y+=E,h.line++,A=h.x=Yt(i,this.left+c,this.right-n[h.line])):w>0&&C+E>this.bottom&&(A=h.x=A+r[h.line].width+c,h.line++,C=h.y=Yt(i,this.top+x+c,this.bottom-r[h.line].height));let _=l.x(A);if(m(_,C,S),A=Sg(k,A+v+d,b?A+P:this.right,e.rtl),y(l.x(A),C,S),b)h.x+=P+c;else if(typeof S.text!="string"){let R=u.lineHeight;h.y+=Up(S,R)+c}else h.y+=E}),Cc(this.ctx,e.textDirection)}drawTitle(){let e=this.options,r=e.title,n=Ot(r.font),a=jt(r.padding);if(!r.display)return;let i=ha(e.rtl,this.left,this.width),s=this.ctx,o=r.position,l=n.size/2,u=a.top+l,c,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,f=Yt(e.align,f,this.right-d);else{let v=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);c=u+Yt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}let h=Yt(o,f,f+d);s.textAlign=i.textAlign(Go(o)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,Dn(s,r.text,h,c,n)}_computeTitleHeight(){let e=this.options.title,r=Ot(e.font),n=jt(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,a,i;if(An(e,this.left,this.right)&&An(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],An(e,a.left,a.left+a.width)&&An(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(e){let r=this.options;if(!kL(e.type,r))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let a=this._hoveredItem,i=_L(a,n);a&&!i&&ft(r.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&ft(r.onHover,[e,n,this],this)}else n&&ft(r.onClick,[e,n,this],this)}};$p={id:"legend",_element:dl,start(t,e,r){let n=t.legend=new dl({ctx:t.ctx,options:r,chart:t});_r.configure(t,n,r),_r.addBox(t,n)},stop(t){_r.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){let n=t.legend;_r.configure(t,n,r),n.options=r},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){let n=e.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),e.hidden=!0):(a.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:s,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{let u=l.controller.getStyle(r?0:void 0),c=jt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:s&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},hl=class extends Sr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;let a=_t(n.text)?n.text.length:1;this._padding=jt(n.padding);let i=a*Ot(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:r,left:n,bottom:a,right:i,options:s}=this,o=s.align,l=0,u,c,f;return this.isHorizontal()?(c=Yt(o,n,i),f=r+e,u=i-n):(s.position==="left"?(c=n+e,f=Yt(o,a,r),l=Pt*-.5):(c=i-e,f=Yt(o,r,a),l=Pt*.5),u=a-r),{titleX:c,titleY:f,maxWidth:u,rotation:l}}draw(){let e=this.ctx,r=this.options;if(!r.display)return;let n=Ot(r.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(i);Dn(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:u,textAlign:Go(r.align),textBaseline:"middle",translation:[s,o]})}};Yp={id:"title",_element:hl,start(t,e,r){AL(t,r)},stop(t){let e=t.titleBlock;_r.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){let n=t.titleBlock;_r.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},os={average(t){if(!t.length)return!1;let e,r,n=new Set,a=0,i=0;for(e=0,r=t.length;e<r;++e){let o=t[e].element;if(o&&o.hasValue()){let l=o.tooltipPosition();n.add(l.x),a+=l.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,a=Number.POSITIVE_INFINITY,i,s,o;for(i=0,s=t.length;i<s;++i){let l=t[i].element;if(l&&l.hasValue()){let u=l.getCenterPoint(),c=Fo(e,u);c<a&&(a=c,o=l)}}if(o){let l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};jp={beforeTitle:Vr,title(t){if(t.length>0){let e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Vr,beforeBody:Vr,beforeLabel:Vr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let r=t.formattedValue;return ct(r)||(e+=r),e},labelColor(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Vr,afterBody:Vr,beforeFooter:Vr,footer:Vr,afterFooter:Vr};ls=class extends Sr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new ul(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=BL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){let{callbacks:n}=r,a=ur(n,"beforeTitle",this,e),i=ur(n,"title",this,e),s=ur(n,"afterTitle",this,e),o=[];return o=Wr(o,cn(a)),o=Wr(o,cn(i)),o=Wr(o,cn(s)),o}getBeforeBody(e,r){return wp(ur(r.callbacks,"beforeBody",this,e))}getBody(e,r){let{callbacks:n}=r,a=[];return at(e,i=>{let s={before:[],lines:[],after:[]},o=Ep(n,i);Wr(s.before,cn(ur(o,"beforeLabel",this,i))),Wr(s.lines,ur(o,"label",this,i)),Wr(s.after,cn(ur(o,"afterLabel",this,i))),a.push(s)}),a}getAfterBody(e,r){return wp(ur(r.callbacks,"afterBody",this,e))}getFooter(e,r){let{callbacks:n}=r,a=ur(n,"beforeFooter",this,e),i=ur(n,"footer",this,e),s=ur(n,"afterFooter",this,e),o=[];return o=Wr(o,cn(a)),o=Wr(o,cn(i)),o=Wr(o,cn(s)),o}_createItems(e){let r=this._active,n=this.chart.data,a=[],i=[],s=[],o=[],l,u;for(l=0,u=r.length;l<u;++l)o.push(PL(this.chart,r[l]));return e.filter&&(o=o.filter((c,f,d)=>e.filter(c,f,d,n))),e.itemSort&&(o=o.sort((c,f)=>e.itemSort(c,f,n))),at(o,c=>{let f=Ep(e.callbacks,c);a.push(ur(f,"labelColor",this,c)),i.push(ur(f,"labelPointStyle",this,c)),s.push(ur(f,"labelTextColor",this,c))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=o,o}update(e,r){let n=this.options.setContext(this.getContext()),a=this._active,i,s=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{let o=os[n.position].call(this,a,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);let l=this._size=yp(this,n),u=Object.assign({},o,l),c=bp(this.chart,n,u),f=xp(n,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,a){let i=this.getCaretPosition(e,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){let{xAlign:a,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:f}=Ln(o),{x:d,y:h}=e,{width:v,height:p}=r,g,m,y,b,x,E;return i==="center"?(x=h+p/2,a==="left"?(g=d,m=g-s,b=x+s,E=x-s):(g=d+v,m=g+s,b=x-s,E=x+s),y=g):(a==="left"?m=d+Math.max(l,c)+s:a==="right"?m=d+v-Math.max(u,f)-s:m=this.caretX,i==="top"?(b=h,x=b-s,g=m-s,y=m+s):(b=h+p,x=b+s,g=m+s,y=m-s),E=b),{x1:g,x2:m,x3:y,y1:b,y2:x,y3:E}}drawTitle(e,r,n){let a=this.title,i=a.length,s,o,l;if(i){let u=ha(n.rtl,this.x,this.width);for(e.x=nl(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",s=Ot(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,l=0;l<i;++l)r.fillText(a[l],u.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,l+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,a,i){let s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=i,c=Ot(i.bodyFont),f=nl(this,"left",i),d=a.x(f),h=l<c.lineHeight?(c.lineHeight-l)/2:0,v=r.y+h;if(i.usePointStyle){let p={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=a.leftForLtr(d,u)+u/2,m=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Yo(e,p,g,m),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Yo(e,p,g,m)}else{e.lineWidth=Qe(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;let p=a.leftForLtr(d,u),g=a.leftForLtr(a.xPlus(d,1),u-2),m=Ln(s.borderRadius);Object.values(m).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Za(e,{x:p,y:v,w:u,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Za(e,{x:g,y:v+1,w:u-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,v,u,l),e.strokeRect(p,v,u,l),e.fillStyle=s.backgroundColor,e.fillRect(g,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){let{body:a}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:c}=n,f=Ot(n.bodyFont),d=f.lineHeight,h=0,v=ha(n.rtl,this.x,this.width),p=function(T){r.fillText(T,v.x(e.x+h),e.y+d/2),e.y+=d+i},g=v.textAlign(s),m,y,b,x,E,S,w;for(r.textAlign=s,r.textBaseline="middle",r.font=f.string,e.x=nl(this,g,n),r.fillStyle=n.bodyColor,at(this.beforeBody,p),h=o&&g!=="right"?s==="center"?u/2+c:u+2+c:0,x=0,S=a.length;x<S;++x){for(m=a[x],y=this.labelTextColors[x],r.fillStyle=y,at(m.before,p),b=m.lines,o&&b.length&&(this._drawColorBox(r,e,x,v,n),d=Math.max(f.lineHeight,l)),E=0,w=b.length;E<w;++E)p(b[E]),d=f.lineHeight;at(m.after,p)}h=0,d=f.lineHeight,at(this.afterBody,p),e.y-=i}drawFooter(e,r,n){let a=this.footer,i=a.length,s,o;if(i){let l=ha(n.rtl,this.x,this.width);for(e.x=nl(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",s=Ot(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,o=0;o<i;++o)r.fillText(a[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,a){let{xAlign:i,yAlign:s}=this,{x:o,y:l}=e,{width:u,height:c}=n,{topLeft:f,topRight:d,bottomLeft:h,bottomRight:v}=Ln(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(o+f,l),s==="top"&&this.drawCaret(e,r,n,a),r.lineTo(o+u-d,l),r.quadraticCurveTo(o+u,l,o+u,l+d),s==="center"&&i==="right"&&this.drawCaret(e,r,n,a),r.lineTo(o+u,l+c-v),r.quadraticCurveTo(o+u,l+c,o+u-v,l+c),s==="bottom"&&this.drawCaret(e,r,n,a),r.lineTo(o+h,l+c),r.quadraticCurveTo(o,l+c,o,l+c-h),s==="center"&&i==="left"&&this.drawCaret(e,r,n,a),r.lineTo(o,l+f),r.quadraticCurveTo(o,l,o+f,l),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){let r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){let s=os[e.position].call(this,this._active,this._eventPosition);if(!s)return;let o=this._size=yp(this,e),l=Object.assign({},s,this._size),u=bp(r,e,l),c=xp(e,l,u,r);(a._to!==c.x||i._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){let r=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(r);let a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let s=jt(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,a,r),Sc(e,r.textDirection),i.y+=s.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),Cc(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){let n=this._active,a=e.map(({datasetIndex:o,index:l})=>{let u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),i=!Ki(n,a),s=this._positionChanged(a,r);(i||s)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let a=this.options,i=this._active||[],s=this._getActiveElements(e,i,r,n),o=this._positionChanged(s,e),l=r||!Ki(s,i)||o;return l&&(this._active=s,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,a){let i=this.options;if(e.type==="mouseout")return[];if(!a)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);let s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,r){let{caretX:n,caretY:a,options:i}=this,s=os[i.position].call(this,e,r);return s!==!1&&(n!==s.x||a!==s.y)}};Oe(ls,"positioners",os);Kp={id:"tooltip",_element:ls,positioners:os,afterInit(t,e,r){r&&(t.tooltip=new ls({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",ko(Hi({},r),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){let r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},IL=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);FL=(t,e)=>t===null?null:Er(Math.round(t),0,e);ti=class extends ya{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let r=this._addedLabels;if(r.length){let n=this.getLabels();for(let{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(ct(e))return null;let n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:qL(n,e,je(r,e),this._addedLabels),FL(r,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){let e=this.min,r=this.max,n=this.options.offset,a=[],i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)a.push({value:s});return a}getLabelForValue(e){return _p.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};Oe(ti,"id","category"),Oe(ti,"defaults",{ticks:{callback:_p}});ai=class extends ya{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return ct(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds(),{min:a,max:i}=this,s=l=>a=r?a:l,o=l=>i=n?i:l;if(e){let l=fa(a),u=fa(i);l<0&&u<0?o(0):l>0&&u>0&&s(0)}if(a===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||s(a-l)}this.min=a,this.max=i}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:r,stepSize:n}=e,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,r=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let a={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,s=NL(a,i);return e.bounds==="ticks"&&oc(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let a=(n-r)/Math.max(e.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Uo(e,this.chart.options.locale,this.options.ticks.format)}},ri=class extends ai{determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=Ft(e)?e:0,this.max=Ft(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),r=e?this.width:this.height,n=on(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};Oe(ri,"id","linear"),Oe(ri,"defaults",{ticks:{callback:Ji.formatters.numeric}});cs=t=>Math.floor(sn(t)),ga=(t,e)=>Math.pow(10,cs(t)+e);al=class extends ya{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){let n=ai.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return Ft(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=Ft(e)?Math.max(0,e):null,this.max=Ft(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ft(this._userMin)&&(this.min=e===ga(this.min,0)?ga(this.min,-1):ga(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),n=this.min,a=this.max,i=o=>n=e?n:o,s=o=>a=r?a:o;n===a&&(n<=0?(i(1),s(10)):(i(ga(n,-1)),s(ga(a,1)))),n<=0&&i(ga(a,-1)),a<=0&&s(ga(n,1)),this.min=n,this.max=a}buildTicks(){let e=this.options,r={min:this._userMin,max:this._userMax},n=VL(r,this);return e.bounds==="ticks"&&oc(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Uo(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=sn(e),this._valueRange=sn(this.max)-sn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(sn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}};Oe(al,"id","logarithmic"),Oe(al,"defaults",{ticks:{callback:Ji.formatters.logarithmic,major:{enabled:!0}}});Qa=class extends ai{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=jt(Uc(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!1);this.min=Ft(e)&&!isNaN(e)?e:0,this.max=Ft(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Uc(this.options))}generateTickLabels(e){ai.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{let a=ft(this.options.pointLabels.callback,[r,n],this);return a||a===0?a:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?HL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,a){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,a))}getIndexAngle(e){let r=gr/(this._pointLabels.length||1),n=this.options.startAngle||0;return wr(e*r+on(n))}getDistanceFromCenterForValue(e){if(ct(e))return NaN;let r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(ct(e))return NaN;let r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){let r=this._pointLabels||[];if(e>=0&&e<r.length){let n=r[e];return eR(this.getContext(),e,n)}}getPointPosition(e,r,n=0){let a=this.getIndexAngle(e)-or+n;return{x:Math.cos(a)*r+this.xCenter,y:Math.sin(a)*r+this.yCenter,angle:a}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:r,top:n,right:a,bottom:i}=this._pointLabelItems[e];return{left:r,top:n,right:a,bottom:i}}drawBackground(){let{backgroundColor:e,grid:{circular:r}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),Xp(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,r=this.options,{angleLines:n,grid:a,border:i}=r,s=this._pointLabels.length,o,l,u;if(r.pointLabels.display&&QL(this,s),a.display&&this.ticks.forEach((c,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);let d=this.getContext(f),h=a.setContext(d),v=i.setContext(d);JL(this,h,l,s,v)}}),n.display){for(e.save(),o=s-1;o>=0;o--){let c=n.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:d}=c;!d||!f||(e.lineWidth=d,e.strokeStyle=f,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),u=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;let a=this.getIndexAngle(0),i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!r.reverse)return;let u=n.setContext(this.getContext(l)),c=Ot(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,s=e.measureText(o.label).width,e.fillStyle=u.backdropColor;let f=jt(u.backdropPadding);e.fillRect(-s/2-f.left,-i-c.size/2-f.top,s+f.width,c.size+f.height)}Dn(e,o.label,0,-i,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}};Oe(Qa,"id","radialLinear"),Oe(Qa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ji.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Oe(Qa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Oe(Qa,"descriptors",{angleLines:{_fallback:"grid"}});vl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cr=Object.keys(vl);ni=class extends ya{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){let n=e.time||(e.time={}),a=this._adapter=new iD._date(e.adapters.date);a.init(r),Ka(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Pp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,r=this._adapter,n=e.time.unit||"day",{min:a,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function l(u){!s&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!o&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!s||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),a=Ft(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=Ft(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){let e=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){let e=this.options,r=e.time,n=e.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);let i=this.min,s=this.max,o=bg(a,i,s);return this._unit=r.unit||(n.autoSkip?Mp(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):tR(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:rR(this._unit),this.initOffsets(a),e.reverse&&o.reverse(),Lp(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?r=1-a:r=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);let s=e.length<3?.5:.25;r=Er(r,0,s),n=Er(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){let e=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,s=i.unit||Mp(i.minUnit,r,n,this._getLabelCapacity(r)),o=je(a.ticks.stepSize,1),l=s==="week"?i.isoWeekday:!1,u=Qi(l)||l===!0,c={},f=r,d,h;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":s),e.diff(n,r,s)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+s);let v=a.ticks.source==="data"&&this.getDataTimestamps();for(d=f,h=0;d<n;d=+e.add(d,o,s),h++)Dp(c,d,v);return(d===n||a.bounds==="ticks"||h===1)&&Dp(c,d,v),Object.keys(c).sort(Ap).map(p=>+p)}getLabelForValue(e){let r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){let a=this.options.time.displayFormats,i=this._unit,s=r||a[i];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,a){let i=this.options,s=i.ticks.callback;if(s)return ft(s,[e,r,n],this);let o=i.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&o[l],f=u&&o[u],d=n[r],h=u&&f&&d&&d.major;return this._adapter.format(e,a||(h?f:c))}generateTickLabels(e){let r,n,a;for(r=0,n=e.length;r<n;++r)a=e[r],a.label=this._tickFormatFunction(a.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let r=this.options.ticks,n=this.ctx.measureText(e).width,a=on(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),s=Math.sin(a),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){let r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Lp(this,[e],this._majorUnit),a),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;let a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)e=e.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],r,n;if(e.length)return e;let a=this.getLabels();for(r=0,n=a.length;r<n;++r)e.push(Pp(this,a[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Eg(e.sort(Ap))}};Oe(ni,"id","time"),Oe(ni,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});sl=class extends ni{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=il(r,this.min),this._tableRange=il(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:r,max:n}=this,a=[],i=[],s,o,l,u,c;for(s=0,o=e.length;s<o;++s)u=e[s],u>=r&&u<=n&&a.push(u);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,o=a.length;s<o;++s)c=a[s+1],l=a[s-1],u=a[s],Math.round((c+l)/2)!==u&&i.push({time:u,pos:s/(o-1)});return i}_generate(){let e=this.min,r=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(il(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return il(this._table,n*this._tableRange+this._minPos,!0)}};Oe(sl,"id","timeseries"),Oe(sl,"defaults",ni.defaults)});function _d(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function aR(t){if(Array.isArray(t))return t}function iR(t){if(Array.isArray(t))return _d(t)}function Xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k0(n.key),n)}}function Zn(t,e,r){return e&&sR(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hr(t,e){var r=typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Hd(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return s=l.done,l},e:function(l){o=!0,i=l},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function T0(t,e,r){return(e=k0(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oR(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lR(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function uR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function It(t,e){return aR(t)||lR(t,e)||Hd(t,e)||uR()}function Nl(t){return iR(t)||oR(t)||Hd(t)||cR()}function fR(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function k0(t){var e=fR(t,"string");return typeof e=="symbol"?e:e+""}function Vt(t){"@babel/helpers - typeof";return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function Hd(t,e){if(t){if(typeof t=="string")return _d(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_d(t,e):void 0}}function qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fs(){if(em)return $c;em=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return $c=t,$c}function OR(){if(tm)return Yc;tm=1;var t=typeof gl=="object"&&gl&&gl.Object===Object&&gl;return Yc=t,Yc}function eu(){if(rm)return jc;rm=1;var t=OR(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return jc=r,jc}function BR(){if(nm)return Kc;nm=1;var t=eu(),e=function(){return t.Date.now()};return Kc=e,Kc}function IR(){if(am)return Xc;am=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Xc=e,Xc}function qR(){if(im)return Zc;im=1;var t=IR(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Zc=r,Zc}function $d(){if(sm)return Qc;sm=1;var t=eu(),e=t.Symbol;return Qc=e,Qc}function FR(){if(om)return Jc;om=1;var t=$d(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),l=s[a];try{s[a]=void 0;var u=!0}catch(f){}var c=n.call(s);return u&&(o?s[a]=l:delete s[a]),c}return Jc=i,Jc}function NR(){if(lm)return ef;lm=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return ef=r,ef}function I0(){if(um)return tf;um=1;var t=$d(),e=FR(),r=NR(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return tf=s,tf}function zR(){if(cm)return rf;cm=1;function t(e){return e!=null&&typeof e=="object"}return rf=t,rf}function Ns(){if(fm)return nf;fm=1;var t=I0(),e=zR(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return nf=n,nf}function VR(){if(dm)return af;dm=1;var t=qR(),e=Fs(),r=Ns(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):a.test(u)?n:+u}return af=l,af}function WR(){if(hm)return sf;hm=1;var t=Fs(),e=BR(),r=VR(),n="Expected a function",a=Math.max,i=Math.min;function s(o,l,u){var c,f,d,h,v,p,g=0,m=!1,y=!1,b=!0;if(typeof o!="function")throw new TypeError(n);l=r(l)||0,t(u)&&(m=!!u.leading,y="maxWait"in u,d=y?a(r(u.maxWait)||0,l):d,b="trailing"in u?!!u.trailing:b);function x(_){var R=c,L=f;return c=f=void 0,g=_,h=o.apply(L,R),h}function E(_){return g=_,v=setTimeout(T,l),m?x(_):h}function S(_){var R=_-p,L=_-g,O=l-R;return y?i(O,d-L):O}function w(_){var R=_-p,L=_-g;return p===void 0||R>=l||R<0||y&&L>=d}function T(){var _=e();if(w(_))return k(_);v=setTimeout(T,S(_))}function k(_){return v=void 0,b&&c?x(_):(c=f=void 0,h)}function P(){v!==void 0&&clearTimeout(v),g=0,c=p=f=v=void 0}function A(){return v===void 0?h:k(e())}function C(){var _=e(),R=w(_);if(c=arguments,f=this,p=_,R){if(v===void 0)return E(p);if(y)return clearTimeout(v),v=setTimeout(T,l),x(p)}return v===void 0&&(v=setTimeout(T,l)),h}return C.cancel=P,C.flush=A,C}return sf=s,sf}function YR(t,e,r,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(t-r)-Math.sin(i)*(e-n)+r,o=Math.sin(i)*(t-r)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}function KR(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=YR(t.x,t.y,n,a,r),l=jR(o.x,o.y,n,a,i,s);return{x:l.x,y:l.y}}function sO(){return ym||(ym=1,function(t,e){(function(){var r,n,a,i,s,o,l,u,c,f,d,h,v,p,g;a=Math.floor,f=Math.min,n=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,b,x,E){var S;if(b==null&&(b=0),E==null&&(E=n),b<0)throw new Error("lo must be non-negative");for(x==null&&(x=m.length);b<x;)S=a((b+x)/2),E(y,m[S])<0?x=S:b=S+1;return[].splice.apply(m,[b,b-b].concat(y)),y},o=function(m,y,b){return b==null&&(b=n),m.push(y),p(m,0,m.length-1,b)},s=function(m,y){var b,x;return y==null&&(y=n),b=m.pop(),m.length?(x=m[0],m[0]=b,g(m,0,y)):x=b,x},u=function(m,y,b){var x;return b==null&&(b=n),x=m[0],m[0]=y,g(m,0,b),x},l=function(m,y,b){var x;return b==null&&(b=n),m.length&&b(m[0],y)<0&&(x=[m[0],y],y=x[0],m[0]=x[1],g(m,0,b)),y},i=function(m,y){var b,x,E,S,w,T;for(y==null&&(y=n),S=function(){T=[];for(var k=0,P=a(m.length/2);0<=P?k<P:k>P;0<=P?k++:k--)T.push(k);return T}.apply(this).reverse(),w=[],x=0,E=S.length;x<E;x++)b=S[x],w.push(g(m,b,y));return w},v=function(m,y,b){var x;if(b==null&&(b=n),x=m.indexOf(y),x!==-1)return p(m,0,x,b),g(m,x,b)},d=function(m,y,b){var x,E,S,w,T;if(b==null&&(b=n),E=m.slice(0,y),!E.length)return E;for(i(E,b),T=m.slice(y),S=0,w=T.length;S<w;S++)x=T[S],l(E,x,b);return E.sort(b).reverse()},h=function(m,y,b){var x,E,S,w,T,k,P,A,C;if(b==null&&(b=n),y*10<=m.length){if(S=m.slice(0,y).sort(b),!S.length)return S;for(E=S[S.length-1],P=m.slice(y),w=0,k=P.length;w<k;w++)x=P[w],b(x,E)<0&&(c(S,x,0,null,b),S.pop(),E=S[S.length-1]);return S}for(i(m,b),C=[],T=0,A=f(y,m.length);0<=A?T<A:T>A;0<=A?++T:--T)C.push(s(m,b));return C},p=function(m,y,b,x){var E,S,w;for(x==null&&(x=n),E=m[b];b>y;){if(w=b-1>>1,S=m[w],x(E,S)<0){m[b]=S,b=w;continue}break}return m[b]=E},g=function(m,y,b){var x,E,S,w,T;for(b==null&&(b=n),E=m.length,T=y,S=m[y],x=2*y+1;x<E;)w=x+1,w<E&&!(b(m[x],m[w])<0)&&(x=w),m[y]=m[x],y=x,x=2*y+1;return m[y]=S,p(m,T,y,b)},r=function(){m.push=o,m.pop=s,m.replace=u,m.pushpop=l,m.heapify=i,m.updateItem=v,m.nlargest=d,m.nsmallest=h;function m(y){this.cmp=y!=null?y:n,this.nodes=[]}return m.prototype.push=function(y){return o(this.nodes,y,this.cmp)},m.prototype.pop=function(){return s(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return i(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return v(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return t.exports=y()}(this,function(){return r})}).call(iO)}(Al)),Al.exports}function oO(){return bm||(bm=1,lf=sO()),lf}function RO(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(T,k){return{x:T.x+k.x,y:T.y+k.y}},n=function(T,k){return{x:T.x-k.x,y:T.y-k.y}},a=function(T,k){return{x:T.x*k,y:T.y*k}},i=function(T,k){return T.x*k.y-T.y*k.x},s=function(T){var k=LO(T.x,T.y);return k===0?{x:0,y:0}:{x:T.x/k,y:T.y/k}},o=function(T){for(var k=0,P=0;P<T.length;P++){var A=T[P],C=T[(P+1)%T.length];k+=A.x*C.y-C.x*A.y}return k/2},l=function(T,k,P,A){var C=n(k,T),_=n(A,P),R=i(C,_);if(Math.abs(R)<1e-9)return r(T,a(C,.5));var L=i(n(P,T),_)/R;return r(T,a(C,L))},u=t.map(function(w){return{x:w.x,y:w.y}});o(u)<0&&u.reverse();for(var c=u.length,f=[],d=0;d<c;d++){var h=u[d],v=u[(d+1)%c],p=n(v,h),g=s({x:p.y,y:-p.x});f.push(g)}for(var m=f.map(function(w,T){var k=r(u[T],a(w,e)),P=r(u[(T+1)%c],a(w,e));return{p1:k,p2:P}}),y=[],b=0;b<c;b++){var x=m[(b-1+c)%c],E=m[b],S=l(x.p1,x.p2,E.p1,E.p2);y.push(S)}return y}function OO(t,e,r,n,a,i){var s=HO(t,e,r,n,a),o=RO(s,i),l=ar();return o.forEach(function(u){return $0(l,u.x,u.y)}),l}function df(t,e){function r(f){for(var d=[],h=0;h<f.length;h++){var v=f[h],p=f[(h+1)%f.length],g={x:p.x-v.x,y:p.y-v.y},m={x:-g.y,y:g.x},y=Math.sqrt(m.x*m.x+m.y*m.y);d.push({x:m.x/y,y:m.y/y})}return d}function n(f,d){var h=1/0,v=-1/0,p=hr(f),g;try{for(p.s();!(g=p.n()).done;){var m=g.value,y=m.x*d.x+m.y*d.y;h=Math.min(h,y),v=Math.max(v,y)}}catch(b){p.e(b)}finally{p.f()}return{min:h,max:v}}function a(f,d){return!(f.max<d.min||d.max<f.min)}var i=[].concat(Nl(r(t)),Nl(r(e))),s=hr(i),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n(t,l),c=n(e,l);if(!a(u,c))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}function nu(t,e,r,n,a,i){var s;return kt(t)?s=t:s=wi[t]||wi.euclidean,e===0&&kt(t)?s(a,i):s(e,r,n,a,i)}function au(){if(qm)return vf;qm=1;var t=Array.isArray;return vf=t,vf}function IB(){if(Fm)return gf;Fm=1;var t=au(),e=Ns(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return gf=a,gf}function qB(){if(Nm)return pf;Nm=1;var t=I0(),e=Fs(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==n||l==a||l==r||l==i}return pf=s,pf}function FB(){if(zm)return mf;zm=1;var t=eu(),e=t["__core-js_shared__"];return mf=e,mf}function NB(){if(Vm)return yf;Vm=1;var t=FB(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return yf=r,yf}function zB(){if(Wm)return bf;Wm=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch(a){}try{return n+""}catch(a){}}return""}return bf=r,bf}function VB(){if(Hm)return xf;Hm=1;var t=qB(),e=NB(),r=Fs(),n=zB(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||e(d))return!1;var h=t(d)?c:i;return h.test(n(d))}return xf=f,xf}function WB(){if(Gm)return wf;Gm=1;function t(e,r){return e==null?void 0:e[r]}return wf=t,wf}function th(){if(Um)return Ef;Um=1;var t=VB(),e=WB();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Ef=r,Ef}function iu(){if($m)return _f;$m=1;var t=th(),e=t(Object,"create");return _f=e,_f}function HB(){if(Ym)return Sf;Ym=1;var t=iu();function e(){this.__data__=t?t(null):{},this.size=0}return Sf=e,Sf}function GB(){if(jm)return Cf;jm=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Cf=t,Cf}function UB(){if(Km)return Tf;Km=1;var t=iu(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Tf=a,Tf}function $B(){if(Xm)return kf;Xm=1;var t=iu(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return kf=n,kf}function YB(){if(Zm)return Af;Zm=1;var t=iu(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Af=r,Af}function jB(){if(Qm)return Pf;Qm=1;var t=HB(),e=GB(),r=UB(),n=$B(),a=YB();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Pf=i,Pf}function KB(){if(Jm)return Mf;Jm=1;function t(){this.__data__=[],this.size=0}return Mf=t,Mf}function ob(){if(ey)return Df;ey=1;function t(e,r){return e===r||e!==e&&r!==r}return Df=t,Df}function su(){if(ty)return Lf;ty=1;var t=ob();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Lf=e,Lf}function XB(){if(ry)return Rf;ry=1;var t=su(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return Rf=n,Rf}function ZB(){if(ny)return Of;ny=1;var t=su();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Of=e,Of}function QB(){if(ay)return Bf;ay=1;var t=su();function e(r){return t(this.__data__,r)>-1}return Bf=e,Bf}function JB(){if(iy)return If;iy=1;var t=su();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return If=e,If}function eI(){if(sy)return qf;sy=1;var t=KB(),e=XB(),r=ZB(),n=QB(),a=JB();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,qf=i,qf}function tI(){if(oy)return Ff;oy=1;var t=th(),e=eu(),r=t(e,"Map");return Ff=r,Ff}function rI(){if(ly)return Nf;ly=1;var t=jB(),e=eI(),r=tI();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Nf=n,Nf}function nI(){if(uy)return zf;uy=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return zf=t,zf}function ou(){if(cy)return Vf;cy=1;var t=nI();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Vf=e,Vf}function aI(){if(fy)return Wf;fy=1;var t=ou();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Wf=e,Wf}function iI(){if(dy)return Hf;dy=1;var t=ou();function e(r){return t(this,r).get(r)}return Hf=e,Hf}function sI(){if(hy)return Gf;hy=1;var t=ou();function e(r){return t(this,r).has(r)}return Gf=e,Gf}function oI(){if(vy)return Uf;vy=1;var t=ou();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Uf=e,Uf}function lI(){if(gy)return $f;gy=1;var t=rI(),e=aI(),r=iI(),n=sI(),a=oI();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,$f=i,$f}function uI(){if(py)return Yf;py=1;var t=lI(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],l=i.cache;if(l.has(o))return l.get(o);var u=n.apply(this,s);return i.cache=l.set(o,u)||l,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,Yf=r,Yf}function cI(){if(my)return jf;my=1;var t=uI(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return jf=r,jf}function lb(){if(yy)return Kf;yy=1;var t=cI(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,l,u){i.push(l?u.replace(r,"$1"):o||s)}),i});return Kf=n,Kf}function ub(){if(by)return Xf;by=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Xf=t,Xf}function fI(){if(xy)return Zf;xy=1;var t=$d(),e=ub(),r=au(),n=Ns(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Zf=s,Zf}function cb(){if(wy)return Qf;wy=1;var t=fI();function e(r){return r==null?"":t(r)}return Qf=e,Qf}function fb(){if(Ey)return Jf;Ey=1;var t=au(),e=IB(),r=lb(),n=cb();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return Jf=a,Jf}function rh(){if(_y)return ed;_y=1;var t=Ns();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ed=e,ed}function dI(){if(Sy)return td;Sy=1;var t=fb(),e=rh();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return td=r,td}function hI(){if(Cy)return rd;Cy=1;var t=dI();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return rd=e,rd}function pI(){if(Ty)return nd;Ty=1;var t=th(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch(n){}}();return nd=e,nd}function mI(){if(ky)return ad;ky=1;var t=pI();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return ad=e,ad}function yI(){if(Ay)return id;Ay=1;var t=mI(),e=ob(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var l=i[s];(!(n.call(i,s)&&e(l,o))||o===void 0&&!(s in i))&&t(i,s,o)}return id=a,id}function bI(){if(Py)return sd;Py=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a==null?t:a,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return sd=r,sd}function xI(){if(My)return od;My=1;var t=yI(),e=fb(),r=bI(),n=Fs(),a=rh();function i(s,o,l,u){if(!n(s))return s;o=e(o,s);for(var c=-1,f=o.length,d=f-1,h=s;h!=null&&++c<f;){var v=a(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=d){var g=h[v];p=u?u(g,v,h):void 0,p===void 0&&(p=n(g)?g:r(o[c+1])?[]:{})}t(h,v,p),h=h[v]}return s}return od=i,od}function wI(){if(Dy)return ld;Dy=1;var t=xI();function e(r,n,a){return r==null?r:t(r,n,a)}return ld=e,ld}function SI(){if(Ly)return ud;Ly=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return ud=t,ud}function CI(){if(Ry)return cd;Ry=1;var t=ub(),e=SI(),r=au(),n=Ns(),a=lb(),i=rh(),s=cb();function o(l){return r(l)?t(l,i):n(l)?[l]:e(a(s(l)))}return cd=o,cd}function ah(t,e,r,n){for(var a=[],i=new _i,s=t.cy(),o=s.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):o&&n(a,i,u)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),o&&n(a,i,c)}return t}function hb(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}function vb(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}function UI(t,e,r){vb(t,e,r),hb(t,e,r)}function fd(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}function si(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}function vs(){return!1}function El(){return!0}function uu(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cq,e=arguments.length>1?arguments[1]:void 0,r=0;r<zy.length;r++){var n=zy[r];this[n]=t[n]||Sb[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}function Pb(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function cu(t,e){return t=ka(t),function(n){return Pb(t,e,n)}}function fu(t,e){t=ka(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Pb(t,r,a)}}function hd(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function ih(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||hd(i,n);var l=o.source,u=o.target;return r(l)&&(!s||hd(l,r))&&(l===u||r(u)&&(!s||hd(u,r)))}}}function Wy(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&kt(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&dt(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var l=this[o],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),s&&d.emit(s)}return this}}function Ti(t){Hn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Hn[t.on]=Wy({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Hn[t.off]=Wy({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}function $y(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}function Yy(t){return function(r){var n=[],a=this._private.cy,i=t||{};Ae(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,l=0;l<o.length;l++){var u=o[l],c=u._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||d;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(u))}return this.spawn(n,!0)}}function jy(t){var e={codirected:!1};return t=Le({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var l=i[o],u=l._private,c=u.source,f=c._private.data.id,d=u.data.target,h=c._private.edges,v=0;v<h.length;v++){var p=h[v],g=p._private.data,m=g.target,y=g.source,b=m===d&&y===f,x=f===m&&d===y;(s.codirected&&b||!s.codirected&&(b||x))&&a.push(p)}return this.spawn(a,!0).filter(n)}}function wq(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,l=11,u=1/(l-1),c=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function h(P,A){return 1-3*A+3*P}function v(P,A){return 3*A-6*P}function p(P){return 3*P}function g(P,A,C){return((h(A,C)*P+v(A,C))*P+p(A))*P}function m(P,A,C){return 3*h(A,C)*P*P+2*v(A,C)*P+p(A)}function y(P,A){for(var C=0;C<a;++C){var _=m(A,t,r);if(_===0)return A;var R=g(A,t,r)-P;A-=R/_}return A}function b(){for(var P=0;P<l;++P)d[P]=g(P*u,t,r)}function x(P,A,C){var _,R,L=0;do R=A+(C-A)/2,_=g(R,t,r)-P,_>0?C=R:A=R;while(Math.abs(_)>s&&++L<o);return R}function E(P){for(var A=0,C=1,_=l-1;C!==_&&d[C]<=P;++C)A+=u;--C;var R=(P-d[C])/(d[C+1]-d[C]),L=A+R*u,O=m(L,t,r);return O>=i?y(P,L):O===0?L:x(P,A,A+u)}var S=!1;function w(){S=!0,(t!==e||r!==n)&&b()}var T=function(A){return S||w(),t===e&&r===n?A:A===0?0:A===1?1:g(E(A),e,n)};T.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var k="generateBezier("+[t,e,r,n]+")";return T.toString=function(){return k},T}function Ky(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Xy(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function oi(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=Xy(t,a),o=Xy(e,a);if(ue(s)&&ue(o))return Ky(i,s,o,r,n);if(dt(s)&&dt(o)){for(var l=[],u=0;u<o.length;u++){var c=s[u],f=o[u];if(c!=null&&f!=null){var d=Ky(i,c,f,r,n);l.push(d)}else l.push(f)}return l}}function _q(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,l=s.startTime,u=n?t:t.cy(),c=u.style();if(!s.easingImpl)if(o==null)s.easingImpl=Rl.linear;else{var f;if(Ae(o)){var d=c.parse("transition-timing-function",o);f=d.value}else f=o;var h,v;Ae(f)?(h=f,v=[]):(h=f[1],v=f.slice(2).map(function(F){return+F})),v.length>0?(h==="spring"&&v.push(s.duration),s.easingImpl=Rl[h].apply(null,v)):s.easingImpl=Rl[h]}var p=s.easingImpl,g;if(s.duration===0?g=1:g=(r-l)/s.duration,s.applying&&(g=s.progress),g<0?g=0:g>1&&(g=1),s.delay==null){var m=s.startPosition,y=s.position;if(y&&a&&!t.locked()){var b={};gs(m.x,y.x)&&(b.x=oi(m.x,y.x,g,p)),gs(m.y,y.y)&&(b.y=oi(m.y,y.y,g,p)),t.position(b)}var x=s.startPan,E=s.pan,S=i.pan,w=E!=null&&n;w&&(gs(x.x,E.x)&&(S.x=oi(x.x,E.x,g,p)),gs(x.y,E.y)&&(S.y=oi(x.y,E.y,g,p)),t.emit("pan"));var T=s.startZoom,k=s.zoom,P=k!=null&&n;P&&(gs(T,k)&&(i.zoom=As(i.minZoom,oi(T,k,g,p),i.maxZoom)),t.emit("zoom")),(w||P)&&t.emit("viewport");var A=s.style;if(A&&A.length>0&&a){for(var C=0;C<A.length;C++){var _=A[C],R=_.name,L=_,O=s.startStyle[R],D=c.properties[O.name],I=oi(O,L,g,p,D);c.overrideBypass(t,R,I)}t.emit("style")}}return s.progress=g,g}function gs(t,e){return t==null||e==null?!1:ue(t)&&ue(e)?!0:!!(t&&e)}function Sq(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Zy(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,h=d.animation.current,v=d.animation.queue,p=!1;if(h.length===0){var g=v.shift();g&&h.push(g)}for(var m=function(S){for(var w=S.length-1;w>=0;w--){var T=S[w];T()}S.splice(0,S.length)},y=h.length-1;y>=0;y--){var b=h[y],x=b._private;if(x.stopped){h.splice(y,1),x.hooked=!1,x.playing=!1,x.started=!1,m(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||Sq(c,b,t),_q(c,b,t,f),x.applying&&(x.applying=!1),m(x.frames),x.step!=null&&x.step(t),b.completed()&&(h.splice(y,1),x.hooked=!1,x.playing=!1,x.started=!1,m(x.completes)),p=!0)}return!f&&h.length===0&&v.length===0&&n.push(c),p}for(var i=!1,s=0;s<r.length;s++){var o=r[s],l=a(o);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}function Db(t){this.options=Le({},Lq,Rq,t)}function Lb(t){this.options=Le({},Oq,t)}function Rb(t){this.options=Le({},Bq,t)}function vu(t){this.options=Le({},Iq,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===s});return!o||!l});this.options.eles=this.options.eles.not(n)}function qb(t){this.options=Le({},Zq,t)}function lh(t){this.options=Le({},Qq,t)}function Fb(t){this.options=Le({},Jq,t)}function Nb(t){this.options=Le({},eF,t)}function zb(t){this.options=t,this.notifications=0}function Hb(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function ch(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(nF(t,e,r,n,a),{cx:Od,cy:Bd,radius:_a,startX:Vb,startY:Wb,stopX:Id,stopY:qd,startAngle:$r.ang+Math.PI/2*Ca,endAngle:Cr.ang-Math.PI/2*Ca,counterClockwise:Il})}function Gb(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}function iF(t,e,r){for(var n=function(u,c,f,d){return Gt(u,c,f,d)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}function BF(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function IF(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function g0(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function qF(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var l=i[o];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function FF(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}function GF(t,e,r,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,l=r+a/2;t.beginPath(),t.arc(o,l,s,0,Math.PI*2),t.closePath()}function p0(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.quadraticCurveTo(e+n,r,e+n,r+s),t.lineTo(e+n,r+a-s),t.quadraticCurveTo(e+n,r+a,e+n-s,r+a),t.lineTo(e+s,r+a),t.quadraticCurveTo(e,r+a,e,r+a-s),t.lineTo(e,r+s),t.quadraticCurveTo(e,r,e+s,r),t.closePath()}function m0(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function $F(t,e,r){var n=m0(t,t.VERTEX_SHADER,e),a=m0(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function YF(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function hh(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function jF(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function KF(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function XF(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function ZF(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function xa(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function ci(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function QF(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function JF(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function nx(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function ax(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function eN(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function tN(t,e,r,n){var a=nx(t,e),i=It(a,2),s=i[0],o=i[1],l=ax(t,o,n),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),u}function Ur(t,e,r,n){var a=nx(t,r),i=It(a,3),s=i[0],o=i[1],l=i[2],u=ax(t,o,e*s),c=s*l,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,c,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var d=new Array(e),h=0;h<e;h++)d[h]=eN(t,o,u,c,s,h);return f.dataArray=u,f.stride=c,f.size=s,f.getView=function(v){return d[v]},f.setPoint=function(v,p,g){var m=d[v];m[0]=p,m[1]=g},f.bufferSubData=function(v){t.bindBuffer(t.ARRAY_BUFFER,f),v?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,v*s):t.bufferSubData(t.ARRAY_BUFFER,0,u)},f}function rN(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var u=0;u<3;u++){var c=r+u;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,u*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),l.getMatrixView=function(f){return i[f]},l.setData=function(f,d){i[d].set(f,0)},l.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,a)},l}function nN(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}function md(){var t=new y0(9);return y0!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function b0(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function aN(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],h=r[1],v=r[2],p=r[3],g=r[4],m=r[5],y=r[6],b=r[7],x=r[8];return t[0]=d*n+h*s+v*u,t[1]=d*a+h*o+v*c,t[2]=d*i+h*l+v*f,t[3]=p*n+g*s+m*u,t[4]=p*a+g*o+m*c,t[5]=p*i+g*l+m*f,t[6]=y*n+b*s+x*u,t[7]=y*a+b*o+x*c,t[8]=y*i+b*l+x*f,t}function Fl(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=l,t[6]=d*n+h*s+u,t[7]=d*a+h*o+c,t[8]=d*i+h*l+f,t}function x0(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*s,t[1]=h*a+d*o,t[2]=h*i+d*l,t[3]=h*s-d*n,t[4]=h*o-d*a,t[5]=h*l-d*i,t[6]=u,t[7]=c,t[8]=f,t}function Nd(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function iN(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function lN(t,e){return t.intersection?t.intersection(e):new Set(Nl(t).filter(function(r){return e.has(r)}))}function pN(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return R0(r)}function sx(t,e){var r=t._private.rscratch;return fr(r,"labelWrapCachedLines",e)||[]}function mN(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>Qb?(yN(t),e.call(t,i)):(bN(t),lx(t,i,Ss.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,l){return CN(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function yN(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function bN(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function xN(t){var e=t.canvasWidth,r=t.canvasHeight,n=hh(t),a=n.pan,i=n.zoom,s=md();Fl(s,s,[a.x,a.y]),Nd(s,s,[i,i]);var o=md();iN(o,e,r);var l=md();return aN(l,o,s),l}function ox(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=hh(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function wN(t,e){t.drawSelectionRectangle(e,function(r){return ox(t,r)})}function EN(t){var e=t.data.contexts[t.NODE];e.save(),ox(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function _N(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),l=t.data.contexts[t.NODE],u=o.atlases,c=0;c<u.length;c++){var f=u[c],d=f.canvas;if(d){var h=d.width,v=d.height,p=h*c,g=d.height*s,m=.4;l.save(),l.scale(m,m),l.drawImage(d,p,g),l.strokeStyle="black",l.rect(p,g,h,v),l.stroke(),l.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function SN(t,e,r,n,a){var i,s,o,l,u=hh(t),c=u.pan,f=u.zoom;{var d=KF(t,c,f,e,r),h=It(d,2),v=h[0],p=h[1],g=6;i=v-g/2,s=p-g/2,o=g,l=g}if(o===0||l===0)return[];var m=t.data.contexts[t.WEBGL];m.bindFramebuffer(m.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(m.viewport(0,0,m.canvas.width,m.canvas.height),lx(t,null,Ss.PICKING),t.pickingFrameBuffer.needsDraw=!1);var y=o*l,b=new Uint8Array(y*4);m.readPixels(i,s,o,l,m.RGBA,m.UNSIGNED_BYTE,b),m.bindFramebuffer(m.FRAMEBUFFER,null);for(var x=new Set,E=0;E<y;E++){var S=b.slice(E*4,E*4+4),w=QF(S)-1;w>=0&&x.add(w)}return x}function CN(t,e,r){var n=SN(t,e,r),a=t.getCachedZSortedEles(),i,s,o=hr(n),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=a[u];if(!i&&c.isNode()&&(i=c),!s&&c.isEdge()&&(s=c),i&&s)break}}catch(f){o.e(f)}finally{o.f()}return[i,s].filter(Boolean)}function Ed(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function lx(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&wN(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=xN(t),l=t.getCachedZSortedEles();if(i=l.length,a.startFrame(o,r),r.screen){for(var u=0;u<l.nondrag.length;u++)Ed(t,u,l.nondrag[u]);for(var c=0;c<l.drag.length;c++)Ed(t,c,l.drag[c])}else if(r.picking)for(var f=0;f<l.length;f++)Ed(t,f,l[f]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(EN(t),_N(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var d=performance.now(),h=!1,v=Math.ceil(d-n),p=a.getDebugInfo(),g=["".concat(i," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(r.name,") - time ").concat(v,"ms, ").concat(g));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var m=p.atlasInfo,y=hr(m),b;try{for(y.s();!(b=y.n()).done;){var x=b.value;console.log("  ".concat(x.type,": ").concat(x.keyCount," keys, ").concat(x.atlasCount," atlases"))}}catch(E){y.e(E)}finally{y.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}function TN(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function C0(t){var e=t.indexOf(",");return t.substr(e+1)}function cx(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Si(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return TN(C0(n()),r);case"base64":return C0(n());case"base64uri":default:return n()}}function dx(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Ge.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Ge.CANVAS_LAYERS),contexts:new Array(Ge.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ge.CANVAS_LAYERS),bufferCanvases:new Array(Ge.BUFFER_COUNT),bufferContexts:new Array(Ge.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};wR()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<Ge.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=n.createElement("canvas"),f=Ge.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(f),e.data.contexts[u]||St("Could not create canvas of type "+f),Object.keys(l).forEach(function(ee){c.style[ee]=l[ee]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(Ge.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ge.NODE].setAttribute("data-id","layer"+Ge.NODE+"-node"),e.data.canvases[Ge.SELECT_BOX].setAttribute("data-id","layer"+Ge.SELECT_BOX+"-selectbox"),e.data.canvases[Ge.DRAG].setAttribute("data-id","layer"+Ge.DRAG+"-drag"),e.data.canvases[Ge.WEBGL]&&e.data.canvases[Ge.WEBGL].setAttribute("data-id","layer"+Ge.WEBGL+"-webgl");for(var u=0;u<Ge.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=n.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var d=ar(),h=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},v=function(V){return{x:-V.w/2,y:-V.h/2}},p=function(V){var W=V[0]._private,H=W.oldBackgroundTimestamp===W.backgroundTimestamp;return!H},g=function(V){return V[0]._private.nodeKey},m=function(V){return V[0]._private.labelStyleKey},y=function(V){return V[0]._private.sourceLabelStyleKey},b=function(V){return V[0]._private.targetLabelStyleKey},x=function(V,W,H,Q,se){return e.drawElement(V,W,H,!1,!1,se)},E=function(V,W,H,Q,se){return e.drawElementText(V,W,H,Q,"main",se)},S=function(V,W,H,Q,se){return e.drawElementText(V,W,H,Q,"source",se)},w=function(V,W,H,Q,se){return e.drawElementText(V,W,H,Q,"target",se)},T=function(V){return V.boundingBox(),V[0]._private.bodyBounds},k=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||d},P=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||d},A=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||d},C=function(V,W){return W},_=function(V){return h(T(V))},R=function(V,W,H){var Q=V?V+"-":"";return{x:W.x+H.pstyle(Q+"text-margin-x").pfValue,y:W.y+H.pstyle(Q+"text-margin-y").pfValue}},L=function(V,W,H){var Q=V[0]._private.rscratch;return{x:Q[W],y:Q[H]}},O=function(V){return R("",L(V,"labelX","labelY"),V)},D=function(V){return R("source",L(V,"sourceLabelX","sourceLabelY"),V)},I=function(V){return R("target",L(V,"targetLabelX","targetLabelY"),V)},F=function(V){return v(T(V))},z=function(V){return v(P(V))},q=function(V){return v(A(V))},N=function(V){var W=k(V),H=v(k(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":H.x=-W.w-(W.leftPad||0);break;case"right":H.x=-(W.rightPad||0);break}switch(V.pstyle("text-valign").value){case"top":H.y=-W.h-(W.topPad||0);break;case"bottom":H.y=-(W.botPad||0);break}}return H},U=e.data.eleTxrCache=new ws(e,{getKey:g,doesEleInvalidateKey:p,drawElement:x,getBoundingBox:T,getRotationPoint:_,getRotationOffset:F,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Y=e.data.lblTxrCache=new ws(e,{getKey:m,drawElement:E,getBoundingBox:k,getRotationPoint:O,getRotationOffset:N,isVisible:C}),$=e.data.slbTxrCache=new ws(e,{getKey:y,drawElement:S,getBoundingBox:P,getRotationPoint:D,getRotationOffset:z,isVisible:C}),j=e.data.tlbTxrCache=new ws(e,{getKey:b,drawElement:w,getBoundingBox:A,getRotationPoint:I,getRotationOffset:q,isVisible:C}),te=e.data.lyrTxrCache=new Jb(e);e.onUpdateEleCalcs(function(V,W){U.invalidateElements(W),Y.invalidateElements(W),$.invalidateElements(W),j.invalidateElements(W),te.invalidateElements(W);for(var H=0;H<W.length;H++){var Q=W[H]._private;Q.oldBackgroundTimestamp=Q.backgroundTimestamp}});var oe=function(V){for(var W=0;W<V.length;W++)te.enqueueElementRefinement(V[W].ele)};U.onDequeue(oe),Y.onDequeue(oe),$.onDequeue(oe),j.onDequeue(oe),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:m,getSourceLabelKey:y,getTargetLabelKey:b,drawElement:x,drawLabel:E,drawSourceLabel:S,drawTargetLabel:w,getElementBox:T,getLabelBox:k,getSourceLabelBox:P,getTargetLabelBox:A,getElementRotationPoint:_,getElementRotationOffset:F,getLabelRotationPoint:O,getSourceLabelRotationPoint:D,getTargetLabelRotationPoint:I,getLabelRotationOffset:N,getSourceLabelRotationOffset:z,getTargetLabelRotationOffset:q})}function gx(t,e,r){var n=r,a=function(T){st("Can not register `"+e+"` for `"+t+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Rs.prototype[e])return a(e);Rs.prototype[e]=r}else if(t==="collection"){if(Xt.prototype[e])return a(e);Xt.prototype[e]=r}else if(t==="layout"){for(var i=function(T){this.options=T,r.call(this,T),et(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var u=o[l];s[u]=s[u]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var w=this.options;if(w&&w.animate){var T=this.animations;if(T)for(var k=0;k<T.length;k++)T[k].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(T){return T._private.cy},d={addEventFields:function(T,k){k.layout=T,k.cy=f(T),k.target=T},bubble:function(){return!0},parent:function(T){return f(T)}};Le(s,{createEmitter:function(){return this._private.emitter=new uu(d,this),this},emitter:function(){return this._private.emitter},on:function(T,k){return this.emitter().on(T,k),this},one:function(T,k){return this.emitter().one(T,k),this},once:function(T,k){return this.emitter().one(T,k),this},removeListener:function(T,k){return this.emitter().removeListener(T,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,k){return this.emitter().emit(T,k),this}}),it.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=px("renderer","base"),v=h.prototype,p=r,g=r.prototype,m=function(){h.apply(this,arguments),p.apply(this,arguments)},y=m.prototype;for(var b in v){var x=v[b],E=g[b]!=null;if(E)return a(b);y[b]=x}for(var S in g)y[S]=g[S];v.clientFunctions.forEach(function(w){y[w]=y[w]||function(){St("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=m}else if(t==="__proto__"||t==="constructor"||t==="prototype")return St(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return O0({map:hx,keys:[t,e],value:n})}function px(t,e){return B0({map:hx,keys:[t,e]})}function DN(t,e,r,n,a){return O0({map:vx,keys:[t,e,r,n],value:a})}function LN(t,e,r,n){return B0({map:vx,keys:[t,e,r,n]})}var Nt,Qp,dR,A0,hR,vR,Bs,Ae,kt,dt,et,gR,ue,pR,zl,pr,Is,P0,Gd,M0,mR,Gn,yR,bR,xR,wR,xi,Ud,Jl,D0,Jp,Nn,zt,ER,_R,SR,CR,TR,kR,L0,AR,Le,PR,MR,DR,LR,R0,RR,O0,B0,gl,$c,em,Yc,tm,jc,rm,Kc,nm,Xc,am,Zc,im,Qc,sm,Jc,om,ef,lm,tf,um,rf,cm,nf,fm,af,dm,sf,hm,HR,zs,of,q0,GR,Vl,vn,Sa,F0,di,N0,Cs,Ts,UR,In,pl,vm,ka,z0,$R,jR,gm,XR,ZR,Yd,V0,Wl,pm,jd,St,W0,st,QR,Yr,JR,H0,eO,G0,Zt,Un,Kd,tO,fr,dn,rO,hn,nO,aO,_i,tu,mm,ks,Al,iO,ym,lf,bm,lO,Vs,uO,cO,fO,dO,hO,vO,gO,pO,mO,yO,bO,uf,xO,cf,wO,ru,U0,hi,EO,_O,SO,CO,TO,ml,Xd,Zd,Aa,Ea,kO,Gt,pi,AO,As,ar,PO,MO,DO,$0,Pl,Ml,xm,Qd,zn,wm,Y0,LO,j0,BO,IO,qO,FO,NO,zO,dr,gn,VO,Hl,Gl,WO,Ta,bs,ff,Vn,HO,Ps,GO,yl,nr,K0,Sd,$n,X0,Jd,UO,Cd,$O,YO,Em,mi,_m,yi,jO,Td,KO,XO,ZO,QO,Z0,JO,eB,tB,rB,nB,aB,iB,Sm,sB,oB,Q0,Cm,Tm,lB,uB,ds,wi,cB,eh,Ul,hf,J0,eb,fB,dB,hB,km,Am,vB,gB,pB,mB,yB,Pm,bB,xB,wB,EB,Mm,vi,kd,Ad,Dm,_B,SB,CB,TB,kB,AB,Lm,PB,Rm,MB,DB,LB,bl,RB,xl,OB,tb,rb,nb,ab,Ir,Om,ib,Bm,Im,sb,Si,Pd,Pa,BB,vf,qm,gf,Fm,pf,Nm,mf,zm,yf,Vm,bf,Wm,xf,Hm,wf,Gm,Ef,Um,_f,$m,Sf,Ym,Cf,jm,Tf,Km,kf,Xm,Af,Zm,Pf,Qm,Mf,Jm,Df,ey,Lf,ty,Rf,ry,Of,ny,Bf,ay,If,iy,qf,sy,Ff,oy,Nf,ly,zf,uy,Vf,cy,Wf,fy,Hf,dy,Gf,hy,Uf,vy,$f,gy,Yf,py,jf,my,Kf,yy,Xf,by,Zf,xy,Qf,wy,Jf,Ey,ed,_y,td,Sy,rd,Cy,vI,gI,nd,Ty,ad,ky,id,Ay,sd,Py,od,My,ld,Dy,EI,_I,ud,Ly,cd,Ry,TI,kI,AI,PI,it,MI,Dl,Je,lt,ye,Md,DI,LI,RI,ii,qn,Dd,OI,BI,II,qI,FI,db,NI,zI,nh,VI,At,yt,WI,HI,GI,Yn,jn,Wn,kr,Ei,Ms,gb,$I,lu,Br,pb,mb,Oy,YI,bi,Qn,Tr,Or,Fn,hs,wl,dd,By,yb,jI,KI,bb,xb,Iy,Ds,qy,Fy,XI,xs,Ws,wb,ZI,QI,JI,eq,tq,rq,nq,aq,iq,Ny,sq,oq,lq,Eb,_b,uq,Sb,zy,cq,Kn,Cb,Vy,fq,dq,_l,Tb,kb,rt,hq,Ab,$l,vq,gq,Ll,Kt,Ci,pq,mq,yq,bq,Hn,Jt,Hy,Gy,Uy,Xt,pt,xq,Eq,gt,Rl,Cq,Tq,Sl,Mb,Ld,Ol,kq,Aq,Rd,Bl,$t,Es,Pq,Hs,sh,jr,du,oh,Bt,hu,Ut,er,Mq,Dq,Ma,Ls,Rs,Yl,Lq,Rq,li,Qy,Oq,Bq,vd,Iq,qq,Fq,Ob,Nq,zq,Bb,Vq,Wq,Hq,Jy,Gq,Uq,jl,$q,Yq,jq,Kq,Xq,Ib,e0,Zq,Qq,Jq,eF,tF,t0,r0,uh,La,Kl,Od,Bd,$r,Cr,n0,a0,Ca,Il,fn,ba,_a,Gr,ui,Cl,Vb,Wb,Id,qd,i0,s0,rF,nF,Os,aF,tr,Gs,fh,Kr,Ub,$b,sF,Yb,o0,l0,gu,pu,jb,Kb,ki,pn,Us,u0,oF,Xb,Ai,gd,Zb,lF,c0,Tl,ql,Fd,Qb,uF,cF,fF,dF,hF,vF,gF,pF,mF,yF,bF,xF,wF,gi,EF,ws,Wt,_F,_s,Xl,SF,CF,TF,kF,AF,PF,MF,DF,f0,LF,d0,RF,Jb,Qt,h0,OF,ex,v0,Xr,NF,zF,VF,WF,HF,pd,mn,tx,dh,Ra,Jn,rx,ir,UF,ps,y0,sN,oN,uN,cN,fN,dN,hN,vN,Ss,Zl,yd,w0,E0,bd,fi,kl,ms,ys,gN,ix,xd,wd,ea,_0,S0,zd,Vd,ux,wa,$s,fx,kN,Ge,AN,PN,MN,hx,vx,Wd,Ql,Da,RN,qr,mx=Ao(()=>{Nt=typeof window=="undefined"?null:window,Qp=Nt?Nt.navigator:null;Nt&&Nt.document;dR=Vt(""),A0=Vt({}),hR=Vt(function(){}),vR=typeof HTMLElement=="undefined"?"undefined":Vt(HTMLElement),Bs=function(e){return e&&e.instanceString&&kt(e.instanceString)?e.instanceString():null},Ae=function(e){return e!=null&&Vt(e)==dR},kt=function(e){return e!=null&&Vt(e)===hR},dt=function(e){return!pr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},et=function(e){return e!=null&&Vt(e)===A0&&!dt(e)&&e.constructor===Object},gR=function(e){return e!=null&&Vt(e)===A0},ue=function(e){return e!=null&&Vt(e)===Vt(1)&&!isNaN(e)},pR=function(e){return ue(e)&&Math.floor(e)===e},zl=function(e){if(vR!=="undefined")return e!=null&&e instanceof HTMLElement},pr=function(e){return Is(e)||P0(e)},Is=function(e){return Bs(e)==="collection"&&e._private.single},P0=function(e){return Bs(e)==="collection"&&!e._private.single},Gd=function(e){return Bs(e)==="core"},M0=function(e){return Bs(e)==="stylesheet"},mR=function(e){return Bs(e)==="event"},Gn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},yR=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},bR=function(e){return et(e)&&ue(e.x1)&&ue(e.x2)&&ue(e.y1)&&ue(e.y2)},xR=function(e){return gR(e)&&kt(e.then)},wR=function(){return Qp&&Qp.userAgent.match(/msie|trident|edge/i)},xi=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,l=r.apply(i,s),u=n.cache;return(o=u[l])||(o=u[l]=e.apply(i,s)),o};return n.cache={},n},Ud=xi(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Jl=xi(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),D0=xi(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Jp=function(e){return Gn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Nn=function(e,r){return e.slice(-1*r.length)===r},zt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ER="rgb[a]?\\(("+zt+"[%]?)\\s*,\\s*("+zt+"[%]?)\\s*,\\s*("+zt+"[%]?)(?:\\s*,\\s*("+zt+"))?\\)",_R="rgb[a]?\\((?:"+zt+"[%]?)\\s*,\\s*(?:"+zt+"[%]?)\\s*,\\s*(?:"+zt+"[%]?)(?:\\s*,\\s*(?:"+zt+"))?\\)",SR="hsl[a]?\\(("+zt+")\\s*,\\s*("+zt+"[%])\\s*,\\s*("+zt+"[%])(?:\\s*,\\s*("+zt+"))?\\)",CR="hsl[a]?\\((?:"+zt+")\\s*,\\s*(?:"+zt+"[%])\\s*,\\s*(?:"+zt+"[%])(?:\\s*,\\s*(?:"+zt+"))?\\)",TR="\\#[0-9a-fA-F]{3}",kR="\\#[0-9a-fA-F]{6}",L0=function(e,r){return e<r?-1:e>r?1:0},AR=function(e,r){return-1*L0(e,r)},Le=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},PR=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},MR=function(e){var r,n,a,i,s,o,l,u;function c(v,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?v+(p-v)*6*g:g<1/2?p:g<2/3?v+(p-v)*(2/3-g)*6:v}var f=new RegExp("^"+SR+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=l=u=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,h=2*i-d;o=Math.round(255*c(h,d,n+1/3)),l=Math.round(255*c(h,d,n)),u=Math.round(255*c(h,d,n-1/3))}r=[o,l,u,s]}return r},DR=function(e){var r,n=new RegExp("^"+ER+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(o&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},LR=function(e){return RR[e.toLowerCase()]},R0=function(e){return(dt(e)?e:null)||LR(e)||PR(e)||DR(e)||MR(e)},RR={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},O0=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(et(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},B0=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(et(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},gl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};HR=WR(),zs=qs(HR),of=Nt?Nt.performance:null,q0=of&&of.now?function(){return of.now()}:function(){return Date.now()},GR=function(){if(Nt){if(Nt.requestAnimationFrame)return function(t){Nt.requestAnimationFrame(t)};if(Nt.mozRequestAnimationFrame)return function(t){Nt.mozRequestAnimationFrame(t)};if(Nt.webkitRequestAnimationFrame)return function(t){Nt.webkitRequestAnimationFrame(t)};if(Nt.msRequestAnimationFrame)return function(t){Nt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(q0())},1e3/60)}}(),Vl=function(e){return GR(e)},vn=q0,Sa=9261,F0=65599,di=5381,N0=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sa,n=r,a;a=e.next(),!a.done;)n=n*F0+a.value|0;return n},Cs=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sa;return r*F0+e|0},Ts=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:di;return(r<<5)+r+e|0},UR=function(e,r){return e*2097152+r},In=function(e){return e[0]*2097152+e[1]},pl=function(e,r){return[Cs(e[0],r[0]),Ts(e[1],r[1])]},vm=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return N0(s,r)},ka=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return N0(s,r)},z0=function(){return $R(arguments)},$R=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=ka(a):r=ka(a,r)}return r};jR=function(e,r,n,a,i,s){return{x:(e-n)*i+n,y:(r-a)*s+a}};gm=!0,XR=console.warn!=null,ZR=console.trace!=null,Yd=Number.MAX_SAFE_INTEGER||9007199254740991,V0=function(){return!0},Wl=function(){return!1},pm=function(){return 0},jd=function(){},St=function(e){throw new Error(e)},W0=function(e){if(e!==void 0)gm=!!e;else return gm},st=function(e){W0()&&(XR?console.warn(e):(console.log(e),ZR&&console.trace()))},QR=function(e){return Le({},e)},Yr=function(e){return e==null?e:dt(e)?e.slice():et(e)?QR(e):e},JR=function(e){return e.slice()},H0=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},eO={},G0=function(){return eO},Zt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Un=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Kd=function(e){e.splice(0,e.length)},tO=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},fr=function(e,r,n){return n&&(r=D0(n,r)),e[r]},dn=function(e,r,n,a){n&&(r=D0(n,r)),e[r]=a},rO=function(){function t(){Xn(this,t),this._obj={}}return Zn(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),hn=typeof Map!="undefined"?Map:rO,nO="undefined",aO=function(){function t(e){if(Xn(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Zn(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),_i=(typeof Set=="undefined"?"undefined":Vt(Set))!==nO?Set:aO,tu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Gd(e)){St("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){St("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new _i,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),l=e.zoom();i.position={x:(s.x-o.x)/l,y:(s.y-o.y)/l}}var u=[];dt(r.classes)?u=r.classes:Ae(r.classes)&&(u=r.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var d=u[c];!d||d===""||i.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var h=r.style||r.css;h&&(st("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},mm=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;et(n)&&!pr(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!kt(a)?a:i,a=kt(a)?a:function(){};for(var o=this._private.cy,l=n=Ae(n)?this.filter(n):n,u=[],c=[],f={},d={},h={},v=0,p,g=this.byGroup(),m=g.nodes,y=g.edges,b=0;b<l.length;b++){var x=l[b],E=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(h[E]=!0,c.push(x)),d[E]=0)}for(var S=function(){var _=e.bfs?u.shift():u.pop(),R=_.id();if(e.dfs){if(h[R])return 0;h[R]=!0,c.push(_)}var L=d[R],O=f[R],D=O!=null?O.source():null,I=O!=null?O.target():null,F=O==null?void 0:_.same(D)?I[0]:D[0],z;if(z=a(_,O,F,v++,L),z===!0)return p=_,1;if(z===!1)return 1;for(var q=_.connectedEdges().filter(function(j){return(!i||j.source().same(_))&&y.has(j)}),N=0;N<q.length;N++){var U=q[N],Y=U.connectedNodes().filter(function(j){return!j.same(_)&&m.has(j)}),$=Y.id();Y.length!==0&&!h[$]&&(Y=Y[0],u.push(Y),e.bfs&&(h[$]=!0,c.push(Y)),f[$]=U,d[$]=d[R]+1)}},w;u.length!==0&&(w=S(),!(w!==0&&w===1)););for(var T=o.collection(),k=0;k<c.length;k++){var P=c[k],A=f[P.id()];A!=null&&T.push(A),T.push(P)}return{path:o.collection(T),found:o.collection(p)}}},ks={breadthFirstSearch:mm({bfs:!0}),depthFirstSearch:mm({dfs:!0})};ks.bfs=ks.breadthFirstSearch;ks.dfs=ks.depthFirstSearch;Al={exports:{}},iO=Al.exports;lO=oO(),Vs=qs(lO),uO=Zt({root:null,weight:function(e){return 1},directed:!1}),cO={dijkstra:function(e){if(!et(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=uO(e),a=n.root,i=n.weight,s=n.directed,o=this,l=i,u=Ae(a)?this.filter(a)[0]:a[0],c={},f={},d={},h=this.byGroup(),v=h.nodes,p=h.edges;p.unmergeBy(function(L){return L.isLoop()});for(var g=function(O){return c[O.id()]},m=function(O,D){c[O.id()]=D,y.updateItem(O)},y=new Vs(function(L,O){return g(L)-g(O)}),b=0;b<v.length;b++){var x=v[b];c[x.id()]=x.same(u)?0:1/0,y.push(x)}for(var E=function(O,D){for(var I=(s?O.edgesTo(D):O.edgesWith(D)).intersect(p),F=1/0,z,q=0;q<I.length;q++){var N=I[q],U=l(N);(U<F||!z)&&(F=U,z=N)}return{edge:z,dist:F}};y.size()>0;){var S=y.pop(),w=g(S),T=S.id();if(d[T]=w,w!==1/0)for(var k=S.neighborhood().intersect(v),P=0;P<k.length;P++){var A=k[P],C=A.id(),_=E(S,A),R=w+_.dist;R<g(A)&&(m(A,R),f[C]={node:S,edge:_.edge})}}return{distanceTo:function(O){var D=Ae(O)?v.filter(O)[0]:O[0];return d[D.id()]},pathTo:function(O){var D=Ae(O)?v.filter(O)[0]:O[0],I=[],F=D,z=F.id();if(D.length>0)for(I.unshift(D);f[z];){var q=f[z];I.unshift(q.edge),I.unshift(q.node),F=q.node,z=F.id()}return o.spawn(I)}}}},fO={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,l=function(x){for(var E=0;E<s.length;E++){var S=s[E];if(S.has(x))return E}},u=0;u<i;u++)s[u]=this.spawn(n[u]);for(var c=a.sort(function(b,x){return e(b)-e(x)}),f=0;f<c.length;f++){var d=c[f],h=d.source()[0],v=d.target()[0],p=l(h),g=l(v),m=s[p],y=s[g];p!==g&&(o.merge(d),m.merge(y),s.splice(g,1))}return o}},dO=Zt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),hO={aStar:function(e){var r=this.cy(),n=dO(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),c=i.id(),f={},d={},h={},v=new Vs(function(z,q){return d[z.id()]-d[q.id()]}),p=new _i,g={},m={},y=function(q,N){v.push(q),p.add(N)},b,x,E=function(){b=v.pop(),x=b.id(),p.delete(x)},S=function(q){return p.has(q)};y(a,u),f[u]=0,d[u]=s(a);for(var w=0;v.size()>0;){if(E(),w++,x===c){for(var T=[],k=i,P=c,A=m[P];T.unshift(k),A!=null&&T.unshift(A),k=g[P],k!=null;)P=k.id(),A=m[P];return{found:!0,distance:f[x],path:this.spawn(T),steps:w}}h[x]=!0;for(var C=b._private.edges,_=0;_<C.length;_++){var R=C[_];if(this.hasElementWithId(R.id())&&!(o&&R.data("source")!==x)){var L=R.source(),O=R.target(),D=L.id()!==x?L:O,I=D.id();if(this.hasElementWithId(I)&&!h[I]){var F=f[x]+l(R);if(!S(I)){f[I]=F,d[I]=F+s(D),y(D,I),g[I]=b,m[I]=R;continue}F<f[I]&&(f[I]=F,d[I]=F+s(D),g[I]=b,m[I]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},vO=Zt({weight:function(e){return 1},directed:!1}),gO={floydWarshall:function(e){for(var r=this.cy(),n=vO(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),l=o.nodes,u=o.edges,c=l.length,f=c*c,d=function(U){return l.indexOf(U)},h=function(U){return l[U]},v=new Array(f),p=0;p<f;p++){var g=p%c,m=(p-g)/c;m===g?v[p]=0:v[p]=1/0}for(var y=new Array(f),b=new Array(f),x=0;x<u.length;x++){var E=u[x],S=E.source()[0],w=E.target()[0];if(S!==w){var T=d(S),k=d(w),P=T*c+k,A=s(E);if(v[P]>A&&(v[P]=A,y[P]=k,b[P]=E),!i){var C=k*c+T;!i&&v[C]>A&&(v[C]=A,y[C]=T,b[C]=E)}}}for(var _=0;_<c;_++)for(var R=0;R<c;R++)for(var L=R*c+_,O=0;O<c;O++){var D=R*c+O,I=_*c+O;v[L]+v[I]<v[D]&&(v[D]=v[L]+v[I],y[D]=y[L])}var F=function(U){return(Ae(U)?r.filter(U):U)[0]},z=function(U){return d(F(U))},q={distance:function(U,Y){var $=z(U),j=z(Y);return v[$*c+j]},path:function(U,Y){var $=z(U),j=z(Y),te=h($);if($===j)return te.collection();if(y[$*c+j]==null)return r.collection();var oe=r.collection(),ee=$,V;for(oe.merge(te);$!==j;)ee=$,$=y[$*c+j],V=b[ee*c+$],oe.merge(V),oe.merge(h($));return oe}};return q}},pO=Zt({weight:function(e){return 1},directed:!1,root:null}),mO={bellmanFord:function(e){var r=this,n=pO(e),a=n.weight,i=n.directed,s=n.root,o=a,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,h=d.length,v=new hn,p=!1,g=[];s=u.collection(s)[0],f.unmergeBy(function(De){return De.isLoop()});for(var m=f.length,y=function(ke){var Ce=v.get(ke.id());return Ce||(Ce={},v.set(ke.id(),Ce)),Ce},b=function(ke){return(Ae(ke)?u.$(ke):ke)[0]},x=function(ke){return y(b(ke)).dist},E=function(ke){for(var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,de=b(ke),xe=[],we=de;;){if(we==null)return r.spawn();var Me=y(we),Se=Me.edge,ze=Me.pred;if(xe.unshift(we[0]),we.same(Ce)&&xe.length>0)break;Se!=null&&xe.unshift(Se),we=ze}return l.spawn(xe)},S=0;S<h;S++){var w=d[S],T=y(w);w.same(s)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var k=!1,P=function(ke,Ce,de,xe,we,Me){var Se=xe.dist+Me;Se<we.dist&&!de.same(xe.edge)&&(we.dist=Se,we.pred=ke,we.edge=de,k=!0)},A=1;A<h;A++){k=!1;for(var C=0;C<m;C++){var _=f[C],R=_.source(),L=_.target(),O=o(_),D=y(R),I=y(L);P(R,L,_,D,I,O),i||P(L,R,_,I,D,O)}if(!k)break}if(k)for(var F=[],z=0;z<m;z++){var q=f[z],N=q.source(),U=q.target(),Y=o(q),$=y(N).dist,j=y(U).dist;if($+Y<j||!i&&j+Y<$)if(p||(st("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var te=[];$+Y<j&&te.push(N),!i&&j+Y<$&&te.push(U);for(var oe=te.length,ee=0;ee<oe;ee++){var V=te[ee],W=[V];W.push(y(V).edge);for(var H=y(V).pred;W.indexOf(H)===-1;)W.push(H),W.push(y(H).edge),H=y(H).pred;W=W.slice(W.indexOf(H));for(var Q=W[0].id(),se=0,ve=2;ve<W.length;ve+=2)W[ve].id()<Q&&(Q=W[ve].id(),se=ve);W=W.slice(se).concat(W.slice(0,se)),W.push(W[0]);var Ne=W.map(function(De){return De.id()}).join(",");F.indexOf(Ne)===-1&&(g.push(l.spawn(W)),F.push(Ne))}}else break}return{distanceTo:x,pathTo:E,hasNegativeWeightCycle:p,negativeWeightCycles:g}}},yO=Math.sqrt(2),bO=function(e,r,n){n.length===0&&St("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],l=r[s],u=n,c=u.length-1;c>=0;c--){var f=u[c],d=f[1],h=f[2];(r[d]===o&&r[h]===l||r[d]===l&&r[h]===o)&&u.splice(c,1)}for(var v=0;v<u.length;v++){var p=u[v];p[1]===l?(u[v]=p.slice(),u[v][1]=o):p[2]===l&&(u[v]=p.slice(),u[v][2]=o)}for(var g=0;g<r.length;g++)r[g]===l&&(r[g]=o);return u},uf=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=bO(i,e,r),n--}return r},xO={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(I){return I.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/yO);if(i<2){St("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<s;c++){var f=a[c];u.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,h=[],v=new Array(i),p=new Array(i),g=new Array(i),m=function(F,z){for(var q=0;q<i;q++)z[q]=F[q]},y=0;y<=o;y++){for(var b=0;b<i;b++)p[b]=b;var x=uf(p,u.slice(),i,l),E=x.slice();m(p,g);var S=uf(p,x,l,2),w=uf(g,E,l,2);S.length<=w.length&&S.length<d?(d=S.length,h=S,m(p,v)):w.length<=S.length&&w.length<d&&(d=w.length,h=w,m(g,v))}for(var T=this.spawn(h.map(function(I){return a[I[0]]})),k=this.spawn(),P=this.spawn(),A=v[0],C=0;C<v.length;C++){var _=v[C],R=n[C];_===A?k.merge(R):P.merge(R)}var L=function(F){var z=e.spawn();return F.forEach(function(q){z.merge(q),q.connectedEdges().forEach(function(N){e.contains(N)&&!T.contains(N)&&z.merge(N)})}),z},O=[L(k),L(P)],D={cut:T,components:O,partition1:k,partition2:P};return D}},wO=function(e){return{x:e.x,y:e.y}},ru=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},U0=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},hi=function(e){return{x:e[0],y:e[1]}},EO=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},_O=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},SO=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},CO=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,l=e.length-1;l>=0;l--){var u=e[l];s?isFinite(u)||(e[l]=-1/0,o++):e.splice(l,1)}i&&e.sort(function(d,h){return d-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},TO=function(e){return Math.PI*e/180},ml=function(e,r){return Math.atan2(r,e)-Math.PI/2},Xd=Math.log2||function(t){return Math.log(t)/Math.log(2)},Zd=function(e){return e>0?1:e<0?-1:0},Aa=function(e,r){return Math.sqrt(Ea(e,r))},Ea=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},kO=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Gt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},pi=function(e,r,n,a){return{x:Gt(e.x,r.x,n.x,a),y:Gt(e.y,r.y,n.y,a)}},AO=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=Aa(e,r),o={x:i.x/s,y:i.y/s};return n=n==null?0:n,a=a!=null?a:n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},As=function(e,r,n){return Math.max(e,Math.min(n,r))},ar=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},PO=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},MO=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},DO=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},$0=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Pl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ml=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=It(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},xm=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Qd=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},zn=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},wm=function(e,r){return zn(e,r.x,r.y)},Y0=function(e,r){return zn(e,r.x1,r.y1)&&zn(e,r.x2,r.y2)},LO=(cf=Math.hypot)!==null&&cf!==void 0?cf:function(t,e){return Math.sqrt(t*t+e*e)};j0=function(e,r,n,a,i,s,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?$n(i,s):l,c=i/2,f=s/2;u=Math.min(u,c,f);var d=u!==c,h=u!==f,v;if(d){var p=n-c+u-o,g=a-f-o,m=n+c-u+o,y=g;if(v=Vn(e,r,n,a,p,g,m,y,!1),v.length>0)return v}if(h){var b=n+c+o,x=a-f+u-o,E=b,S=a+f-u+o;if(v=Vn(e,r,n,a,b,x,E,S,!1),v.length>0)return v}if(d){var w=n-c+u-o,T=a+f+o,k=n+c-u+o,P=T;if(v=Vn(e,r,n,a,w,T,k,P,!1),v.length>0)return v}if(h){var A=n-c-o,C=a-f+u-o,_=A,R=a+f-u+o;if(v=Vn(e,r,n,a,A,C,_,R,!1),v.length>0)return v}var L;{var O=n-c+u,D=a-f+u;if(L=bs(e,r,n,a,O,D,u+o),L.length>0&&L[0]<=O&&L[1]<=D)return[L[0],L[1]]}{var I=n+c-u,F=a-f+u;if(L=bs(e,r,n,a,I,F,u+o),L.length>0&&L[0]>=I&&L[1]<=F)return[L[0],L[1]]}{var z=n+c-u,q=a+f-u;if(L=bs(e,r,n,a,z,q,u+o),L.length>0&&L[0]>=z&&L[1]>=q)return[L[0],L[1]]}{var N=n-c+u,U=a+f-u;if(L=bs(e,r,n,a,N,U,u+o),L.length>0&&L[0]<=N&&L[1]>=U)return[L[0],L[1]]}return[]},BO=function(e,r,n,a,i,s,o){var l=o,u=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,s),d=Math.max(a,s);return u-l<=e&&e<=c+l&&f-l<=r&&r<=d+l},IO=function(e,r,n,a,i,s,o,l,u){var c={x1:Math.min(n,o,i)-u,x2:Math.max(n,o,i)+u,y1:Math.min(a,l,s)-u,y2:Math.max(a,l,s)+u};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},qO=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,l=(-r+s)/o,u=(-r-s)/o;return[l,u]},FO=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,l,u,c,f,d,h,v;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,o=l*l*l+u*u,i[1]=0,h=r/3,o>0){f=u+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=u-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-h+f+d,h+=(f+d)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-d+f)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,o===0){v=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-h+2*v,i[4]=i[2]=-(v+h);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),v=2*Math.sqrt(l),i[0]=-h+v*Math.cos(c/3),i[2]=-h+v*Math.cos((c+2*Math.PI)/3),i[4]=-h+v*Math.cos((c+4*Math.PI)/3)},NO=function(e,r,n,a,i,s,o,l){var u=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*l+4*s*s-4*s*l+l*l,c=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*l-6*s*s+3*s*l,f=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*l-a*r+2*s*s+2*s*r-l*r,d=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,h=[];FO(u,c,f,d,h);for(var v=1e-7,p=[],g=0;g<6;g+=2)Math.abs(h[g+1])<v&&h[g]>=0&&h[g]<=1&&p.push(h[g]);p.push(1),p.push(0);for(var m=-1,y,b,x,E=0;E<p.length;E++)y=Math.pow(1-p[E],2)*n+2*(1-p[E])*p[E]*i+p[E]*p[E]*o,b=Math.pow(1-p[E],2)*a+2*(1-p[E])*p[E]*s+p[E]*p[E]*l,x=Math.pow(y-e,2)+Math.pow(b-r,2),m>=0?x<m&&(m=x):m=x;return m},zO=function(e,r,n,a,i,s){var o=[e-n,r-a],l=[i-n,s-a],u=l[0]*l[0]+l[1]*l[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*l[0]+o[1]*l[1],d=f*f/u;return f<0?c:d>u?(e-i)*(e-i)+(r-s)*(r-s):c-d},dr=function(e,r,n){for(var a,i,s,o,l,u=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)l=(e-a)/(s-a)*(o-i)+i,l>r&&u++;else continue;return u%2!==0},gn=function(e,r,n,a,i,s,o,l,u){var c=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var d=Math.cos(-f),h=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=s/2*(n[v*2]*d-n[v*2+1]*h),c[v*2+1]=o/2*(n[v*2+1]*d+n[v*2]*h),c[v*2]+=a,c[v*2+1]+=i;var p;if(u>0){var g=Gl(c,-u);p=Hl(g)}else p=c;return dr(e,r,p)},VO=function(e,r,n,a,i,s,o,l){for(var u=new Array(n.length*2),c=0;c<l.length;c++){var f=l[c];u[c*4+0]=f.startX,u[c*4+1]=f.startY,u[c*4+2]=f.stopX,u[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(d<=Math.pow(f.radius,2))return!0}return dr(e,r,u)},Hl=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,l,u,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],l=e[1],u=e[2],c=e[3]);var d=Vn(n,a,i,s,o,l,u,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},Gl=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(s=e[(l+1)*2],o=e[(l+1)*2+1]):(s=e[0],o=e[1]);var u=o-i,c=-(s-a),f=Math.sqrt(u*u+c*c),d=u/f,h=c/f;n[l*4]=a+d*r,n[l*4+1]=i+h*r,n[l*4+2]=s+d*r,n[l*4+3]=o+h*r}return n},WO=function(e,r,n,a,i,s){var o=n-e,l=a-r;o/=i,l/=s;var u=Math.sqrt(o*o+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(n-e)*f+e,(a-r)*f+r]},Ta=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},bs=function(e,r,n,a,i,s,o){var l=[n-e,a-r],u=[e-i,r-s],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-o*o,h=f*f-4*c*d;if(h<0)return[];var v=(-f+Math.sqrt(h))/(2*c),p=(-f-Math.sqrt(h))/(2*c),g=Math.min(v,p),m=Math.max(v,p),y=[];if(g>=0&&g<=1&&y.push(g),m>=0&&m<=1&&y.push(m),y.length===0)return[];var b=y[0]*l[0]+e,x=y[0]*l[1]+r;if(y.length>1){if(y[0]==y[1])return[b,x];var E=y[1]*l[0]+e,S=y[1]*l[1]+r;return[b,x,E,S]}else return[b,x]},ff=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Vn=function(e,r,n,a,i,s,o,l,u){var c=e-i,f=n-e,d=o-i,h=r-s,v=a-r,p=l-s,g=d*h-p*c,m=f*h-v*c,y=p*f-d*v;if(y!==0){var b=g/y,x=m/y,E=.001,S=0-E,w=1+E;return S<=b&&b<=w&&S<=x&&x<=w?[e+b*f,r+b*v]:u?[e+b*f,r+b*v]:[]}else return g===0||m===0?ff(e,n,o)===o?[o,l]:ff(e,n,i)===i?[i,s]:ff(i,o,n)===n?[n,a]:[]:[]},HO=function(e,r,n,a,i){var s=[],o=a/2,l=i/2,u=r,c=n;s.push({x:u+o*e[0],y:c+l*e[1]});for(var f=1;f<e.length/2;f++)s.push({x:u+o*e[f*2],y:c+l*e[f*2+1]});return s},Ps=function(e,r,n,a,i,s,o,l){var u=[],c,f=new Array(n.length),d=!0;s==null&&(d=!1);var h;if(d){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*s+a,f[v*2+1]=n[v*2+1]*o+i;if(l>0){var p=Gl(f,-l);h=Hl(p)}else h=f}else h=n;for(var g,m,y,b,x=0;x<h.length/2;x++)g=h[x*2],m=h[x*2+1],x<h.length/2-1?(y=h[(x+1)*2],b=h[(x+1)*2+1]):(y=h[0],b=h[1]),c=Vn(e,r,a,i,g,m,y,b),c.length!==0&&u.push(c[0],c[1]);return u},GO=function(e,r,n,a,i,s,o,l,u){var c=[],f,d=new Array(n.length*2);u.forEach(function(y,b){b===0?(d[d.length-2]=y.startX,d[d.length-1]=y.startY):(d[b*4-2]=y.startX,d[b*4-1]=y.startY),d[b*4]=y.stopX,d[b*4+1]=y.stopY,f=bs(e,r,a,i,y.cx,y.cy,y.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<d.length/4;h++)f=Vn(e,r,a,i,d[h*4],d[h*4+1],d[h*4+2],d[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-r,2),g=1;g<c.length/2;g++){var m=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-r,2);m<=p&&(v[0]=c[g*2],v[1]=c[g*2+1],p=m)}return v}return c},yl=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},nr=function(e,r){var n=Sd(e,r);return n=K0(n),n},K0=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);for(var c=2/(o-i),f=2/(l-s),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);if(s<-1)for(var h=0;h<a;h++)n=e[2*h+1]=e[2*h+1]+(-1-s);return e},Sd=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},$n=function(e,r){return Math.min(e/4,r/4,8)},X0=function(e,r){return Math.min(e/10,r/10,8)},Jd=function(){return 8},UO=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Cd=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};$O=Zt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),YO={pageRank:function(e){for(var r=$O(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,d=f*f,h=c.length,v=new Array(d),p=new Array(f),g=(1-n)/f,m=0;m<f;m++){for(var y=0;y<f;y++){var b=m*f+y;v[b]=0}p[m]=0}for(var x=0;x<h;x++){var E=c[x],S=E.data("source"),w=E.data("target");if(S!==w){var T=u.indexOfId(S),k=u.indexOfId(w),P=s(E),A=k*f+T;v[A]+=P,p[T]+=P}}for(var C=1/f+g,_=0;_<f;_++)if(p[_]===0)for(var R=0;R<f;R++){var L=R*f+_;v[L]=C}else for(var O=0;O<f;O++){var D=O*f+_;v[D]=v[D]/p[_]+g}for(var I=new Array(f),F=new Array(f),z,q=0;q<f;q++)I[q]=1;for(var N=0;N<i;N++){for(var U=0;U<f;U++)F[U]=0;for(var Y=0;Y<f;Y++)for(var $=0;$<f;$++){var j=Y*f+$;F[Y]+=v[j]*I[$]}kO(F),z=I,I=F,F=z;for(var te=0,oe=0;oe<f;oe++){var ee=z[oe]-I[oe];te+=ee*ee}if(te<a)break}var V={rank:function(H){return H=o.collection(H)[0],I[u.indexOf(H)]}};return V}},Em=Zt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),mi={degreeCentralityNormalized:function(e){e=Em(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,h=0,v=0;v<a;v++){var p=n[v],g=p.id();e.root=p;var m=this.degreeCentrality(e);d<m.indegree&&(d=m.indegree),h<m.outdegree&&(h=m.outdegree),c[g]=m.indegree,f[g]=m.outdegree}return{indegree:function(b){return d==0?0:(Ae(b)&&(b=r.filter(b)),c[b.id()]/d)},outdegree:function(b){return h===0?0:(Ae(b)&&(b=r.filter(b)),f[b.id()]/h)}}}else{for(var i={},s=0,o=0;o<a;o++){var l=n[o];e.root=l;var u=this.degreeCentrality(e);s<u.degree&&(s=u.degree),i[l.id()]=u.degree}return{degree:function(b){return s===0?0:(Ae(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=Em(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,l=a.alpha;if(i=r.collection(i)[0],o){for(var h=i.connectedEdges(),v=h.filter(function(S){return S.target().same(i)&&n.has(S)}),p=h.filter(function(S){return S.source().same(i)&&n.has(S)}),g=v.length,m=p.length,y=0,b=0,x=0;x<v.length;x++)y+=s(v[x]);for(var E=0;E<p.length;E++)b+=s(p[E]);return{indegree:Math.pow(g,1-l)*Math.pow(y,l),outdegree:Math.pow(m,1-l)*Math.pow(b,l)}}else{for(var u=i.connectedEdges().intersection(n),c=u.length,f=0,d=0;d<u.length;d++)f+=s(u[d]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};mi.dc=mi.degreeCentrality;mi.dcn=mi.degreeCentralityNormalised=mi.degreeCentralityNormalized;_m=Zt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),yi={closenessCentralityNormalized:function(e){for(var r=_m(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},l=0,u=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<u.length;f++){for(var d=0,h=u[f],v=0;v<u.length;v++)if(f!==v){var p=c.distance(h,u[v]);n?d+=1/p:d+=p}n||(d=1/d),l<d&&(l=d),o[h.id()]=d}return{closeness:function(m){return l==0?0:(Ae(m)?m=s.filter(m)[0].id():m=m.id(),o[m]/l)}}},closenessCentrality:function(e){var r=_m(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(n)){var d=o.distanceTo(f);s?l+=1/d:l+=d}}return s?l:1/l}};yi.cc=yi.closenessCentrality;yi.ccn=yi.closenessCentralityNormalised=yi.closenessCentralityNormalized;jO=Zt({weight:null,directed:!1}),Td={betweennessCentrality:function(e){for(var r=jO(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),l={},u={},c=0,f={set:function(b,x){u[b]=x,x>c&&(c=x)},get:function(b){return u[b]}},d=0;d<o.length;d++){var h=o[d],v=h.id();n?l[v]=h.outgoers().nodes():l[v]=h.openNeighborhood().nodes(),f.set(v,0)}for(var p=function(){for(var b=o[g].id(),x=[],E={},S={},w={},T=new Vs(function(Y,$){return w[Y]-w[$]}),k=0;k<o.length;k++){var P=o[k].id();E[P]=[],S[P]=0,w[P]=1/0}for(S[b]=1,w[b]=0,T.push(b);!T.empty();){var A=T.pop();if(x.push(A),i)for(var C=0;C<l[A].length;C++){var _=l[A][C],R=s.getElementById(A),L=void 0;R.edgesTo(_).length>0?L=R.edgesTo(_)[0]:L=_.edgesTo(R)[0];var O=a(L);_=_.id(),w[_]>w[A]+O&&(w[_]=w[A]+O,T.nodes.indexOf(_)<0?T.push(_):T.updateItem(_),S[_]=0,E[_]=[]),w[_]==w[A]+O&&(S[_]=S[_]+S[A],E[_].push(A))}else for(var D=0;D<l[A].length;D++){var I=l[A][D].id();w[I]==1/0&&(T.push(I),w[I]=w[A]+1),w[I]==w[A]+1&&(S[I]=S[I]+S[A],E[I].push(A))}}for(var F={},z=0;z<o.length;z++)F[o[z].id()]=0;for(;x.length>0;){for(var q=x.pop(),N=0;N<E[q].length;N++){var U=E[q][N];F[U]=F[U]+S[U]/S[q]*(1+F[q])}q!=o[g].id()&&f.set(q,f.get(q)+F[q])}},g=0;g<o.length;g++)p();var m={betweenness:function(b){var x=s.collection(b).id();return f.get(x)},betweennessNormalized:function(b){if(c==0)return 0;var x=s.collection(b).id();return f.get(x)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};Td.bc=Td.betweennessCentrality;KO=Zt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),XO=function(e){return KO(e)},ZO=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},QO=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Z0=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},JO=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+o]*r[o*n+l]}return a},eB=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=JO(e,a,r);return e},tB=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Z0(a,r),a},rB=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},nB=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],l=0;l<r;l++)Math.round(e[s*r+l]*1e3)/1e3>0&&o.push(n[l]);o.length!==0&&i.push(a.collection(o))}return i},aB=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},iB=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&aB(e[r],e[n])&&e.splice(n,1);return e},Sm=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=XO(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var l=r.length,u=l*l,c=new Array(u),f,d=0;d<u;d++)c[d]=0;for(var h=0;h<n.length;h++){var v=n[h],p=s[v.source().id()],g=s[v.target().id()],m=ZO(v,i.attributes);c[p*l+g]+=m,c[g*l+p]+=m}QO(c,l,i.multFactor),Z0(c,l);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,f=eB(c,l,i.expandFactor),c=tB(f,l,i.inflateFactor),rB(c,f,u,4)||(y=!0),b++;var x=nB(c,l,r,a);return x=iB(x),x},sB={markovClustering:Sm,mcl:Sm},oB=function(e){return e},Q0=function(e,r){return Math.abs(r-e)},Cm=function(e,r,n){return e+Q0(r,n)},Tm=function(e,r,n){return e+Math.pow(n-r,2)},lB=function(e){return Math.sqrt(e)},uB=function(e,r,n){return Math.max(e,Q0(r,n))},ds=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:oB,o=a,l,u,c=0;c<e;c++)l=r(c),u=n(c),o=i(o,l,u);return s(o)},wi={euclidean:function(e,r,n){return e>=2?ds(e,r,n,0,Tm,lB):ds(e,r,n,0,Cm)},squaredEuclidean:function(e,r,n){return ds(e,r,n,0,Tm)},manhattan:function(e,r,n){return ds(e,r,n,0,Cm)},max:function(e,r,n){return ds(e,r,n,-1/0,uB)}};wi["squared-euclidean"]=wi.squaredEuclidean;wi.squaredeuclidean=wi.squaredEuclidean;cB=Zt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),eh=function(e){return cB(e)},Ul=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(f){return n[f]}:function(f){return a[f](n)},l=function(d){return a[d](r)},u=n,c=r;return nu(e,a.length,o,l,u,c)},hf=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,s[u]=e.max(n[u]).value;for(var c=0;c<r;c++){l=[];for(var f=0;f<a;f++)l[f]=Math.random()*(s[f]-i[f])+i[f];o[c]=l}return o},J0=function(e,r,n,a,i){for(var s=1/0,o=0,l=0;l<r.length;l++){var u=Ul(n,e,r[l],a,i);u<s&&(s=u,o=l)}return o},eb=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},fB=function(e,r,n){return Math.abs(r-e)<=n},dB=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},hB=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},km=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];hB(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},Am=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Ul("manhattan",r[i],e,n,"kMedoids");return a},vB=function(e){var r=this.cy(),n=this.nodes(),a=null,i=eh(e),s=new Array(i.k),o={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=hf(n,i.k,i.attributes)):Vt(i.testCentroids)==="object"?l=i.testCentroids:l=hf(n,i.k,i.attributes):l=hf(n,i.k,i.attributes);for(var u=!0,c=0;u&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],o[a.id()]=J0(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var d=0;d<i.k;d++){var h=eb(d,n,o);if(h.length!==0){for(var v=i.attributes.length,p=l[d],g=new Array(v),m=new Array(v),y=0;y<v;y++){m[y]=0;for(var b=0;b<h.length;b++)a=h[b],m[y]+=i.attributes[y](a);g[y]=m[y]/h.length,fB(g[y],p[y],i.sensitivityThreshold)||(u=!0)}l[d]=g,s[d]=r.collection(h)}}c++}return s},gB=function(e){var r=this.cy(),n=this.nodes(),a=null,i=eh(e),s=new Array(i.k),o,l={},u,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Vt(i.testCentroids)==="object"?o=i.testCentroids:o=km(n,i.k)):o=km(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],l[a.id()]=J0(a,o,i.distance,i.attributes,"kMedoids");f=!1;for(var v=0;v<o.length;v++){var p=eb(v,n,l);if(p.length!==0){c[v]=Am(o[v],p,i.attributes);for(var g=0;g<p.length;g++)u=Am(p[g],p,i.attributes),u<c[v]&&(c[v]=u,o[v]=p[g],f=!0);s[v]=r.collection(p)}}d++}return s},pB=function(e,r,n,a,i){for(var s,o,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){s=0,o=0;for(var d=0;d<r.length;d++)s+=a[d][c]*i.attributes[f](r[d]),o+=a[d][c];e[c][f]=s/o}},mB=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,l,u,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){o=0;for(var h=0;h<n.length;h++)l=Ul(i.distance,a[d],n[f],i.attributes,"cmeans"),u=Ul(i.distance,a[d],n[h],i.attributes,"cmeans"),o+=Math.pow(l/u,c);e[d][f]=1/o}},yB=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,l,u=0;u<r.length;u++){o=-1/0,l=-1;for(var c=0;c<r[0].length;c++)r[u][c]>o&&(o=r[u][c],l=c);i[l].push(e[u])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},Pm=function(e){var r=this.cy(),n=this.nodes(),a=eh(e),i,s,o,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var h=0,v=0;v<a.k;v++)o[d][v]=Math.random(),h+=o[d][v];for(var p=0;p<a.k;p++)o[d][p]=o[d][p]/h}s=new Array(a.k);for(var g=0;g<a.k;g++)s[g]=new Array(a.attributes.length);u=new Array(n.length);for(var m=0;m<n.length;m++)u[m]=new Array(a.k);for(var y=!0,b=0;y&&b<a.maxIterations;)y=!1,pB(s,n,o,u,a),mB(o,l,s,n,a),dB(o,l,a.sensitivityThreshold)||(y=!0),b++;return i=yB(n,o,a,r),{clusters:i,degreeOfMembership:o}},bB={kMeans:vB,kMedoids:gB,fuzzyCMeans:Pm,fcm:Pm},xB=Zt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),wB={single:"min",complete:"max"},EB=function(e){var r=xB(e),n=wB[r.linkage];return n!=null&&(r.linkage=n),r},Mm=function(e,r,n,a,i){for(var s=0,o=1/0,l,u=i.attributes,c=function(k,P){return nu(i.distance,u.length,function(A){return u[A](k)},function(A){return u[A](P)},k,P)},f=0;f<e.length;f++){var d=e[f].key,h=n[d][a[d]];h<o&&(s=d,o=h)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=r[s],p=r[a[s]],g;i.mode==="dendrogram"?g={left:v,right:p,key:v.key}:g={value:v.value.concat(p.value),key:v.key},e[v.index]=g,e.splice(p.index,1),r[v.key]=g;for(var m=0;m<e.length;m++){var y=e[m];v.key===y.key?l=1/0:i.linkage==="min"?(l=n[v.key][y.key],n[v.key][y.key]>n[p.key][y.key]&&(l=n[p.key][y.key])):i.linkage==="max"?(l=n[v.key][y.key],n[v.key][y.key]<n[p.key][y.key]&&(l=n[p.key][y.key])):i.linkage==="mean"?l=(n[v.key][y.key]*v.size+n[p.key][y.key]*p.size)/(v.size+p.size):i.mode==="dendrogram"?l=c(y.value,v.value):l=c(y.value[0],v.value[0]),n[v.key][y.key]=n[y.key][v.key]=l}for(var b=0;b<e.length;b++){var x=e[b].key;if(a[x]===v.key||a[x]===p.key){for(var E=x,S=0;S<e.length;S++){var w=e[S].key;n[x][w]<n[x][E]&&(E=w)}a[x]=E}e[b].index=b}return v.key=p.key=v.index=p.index=null,!0},vi=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&vi(e.left,r),e.right&&vi(e.right,r)))},kd=function(e,r){if(!e)return"";if(e.left&&e.right){var n=kd(e.left,r),a=kd(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Ad=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&vi(e.left,a),e.right&&vi(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&vi(e.left,a),e.right&&vi(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Ad(e.left,r-1,n)),e.right&&(i=Ad(e.right,r-1,n)),a.concat(i))},Dm=function(e){for(var r=this.cy(),n=this.nodes(),a=EB(e),i=a.attributes,s=function(b,x){return nu(a.distance,i.length,function(E){return i[E](b)},function(E){return i[E](x)},b,x)},o=[],l=[],u=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=d,c[f]=d,l[f]=[],u[f]=0}for(var h=0;h<o.length;h++)for(var v=0;v<=h;v++){var p=void 0;a.mode==="dendrogram"?p=h===v?1/0:s(o[h].value,o[v].value):p=h===v?1/0:s(o[h].value[0],o[v].value[0]),l[h][v]=p,l[v][h]=p,p<l[h][u[h]]&&(u[h]=v)}for(var g=Mm(o,c,l,u,a);g;)g=Mm(o,c,l,u,a);var m;return a.mode==="dendrogram"?(m=Ad(o[0],a.dendrogramDepth,r),a.addDendrogram&&kd(o[0],r)):(m=new Array(o.length),o.forEach(function(y,b){y.key=y.index=null,m[b]=r.collection(y.value)})),m},_B={hierarchicalClustering:Dm,hca:Dm},SB=Zt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),CB=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||St("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ue(n)||St("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),SB(e)},TB=function(e,r,n,a){var i=function(o,l){return a[l](o)};return-nu(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},kB=function(e,r){var n=null;return r==="median"?n=CO(e):r==="mean"?n=SO(e):r==="min"?n=EO(e):r==="max"?n=_O(e):n=r,n},AB=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Lm=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>o&&(s=u,o=r[i*e+u])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},PB=function(e,r,n){for(var a=Lm(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var l=-1,u=-1/0,c=0;c<s.length;c++){for(var f=0,d=0;d<s.length;d++)f+=r[s[d]*e+s[c]];f>u&&(l=c,u=f)}n[i]=s[l]}return a=Lm(e,r,n),a},Rm=function(e){for(var r=this.cy(),n=this.nodes(),a=CB(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,l,u,c,f,d;o=n.length,l=o*o,u=new Array(l);for(var h=0;h<l;h++)u[h]=-1/0;for(var v=0;v<o;v++)for(var p=0;p<o;p++)v!==p&&(u[v*o+p]=TB(a.distance,n[v],n[p],a.attributes));c=kB(u,a.preference);for(var g=0;g<o;g++)u[g*o+g]=c;f=new Array(l);for(var m=0;m<l;m++)f[m]=0;d=new Array(l);for(var y=0;y<l;y++)d[y]=0;for(var b=new Array(o),x=new Array(o),E=new Array(o),S=0;S<o;S++)b[S]=0,x[S]=0,E[S]=0;for(var w=new Array(o*a.minIterations),T=0;T<w.length;T++)w[T]=0;var k;for(k=0;k<a.maxIterations;k++){for(var P=0;P<o;P++){for(var A=-1/0,C=-1/0,_=-1,R=0,L=0;L<o;L++)b[L]=f[P*o+L],R=d[P*o+L]+u[P*o+L],R>=A?(C=A,A=R,_=L):R>C&&(C=R);for(var O=0;O<o;O++)f[P*o+O]=(1-a.damping)*(u[P*o+O]-A)+a.damping*b[O];f[P*o+_]=(1-a.damping)*(u[P*o+_]-C)+a.damping*b[_]}for(var D=0;D<o;D++){for(var I=0,F=0;F<o;F++)b[F]=d[F*o+D],x[F]=Math.max(0,f[F*o+D]),I+=x[F];I-=x[D],x[D]=f[D*o+D],I+=x[D];for(var z=0;z<o;z++)d[z*o+D]=(1-a.damping)*Math.min(0,I-x[z])+a.damping*b[z];d[D*o+D]=(1-a.damping)*(I-x[D])+a.damping*b[D]}for(var q=0,N=0;N<o;N++){var U=d[N*o+N]+f[N*o+N]>0?1:0;w[k%a.minIterations*o+N]=U,q+=U}if(q>0&&(k>=a.minIterations-1||k==a.maxIterations-1)){for(var Y=0,$=0;$<o;$++){E[$]=0;for(var j=0;j<a.minIterations;j++)E[$]+=w[j*o+$];(E[$]===0||E[$]===a.minIterations)&&Y++}if(Y===o)break}}for(var te=AB(o,f,d),oe=PB(o,u,te),ee={},V=0;V<te.length;V++)ee[te[V]]=[];for(var W=0;W<n.length;W++){var H=i[n[W].id()],Q=oe[H];Q!=null&&ee[Q].push(n[W])}for(var se=new Array(te.length),ve=0;ve<te.length;ve++)se[ve]=r.collection(ee[te[ve]]);return se},MB={affinityPropagation:Rm,ap:Rm},DB=Zt({root:void 0,directed:!1}),LB={hierholzer:function(e){if(!et(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=DB(e),a=n.root,i=n.directed,s=this,o=!1,l,u,c;a&&(c=Ae(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?s.forEach(function(y){var b=y.id();if(y.isNode()){var x=y.indegree(!0),E=y.outdegree(!0),S=x-E,w=E-x;S==1?l?o=!0:l=b:w==1?u?o=!0:u=b:(w>1||S>1)&&(o=!0),f[b]=[],y.outgoers().forEach(function(T){T.isEdge()&&f[b].push(T.id())})}else d[b]=[void 0,y.target().id()]}):s.forEach(function(y){var b=y.id();if(y.isNode()){var x=y.degree(!0);x%2&&(l?u?o=!0:u=b:l=b),f[b]=[],y.connectedEdges().forEach(function(E){return f[b].push(E.id())})}else d[b]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(o)return h;if(u&&l)if(i){if(c&&u!=c)return h;c=u}else{if(c&&u!=c&&l!=c)return h;c||(c=u)}else c||(c=s[0].id());var v=function(b){for(var x=b,E=[b],S,w,T;f[x].length;)S=f[x].shift(),w=d[S][0],T=d[S][1],x!=T?(f[T]=f[T].filter(function(k){return k!=S}),x=T):!i&&x!=w&&(f[w]=f[w].filter(function(k){return k!=S}),x=w),E.unshift(S),E.unshift(x);return E},p=[],g=[];for(g=v(c);g.length!=1;)f[g[0]].length==0?(p.unshift(s.getElementById(g.shift())),p.unshift(s.getElementById(g.shift()))):g=v(g.shift()).concat(g);p.unshift(s.getElementById(g.shift()));for(var m in f)if(f[m].length)return h;return h.found=!0,h.trail=this.spawn(p,!0),h}},bl=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},l=function(d,h){for(var v=s.length-1,p=[],g=e.spawn();s[v].x!=d||s[v].y!=h;)p.push(s.pop().edge),v--;p.push(s.pop().edge),p.forEach(function(m){var y=m.connectedNodes().intersection(e);g.merge(m),y.forEach(function(b){var x=b.id(),E=b.connectedEdges().intersection(e);g.merge(b),r[x].cutVertex?g.merge(E.filter(function(S){return S.isLoop()})):g.merge(E)})}),i.push(g)},u=function(d,h,v){d===v&&(a+=1),r[h]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(h).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(h)));else{var g,m,y,b;p.forEach(function(x){g=x.source().id(),m=x.target().id(),y=g===h?m:g,y!==v&&(b=x.id(),o[b]||(o[b]=!0,s.push({x:h,y,edge:x})),y in r?r[h].low=Math.min(r[h].low,r[y].id):(u(d,y,h),r[h].low=Math.min(r[h].low,r[y].low),r[h].id<=r[y].low&&(r[h].cutVertex=!0,l(h,y))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,u(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},RB={hopcroftTarjanBiconnected:bl,htbc:bl,htb:bl,hopcroftTarjanBiconnectedComponents:bl},xl=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(p){var g=p.target().id();g!==u&&(g in r||o(g),r[g].explored||(r[u].low=Math.min(r[u].low,r[g].low)))}),r[u].index===r[u].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[u].index,r[d].explored=!0,d===u)break}var h=f.edgesWith(f),v=f.merge(h);a.push(v),s=s.difference(v)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||o(u)}}),{cut:s,components:a}},OB={tarjanStronglyConnected:xl,tsc:xl,tscc:xl,tarjanStronglyConnectedComponents:xl},tb={};[ks,cO,fO,hO,gO,mO,xO,YO,mi,yi,Td,sB,bB,_B,MB,LB,RB,OB].forEach(function(t){Le(tb,t)});rb=0,nb=1,ab=2,Ir=function(e){if(!(this instanceof Ir))return new Ir(e);this.id="Thenable/1.0.7",this.state=rb,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ir.prototype={fulfill:function(e){return Om(this,nb,"fulfillValue",e)},reject:function(e){return Om(this,ab,"rejectReason",e)},then:function(e,r){var n=this,a=new Ir;return n.onFulfilled.push(Im(e,a,"fulfill")),n.onRejected.push(Im(r,a,"reject")),ib(n),a.proxy}};Om=function(e,r,n,a){return e.state===rb&&(e.state=r,e[n]=a,ib(e)),e},ib=function(e){e.state===nb?Bm(e,"onFulfilled",e.fulfillValue):e.state===ab&&Bm(e,"onRejected",e.rejectReason)},Bm=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Im=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}sb(r,i)}}},sb=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Vt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):sb(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Ir.all=function(t){return new Ir(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var l=t[o],u=l!=null&&l.then!=null;if(u)l.then(function(f){i(o,f)},function(f){r(f)});else{var c=l;i(o,c)}})(s)})};Ir.resolve=function(t){return new Ir(function(e,r){e(t)})};Ir.reject=function(t){return new Ir(function(e,r){r(t)})};Si=typeof Promise!="undefined"?Promise:Ir,Pd=function(e,r,n){var a=Gd(e),i=!a,s=this._private=Le({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&kt(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var l=e.pan();s.startPan={x:l.x,y:l.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},Pa=Pd.prototype;Le(Pa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),pr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Si(function(a,i){n.push(function(){a()})})}});Pa.complete=Pa.completed;Pa.run=Pa.play;Pa.running=Pa.playing;BB={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,l=!i,u=!l;if(!o.styleEnabled())return this;var c=o.style();r=Le({},r,n);var f=Object.keys(r).length===0;if(f)return new Pd(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var d=r.renderedPosition,h=o.pan(),v=o.zoom();r.position=U0(d,v,h)}if(l&&r.panBy!=null){var p=r.panBy,g=o.pan();r.pan={x:g.x+p.x,y:g.y+p.y}}var m=r.center||r.centre;if(l&&m!=null){var y=o.getCenterPan(m.eles,r.zoom);y!=null&&(r.pan=y)}if(l&&r.fit!=null){var b=r.fit,x=o.getFitViewport(b.eles||b.boundingBox,b.padding);x!=null&&(r.pan=x.pan,r.zoom=x.zoom)}if(l&&et(r.zoom)){var E=o.getZoomedViewport(r.zoom);E!=null?(E.zoomed&&(r.zoom=E.zoom),E.panned&&(r.pan=E.pan)):r.zoom=null}return new Pd(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=Le({},r,n));for(var l=0;l<s.length;l++){var u=s[l],c=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<s.length;l++){for(var u=s[l],c=u._private,f=c.animation.current,d=0;d<f.length;d++){var h=f[d],v=h._private;n&&(v.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}};vI=hI(),gI=qs(vI);EI=wI(),_I=qs(EI);TI=CI(),kI=qs(TI),AI={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Le({},r,e),function(a,i){var s=e,o=this,l=o.length!==void 0,u=l?o:[o],c=l?o[0]:o;if(Ae(a)){var f=a.indexOf(".")!==-1,d=f&&kI(a);if(s.allowGetting&&i===void 0){var h;return c&&(s.beforeGet(c),d&&c._private[s.field][a]===void 0?h=gI(c._private[s.field],d):h=c._private[s.field][a]),h}else if(s.allowSetting&&i!==void 0){var v=!s.immutableKeys[a];if(v){var p=T0({},a,i);s.beforeSet(o,p);for(var g=0,m=u.length;g<m;g++){var y=u[g];s.canSet(y)&&(d&&c._private[s.field][a]===void 0?_I(y._private[s.field],d,i):y._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&et(a)){var b=a,x,E,S=Object.keys(b);s.beforeSet(o,b);for(var w=0;w<S.length;w++){x=S[w],E=b[x];var T=!s.immutableKeys[x];if(T)for(var k=0;k<u.length;k++){var P=u[k];s.canSet(P)&&(P._private[s.field][x]=E)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&kt(a)){var A=a;o.on(s.bindingEvent,A)}else if(s.allowGetting&&a===void 0){var C;return c&&(s.beforeGet(c),C=c._private[s.field]),C}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Le({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,l=o?s:[s];if(Ae(a)){for(var u=a.split(/\s+/),c=u.length,f=0;f<c;f++){var d=u[f];if(!Gn(d)){var h=!i.immutableKeys[d];if(h)for(var v=0,p=l.length;v<p;v++)l[v]._private[i.field][d]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var g=0,m=l.length;g<m;g++)for(var y=l[g]._private[i.field],b=Object.keys(y),x=0;x<b.length;x++){var E=b[x],S=!i.immutableKeys[E];S&&(y[E]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},PI={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new Si(function(o,l){var u=function(h){i.off.apply(i,f),o(h)},c=s.concat([u]),f=c.concat([]);i.on.apply(i,c)})}}},it={};[BB,AI,PI].forEach(function(t){Le(it,t)});MI={animate:it.animate(),animation:it.animation(),animated:it.animated(),clearQueue:it.clearQueue(),delay:it.delay(),delayAnimation:it.delayAnimation(),stop:it.stop()},Dl={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(v){return n.push(v)}),n}else dt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new _i(e),s=0;s<r.length;s++){for(var o=r[s],l=o._private,u=l.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=u.has(d);if(!h){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){dt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var l=n[s],u=l._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=u.has(d),v=!1;r||a&&!h?(u.add(d),v=!0):(!r||a&&h)&&(u.delete(d),v=!0),!c&&v&&(i.push(l),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Dl.className=Dl.classNames=Dl.classes;Je={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:zt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Je.variable="(?:[\\w-.]|(?:\\\\"+Je.metaChar+"))+";Je.className="(?:[\\w-]|(?:\\\\"+Je.metaChar+"))+";Je.value=Je.string+"|"+Je.number;Je.id=Je.variable;(function(){var t,e,r;for(t=Je.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Je.comparatorOp+="|@"+e;for(t=Je.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Je.comparatorOp+="|\\!"+e)})();lt=function(){return{checks:[]}},ye={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Md=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return AR(t.selector,e.selector)}),DI=function(){for(var t={},e,r=0;r<Md.length;r++)e=Md[r],t[e.selector]=e.matches;return t}(),LI=function(e,r){return DI[e](r)},RI="("+Md.map(function(t){return t.selector}).join("|")+")",ii=function(e){return e.replace(new RegExp("\\\\("+Je.metaChar+")","g"),function(r,n){return n})},qn=function(e,r,n){e[e.length-1]=n},Dd=[{name:"group",query:!0,regex:"("+Je.group+")",populate:function(e,r,n){var a=It(n,1),i=a[0];r.checks.push({type:ye.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:RI,populate:function(e,r,n){var a=It(n,1),i=a[0];r.checks.push({type:ye.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Je.id+")",populate:function(e,r,n){var a=It(n,1),i=a[0];r.checks.push({type:ye.ID,value:ii(i)})}},{name:"className",query:!0,regex:"\\.("+Je.className+")",populate:function(e,r,n){var a=It(n,1),i=a[0];r.checks.push({type:ye.CLASS,value:ii(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Je.variable+")\\s*\\]",populate:function(e,r,n){var a=It(n,1),i=a[0];r.checks.push({type:ye.DATA_EXIST,field:ii(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Je.variable+")\\s*("+Je.comparatorOp+")\\s*("+Je.value+")\\s*\\]",populate:function(e,r,n){var a=It(n,3),i=a[0],s=a[1],o=a[2],l=new RegExp("^"+Je.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:ye.DATA_COMPARE,field:ii(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Je.boolOp+")\\s*("+Je.variable+")\\s*\\]",populate:function(e,r,n){var a=It(n,2),i=a[0],s=a[1];r.checks.push({type:ye.DATA_BOOL,field:ii(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Je.meta+")\\s*("+Je.comparatorOp+")\\s*("+Je.number+")\\s*\\]\\]",populate:function(e,r,n){var a=It(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:ye.META_COMPARE,field:ii(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Je.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=lt();return o}},{name:"directedEdge",separator:!0,regex:Je.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=lt(),a=r,i=lt();return n.checks.push({type:ye.DIRECTED_EDGE,source:a,target:i}),qn(e,r,n),e.edgeCount++,i}else{var s=lt(),o=r,l=lt();return s.checks.push({type:ye.NODE_SOURCE,source:o,target:l}),qn(e,r,s),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Je.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=lt(),a=r,i=lt();return n.checks.push({type:ye.UNDIRECTED_EDGE,nodes:[a,i]}),qn(e,r,n),e.edgeCount++,i}else{var s=lt(),o=r,l=lt();return s.checks.push({type:ye.NODE_NEIGHBOR,node:o,neighbor:l}),qn(e,r,s),l}}},{name:"child",separator:!0,regex:Je.child,populate:function(e,r){if(e.currentSubject==null){var n=lt(),a=lt(),i=e[e.length-1];return n.checks.push({type:ye.CHILD,parent:i,child:a}),qn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=lt(),o=e[e.length-1],l=lt(),u=lt(),c=lt(),f=lt();return s.checks.push({type:ye.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ye.TRUE}],f.checks.push({type:ye.TRUE}),l.checks.push({type:ye.PARENT,parent:f,child:c}),qn(e,o,s),e.currentSubject=u,e.compoundCount++,c}else{var d=lt(),h=lt(),v=[{type:ye.PARENT,parent:d,child:h}];return d.checks=r.checks,r.checks=v,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Je.descendant,populate:function(e,r){if(e.currentSubject==null){var n=lt(),a=lt(),i=e[e.length-1];return n.checks.push({type:ye.DESCENDANT,ancestor:i,descendant:a}),qn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=lt(),o=e[e.length-1],l=lt(),u=lt(),c=lt(),f=lt();return s.checks.push({type:ye.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ye.TRUE}],f.checks.push({type:ye.TRUE}),l.checks.push({type:ye.ANCESTOR,ancestor:f,descendant:c}),qn(e,o,s),e.currentSubject=u,e.compoundCount++,c}else{var d=lt(),h=lt(),v=[{type:ye.ANCESTOR,ancestor:d,descendant:h}];return d.checks=r.checks,r.checks=v,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Je.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return st("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ye.DIRECTED_EDGE?a.type=ye.NODE_TARGET:i===ye.UNDIRECTED_EDGE&&(a.type=ye.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Dd.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});OI=function(e){for(var r,n,a,i=0;i<Dd.length;i++){var s=Dd[i],o=s.name,l=e.match(s.regexObj);if(l!=null){n=l,r=s,a=o;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},BI=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},II=function(e){var r=this,n=r.inputText=e,a=r[0]=lt();for(r.length=1,n=BI(n);;){var i=OI(n);if(i.expr==null)return st("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0)return st("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return st("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&st("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},qI=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c==null?"":c},r=function(c){return Ae(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,h=c.value;switch(d){case ye.GROUP:{var v=e(h);return v.substring(0,v.length-1)}case ye.DATA_COMPARE:{var p=c.field,g=c.operator;return"["+p+n(e(g))+r(h)+"]"}case ye.DATA_BOOL:{var m=c.operator,y=c.field;return"["+e(m)+y+"]"}case ye.DATA_EXIST:{var b=c.field;return"["+b+"]"}case ye.META_COMPARE:{var x=c.operator,E=c.field;return"[["+E+n(e(x))+r(h)+"]]"}case ye.STATE:return h;case ye.ID:return"#"+h;case ye.CLASS:return"."+h;case ye.PARENT:case ye.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case ye.ANCESTOR:case ye.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case ye.COMPOUND_SPLIT:{var S=i(c.left,f),w=i(c.subject,f),T=i(c.right,f);return S+(S.length>0?" ":"")+w+T}case ye.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,h,v){return d+(f===c&&v===0?"$":"")+a(h,f)},"")},s="",o=0;o<this.length;o++){var l=this[o];s+=i(l,l.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},FI={parse:II,toString:qI},db=function(e,r,n){var a,i=Ae(e),s=ue(e),o=Ae(n),l,u,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||o||c)&&(l=!i&&!s?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},NI=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},zI=function(e){return e!==void 0},nh=function(e,r){return e.data(r)},VI=function(e,r){return e[r]()},At=[],yt=function(e,r){return e.checks.every(function(n){return At[n.type](n,r)})};At[ye.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};At[ye.STATE]=function(t,e){var r=t.value;return LI(r,e)};At[ye.ID]=function(t,e){var r=t.value;return e.id()===r};At[ye.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};At[ye.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return db(VI(e,r),n,a)};At[ye.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return db(nh(e,r),n,a)};At[ye.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return NI(nh(e,r),n)};At[ye.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,zI(nh(e,r))};At[ye.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return yt(r,a)&&yt(n,i)||yt(n,a)&&yt(r,i)};At[ye.NODE_NEIGHBOR]=function(t,e){return yt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&yt(t.neighbor,r)})};At[ye.DIRECTED_EDGE]=function(t,e){return yt(t.source,e.source())&&yt(t.target,e.target())};At[ye.NODE_SOURCE]=function(t,e){return yt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&yt(t.target,r)})};At[ye.NODE_TARGET]=function(t,e){return yt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&yt(t.source,r)})};At[ye.CHILD]=function(t,e){return yt(t.child,e)&&yt(t.parent,e.parent())};At[ye.PARENT]=function(t,e){return yt(t.parent,e)&&e.children().some(function(r){return yt(t.child,r)})};At[ye.DESCENDANT]=function(t,e){return yt(t.descendant,e)&&e.ancestors().some(function(r){return yt(t.ancestor,r)})};At[ye.ANCESTOR]=function(t,e){return yt(t.ancestor,e)&&e.descendants().some(function(r){return yt(t.descendant,r)})};At[ye.COMPOUND_SPLIT]=function(t,e){return yt(t.subject,e)&&yt(t.left,e)&&yt(t.right,e)};At[ye.TRUE]=function(){return!0};At[ye.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};At[ye.FILTER]=function(t,e){var r=t.value;return r(e)};WI=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ye.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(yt(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},HI=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(yt(a,e))return!0}return!1},GI={matches:HI,filter:WI},Yn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ae(e)&&e.match(/^\s*$/)||(pr(e)?this.addQuery({checks:[{type:ye.COLLECTION,value:e.collection()}]}):kt(e)?this.addQuery({checks:[{type:ye.FILTER,value:e}]}):Ae(e)?this.parse(e)||(this.invalid=!0):St("A selector must be created from a string; found "))},jn=Yn.prototype;[FI,GI].forEach(function(t){return Le(jn,t)});jn.text=function(){return this.inputText};jn.size=function(){return this.length};jn.eq=function(t){return this[t]};jn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};jn.addQuery=function(t){this[this.length++]=t};jn.selector=jn.toString;Wn={allAre:function(e){var r=new Yn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Yn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Wn.allAreNeighbours=Wn.allAreNeighbors;Wn.has=Wn.contains;Wn.equal=Wn.equals=Wn.same;kr=function(e,r){return function(a,i,s,o){var l=a,u=this,c;if(l==null?c="":pr(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,d=f.traversalCache=f.traversalCache||{},h=d[r]=d[r]||[],v=ka(c),p=h[v];return p||(h[v]=e.call(u,a,i,s,o))}else return e.call(u,a,i,s,o)}},Ei={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:kr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};Ei.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ah(this,t,e,hb)};Ei.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ah(this,t,e,vb)};Ei.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ah(this,t,e,UI)};Ei.ancestors=Ei.parents;Ms=gb={data:it.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:it.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:it.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:it.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:it.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:it.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Ms.attr=Ms.data;Ms.removeAttr=Ms.removeData;$I=gb,lu={};Le(lu,{degree:fd(function(t,e){return e.source().same(e.target())?2:1}),indegree:fd(function(t,e){return e.target().same(t)?1:0}),outdegree:fd(function(t,e){return e.source().same(t)?1:0})});Le(lu,{minDegree:si("degree",function(t,e){return t<e}),maxDegree:si("degree",function(t,e){return t>e}),minIndegree:si("indegree",function(t,e){return t<e}),maxIndegree:si("indegree",function(t,e){return t>e}),minOutdegree:si("outdegree",function(t,e){return t<e}),maxOutdegree:si("outdegree",function(t,e){return t>e})});Le(lu,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});mb=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Oy={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){mb(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Br=pb={position:it.data(Oy),silentPosition:it.data(Le({},Oy,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){mb(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(et(e))r?this.silentPosition(e):this.position(e);else if(kt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(et(e)?(a={x:ue(e.x)?e.x:0,y:ue(e.y)?e.y:0},n=r):Ae(e)&&ue(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),u={x:l.x+a.x,y:l.y+a.y};n?o.silentPosition(u):o.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return et(e)?this.shift(e,!0):Ae(e)&&ue(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=et(e)?e:void 0,l=o!==void 0||r!==void 0&&Ae(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];r!==void 0?c.position(e,(r-s[e])/i):o!==void 0&&c.position(U0(o,i,s))}else{var f=n.position();return o=ru(f,i,s),e===void 0?o:o[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=et(e)?e:void 0,s=i!==void 0||r!==void 0&&Ae(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var l=0;l<this.length;l++){var u=this[l],c=o?u.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var h=d?c.position():{x:0,y:0};r!==void 0?u.position(e,r+h[e]):i!==void 0&&u.position({x:i.x+h.x,y:i.y+h.y})}else{var v=n.position(),p=o?n.parent():null,g=p&&p.length>0,m=g;g&&(p=p[0]);var y=m?p.position():{x:0,y:0};return i={x:v.x-y.x,y:v.y-y.y},e===void 0?i:i[e]}else if(!s)return;return this}};Br.modelPosition=Br.point=Br.position;Br.modelPositions=Br.points=Br.positions;Br.renderedPoint=Br.renderedPosition;Br.relativePoint=Br.relativePosition;YI=pb;bi=Qn={};Qn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:l,w:s-i,h:l-o}};Qn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Qn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,l=s.children(),u=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function h(k,P,A){var C=0,_=0,R=P+A;return k>0&&R>0&&(C=P/R*k,_=A/R*k),{biasDiff:C,biasComplementDiff:_}}function v(k,P,A,C){if(A.units==="%")switch(C){case"width":return k>0?A.pfValue*k:0;case"height":return P>0?A.pfValue*P:0;case"average":return k>0&&P>0?A.pfValue*(k+P)/2:0;case"min":return k>0&&P>0?k>P?A.pfValue*P:A.pfValue*k:0;case"max":return k>0&&P>0?k>P?A.pfValue*k:A.pfValue*P:0;default:return 0}else return A.units==="px"?A.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var m=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=h(c.width.val-f.w,p,g),x=b.biasDiff,E=b.biasComplementDiff,S=h(c.height.val-f.h,m,y),w=S.biasDiff,T=S.biasComplementDiff;o.autoPadding=v(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),d.x=(-x+f.x1+f.x2+E)/2,o.autoHeight=Math.max(f.h,c.height.val),d.y=(-w+f.y1+f.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};Tr=function(e){return e===1/0||e===-1/0?0:e},Or=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Fn=function(e,r){return r==null?e:Or(e,r.x1,r.y1,r.x2,r.y2)},hs=function(e,r,n){return fr(e,r,n)},wl=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,l,u;if(o!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=l-s,f.y1=u-s,f.x2=l+s,f.y2=u+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Pl(f,1),Or(e,f.x1,f.y1,f.x2,f.y2)}}},dd=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),c=hs(s,"labelWidth",n),f=hs(s,"labelHeight",n),d=hs(s,"labelX",n),h=hs(s,"labelY",n),v=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,g=r.isEdge(),m=r.pstyle(a+"text-rotation"),y=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,x=b/2,E=r.pstyle("text-background-padding").pfValue,S=2,w=f,T=c,k=T/2,P=w/2,A,C,_,R;if(g)A=d-k,C=d+k,_=h-P,R=h+P;else{switch(l.value){case"left":A=d-T,C=d;break;case"center":A=d-k,C=d+k;break;case"right":A=d,C=d+T;break}switch(u.value){case"top":_=h-w,R=h;break;case"center":_=h-P,R=h+P;break;case"bottom":_=h,R=h+w;break}}var L=v-Math.max(y,x)-E-S,O=v+Math.max(y,x)+E+S,D=p-Math.max(y,x)-E-S,I=p+Math.max(y,x)+E+S;A+=L,C+=O,_+=D,R+=I;var F=n||"main",z=i.labelBounds,q=z[F]=z[F]||{};q.x1=A,q.y1=_,q.x2=C,q.y2=R,q.w=C-A,q.h=R-_,q.leftPad=L,q.rightPad=O,q.topPad=D,q.botPad=I;var N=g&&m.strValue==="autorotate",U=m.pfValue!=null&&m.pfValue!==0;if(N||U){var Y=N?hs(i.rstyle,"labelAngle",n):m.pfValue,$=Math.cos(Y),j=Math.sin(Y),te=(A+C)/2,oe=(_+R)/2;if(!g){switch(l.value){case"left":te=C;break;case"right":te=A;break}switch(u.value){case"top":oe=R;break;case"bottom":oe=_;break}}var ee=function(De,ke){return De=De-te,ke=ke-oe,{x:De*$-ke*j+te,y:De*j+ke*$+oe}},V=ee(A,_),W=ee(A,R),H=ee(C,_),Q=ee(C,R);A=Math.min(V.x,W.x,H.x,Q.x),C=Math.max(V.x,W.x,H.x,Q.x),_=Math.min(V.y,W.y,H.y,Q.y),R=Math.max(V.y,W.y,H.y,Q.y)}var se=F+"Rot",ve=z[se]=z[se]||{};ve.x1=A,ve.y1=_,ve.x2=C,ve.y2=R,ve.w=C-A,ve.h=R-_,Or(e,A,_,C,R),Or(i.labelBounds.all,A,_,C,R)}return e}},By=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value,i=r.pstyle("outline-offset").value,s=a+i;yb(e,r,n,s,"outside",s/2)}},yb=function(e,r,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=r.cy(),l=r.pstyle("shape").value,u=o.renderer().nodeShapes[l],c=r.position(),f=c.x,d=c.y,h=r.width(),v=r.height();if(u.hasMiterBounds){i==="center"&&(a/=2);var p=u.miterBounds(f,d,h,v,a);Fn(e,p)}else s!=null&&s>0&&Ml(e,[s,s,s,s])}},jI=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,a=r.pstyle("border-width").pfValue,i=r.pstyle("border-position").value;yb(e,r,n,a,i)}},KI=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=ar(),o=e._private,l=e.isNode(),u=e.isEdge(),c,f,d,h,v,p,g=o.rstyle,m=l&&a?e.pstyle("bounds-expansion").pfValue:[0],y=function(Ne){return Ne.pstyle("display").value!=="none"},b=!a||y(e)&&(!u||y(e.source())&&y(e.target()));if(b){var x=0,E=0;a&&r.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(E=e.pstyle("overlay-padding").value));var S=0,w=0;a&&r.includeUnderlays&&(S=e.pstyle("underlay-opacity").value,S!==0&&(w=e.pstyle("underlay-padding").value));var T=Math.max(E,w),k=0,P=0;if(a&&(k=e.pstyle("width").pfValue,P=k/2),l&&r.includeNodes){var A=e.position();v=A.x,p=A.y;var C=e.outerWidth(),_=C/2,R=e.outerHeight(),L=R/2;c=v-_,f=v+_,d=p-L,h=p+L,Or(s,c,d,f,h),a&&By(s,e),a&&r.includeOutlines&&!i&&By(s,e),a&&jI(s,e)}else if(u&&r.includeEdges)if(a&&!i){var O=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),f=Math.max(g.srcX,g.midX,g.tgtX),d=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=P,f+=P,d-=P,h+=P,Or(s,c,d,f,h),O==="haystack"){var D=g.haystackPts;if(D&&D.length===2){if(c=D[0].x,d=D[0].y,f=D[1].x,h=D[1].y,c>f){var I=c;c=f,f=I}if(d>h){var F=d;d=h,h=F}Or(s,c-P,d-P,f+P,h+P)}}else if(O==="bezier"||O==="unbundled-bezier"||Nn(O,"segments")||Nn(O,"taxi")){var z;switch(O){case"bezier":case"unbundled-bezier":z=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":z=g.linePts;break}if(z!=null)for(var q=0;q<z.length;q++){var N=z[q];c=N.x-P,f=N.x+P,d=N.y-P,h=N.y+P,Or(s,c,d,f,h)}}}else{var U=e.source(),Y=U.position(),$=e.target(),j=$.position();if(c=Y.x,f=j.x,d=Y.y,h=j.y,c>f){var te=c;c=f,f=te}if(d>h){var oe=d;d=h,h=oe}c-=P,f+=P,d-=P,h+=P,Or(s,c,d,f,h)}if(a&&r.includeEdges&&u&&(wl(s,e,"mid-source"),wl(s,e,"mid-target"),wl(s,e,"source"),wl(s,e,"target")),a){var ee=e.pstyle("ghost").value==="yes";if(ee){var V=e.pstyle("ghost-offset-x").pfValue,W=e.pstyle("ghost-offset-y").pfValue;Or(s,s.x1+V,s.y1+W,s.x2+V,s.y2+W)}}var H=o.bodyBounds=o.bodyBounds||{};xm(H,s),Ml(H,m),Pl(H,1),a&&(c=s.x1,f=s.x2,d=s.y1,h=s.y2,Or(s,c-T,d-T,f+T,h+T));var Q=o.overlayBounds=o.overlayBounds||{};xm(Q,s),Ml(Q,m),Pl(Q,1);var se=o.labelBounds=o.labelBounds||{};se.all!=null?MO(se.all):se.all=ar(),a&&r.includeLabels&&(r.includeMainLabels&&dd(s,e,null),u&&(r.includeSourceLabels&&dd(s,e,"source"),r.includeTargetLabels&&dd(s,e,"target")))}return s.x1=Tr(s.x1),s.y1=Tr(s.y1),s.x2=Tr(s.x2),s.y2=Tr(s.y2),s.w=Tr(s.x2-s.x1),s.h=Tr(s.y2-s.y1),s.w>0&&s.h>0&&b&&(Ml(s,m),Pl(s,1)),s},bb=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},xb=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return vm([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return vm([r(i.x),r(i.y)])}},Iy=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?qy:bb(r),o=s===qy;if(n.bbCache==null?(a=KI(e,Ds),n.bbCache=a,n.bbCachePosKey=xb(e)):a=n.bbCache,!o){var l=e.isNode();a=ar(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?Fn(a,n.overlayBounds):Fn(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Fn(a,n.labelBounds.all):(r.includeMainLabels&&Fn(a,n.labelBounds.mainRot),r.includeSourceLabels&&Fn(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Fn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ds={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},qy=bb(Ds),Fy=Zt(Ds);Qn.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=xi(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==xb(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Ds:t=Fy(t),e=Iy(this[0],t);else{e=ar(),t=t||Ds;var a=Fy(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<i.length;l++){var u=i[l];n(u)&&u.dirtyBoundingBoxCache(),Fn(e,Iy(u,a))}}return e.x1=Tr(e.x1),e.y1=Tr(e.y1),e.x2=Tr(e.x2),e.y2=Tr(e.y2),e.w=Tr(e.x2-e.x1),e.h=Tr(e.y2-e.y1),e};Qn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Qn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),et(t)){var i=t;t=function(){return i}}var s=function(c,f){return c._private.bbAtOldPos=t(c,f)},o=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=PO(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};bi.boundingbox=bi.bb=bi.boundingBox;bi.renderedBoundingbox=bi.renderedBoundingBox;XI=Qn;xs=Ws={};wb=function(e){e.uppercaseName=Jp(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Jp(e.outerName),xs[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},xs["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),l=n.pstyle("border-position").value,u;l==="center"?u=n.pstyle("border-width").pfValue:l==="outside"?u=2*n.pstyle("border-width").pfValue:u=0;var c=2*n.padding();return o+u+c}else return 1},xs["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},xs["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};wb({name:"width"});wb({name:"height"});Ws.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Ws.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Ws.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};ZI=Ws,QI=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},JI=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return ru(r(e),n.zoom(),n.pan())}},eq=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return ru(s,i,a)})}},tq=function(e){return e.renderer().getControlPoints(e)},rq=function(e){return e.renderer().getSegmentPoints(e)},nq=function(e){return e.renderer().getSourceEndpoint(e)},aq=function(e){return e.renderer().getTargetEndpoint(e)},iq=function(e){return e.renderer().getEdgeMidpoint(e)},Ny={controlPoints:{get:tq,mult:!0},segmentPoints:{get:rq,mult:!0},sourceEndpoint:{get:nq},targetEndpoint:{get:aq},midpoint:{get:iq}},sq=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},oq=Object.keys(Ny).reduce(function(t,e){var r=Ny[e],n=sq(e);return t[e]=function(){return QI(this,r.get)},r.mult?t[n]=function(){return eq(this,r.get)}:t[n]=function(){return JI(this,r.get)},t},{}),lq=Le({},YI,XI,ZI,oq);Eb=function(e,r){this.recycle(e,r)};Eb.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=vs,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?El:vs):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=El;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=El;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=El,this.stopPropagation()},isDefaultPrevented:vs,isPropagationStopped:vs,isImmediatePropagationStopped:vs};_b=/^([^.]+)(\.(?:[^.]+))?$/,uq=".*",Sb={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},zy=Object.keys(Sb),cq={};Kn=uu.prototype,Cb=function(e,r,n,a,i,s,o){kt(a)&&(i=a,a=null),o&&(s==null?s=o:s=Le({},s,o));for(var l=dt(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!Gn(c)){var f=c.match(_b);if(f){var d=f[1],h=f[2]?f[2]:null,v=r(e,c,d,h,a,i,s);if(v===!1)break}}}},Vy=function(e,r){return e.addEventFields(e.context,r),new Eb(r.type,r)},fq=function(e,r,n){if(mR(n)){r(e,n);return}else if(et(n)){r(e,Vy(e,n));return}for(var a=dt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!Gn(s)){var o=s.match(_b);if(o){var l=o[1],u=o[2]?o[2]:null,c=Vy(e,{type:l,namespace:u,target:e.context});r(e,c)}}}};Kn.on=Kn.addListener=function(t,e,r,n,a){return Cb(this,function(i,s,o,l,u,c,f){kt(c)&&i.listeners.push({event:s,callback:c,type:o,namespace:l,qualifier:u,conf:f})},t,e,r,n,a),this};Kn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Kn.removeListener=Kn.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=JR(this.listeners));for(var i=this.listeners,s=function(u){var c=i[u];Cb(a,function(f,d,h,v,p,g){if((c.type===h||t==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!g||c.callback===g))return i.splice(u,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};Kn.removeAllListeners=function(){return this.removeListener("*")};Kn.emit=Kn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,dt(e)||(e=[e]),fq(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var c=n[l];if(c.type===s.type&&(!c.namespace||c.namespace===s.namespace||c.namespace===uq)&&i.eventMatches(i.context,c,s)){var f=[s];e!=null&&tO(f,e),i.beforeEmit(i.context,c,s),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(v){return v!==c}));var d=i.callbackContext(i.context,c,s),h=c.callback.apply(d,f);i.afterEmit(i.context,c,s),h===!1&&(s.stopPropagation(),s.preventDefault())}},l=0;l<a;l++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};dq={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Is(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},_l=function(e){return Ae(e)?new Yn(e):e},Tb={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new uu(dq,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=_l(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=_l(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=_l(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=_l(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};it.eventAliasesOn(Tb);kb={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Ae(e)||pr(e))return new Yn(e).filter(this);if(kt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){Ae(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ae(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,l=s?i:a,u=0;u<o.length;u++){var c=o[u];l.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Ae(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],d=f._private.data.id,h=u.hasElementWithId(d);h||n.push(f)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;Ae(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,l=function(c,f,d){for(var h=0;h<c.length;h++){var v=c[h],p=v._private.data.id,g=f.hasElementWithId(p);g?i.merge(v):d.push(v)}};return l(s,o,n),l(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Ae(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Ae(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],l=o._private.data.id,u=!i.has(l);if(u){var c=this.length++;this[c]=o,i.set(l,{ele:o,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,l=this[o],u=l._private.data.id;this[o]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Ae(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],l=r?e.apply(r,[o,s,i]):e(o,s,i);l>n&&(n=l,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],l=r?e.apply(r,[o,s,i]):e(o,s,i);l<n&&(n=l,a=o)}return{value:n,ele:a}}},rt=kb;rt.u=rt["|"]=rt["+"]=rt.union=rt.or=rt.add;rt["\\"]=rt["!"]=rt["-"]=rt.difference=rt.relativeComplement=rt.subtract=rt.not;rt.n=rt["&"]=rt["."]=rt.and=rt.intersection=rt.intersect;rt["^"]=rt["(+)"]=rt["(-)"]=rt.symmetricDifference=rt.symdiff=rt.xor;rt.fnFilter=rt.filterFn=rt.stdFilter=rt.filter;rt.complement=rt.abscomp=rt.absoluteComplement;hq={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Ab=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Yd:0}var s=i(e)-i(r);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=o(e)-o(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},$l={forEach:function(e,r){if(kt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!kt(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Ab)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Yd-1}else{var i=r.source,s=r.target,o=i.zDepth(),l=s.zDepth();return Math.max(o,l,0)}}}};$l.each=$l.forEach;vq=function(){var e="undefined",r=(typeof Symbol=="undefined"?"undefined":Vt(Symbol))!=e&&Vt(Symbol.iterator)!=e;r&&($l[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return T0({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};vq();gq=Zt({nodeDimensionsIncludeLabels:!1}),Ll={layoutDimensions:function(e){e=gq(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(E){return!E.isParent()}),i=this.cy(),s=r.eles,o=function(S){return S.id()},l=xi(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(S,w,T){var k={x:w.x1+w.w/2,y:w.y1+w.h/2},P={x:(T.x-k.x)*S,y:(T.y-k.y)*S};return{x:k.x+P.x,y:k.y+P.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var S=ar(),w=0;w<a.length;w++){var T=a[w],k=l(T,w);$0(S,k.x,k.y)}return S},d=f(),h=xi(function(E,S){var w=l(E,S);if(c){var T=Math.abs(r.spacingFactor);w=u(T,d,w)}return r.transform!=null&&(w=r.transform(E,w)),w},o);if(r.animate){for(var v=0;v<a.length;v++){var p=a[v],g=h(p,v),m=r.animateFilter==null||r.animateFilter(p,v);if(m){var y=p.animation({position:g,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else p.position(g)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(h),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var x=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Si.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(h),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Le({},e,{eles:this}))}};Ll.createLayout=Ll.makeLayout=Ll.layout;Kt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i!=null?i:r?a.style().getDefaultProperty(e):null}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(et(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(Ae(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var l=s[o],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};Ci=cu("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});Kt.takesUpSpace=fu("takesUpSpace",ih({ok:Ci}));pq=cu("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Ci(t)}),mq=cu("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Ci(t)});Kt.interactive=fu("interactive",ih({ok:pq,parentOk:mq,edgeOkViaNode:Ci}));Kt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};yq=cu("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Ci(t)}),bq=Ci;Kt.visible=fu("visible",ih({ok:yq,edgeOkViaNode:bq}));Kt.hidden=function(){var t=this[0];if(t)return!t.visible()};Kt.isBundledBezier=fu("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Kt.bypass=Kt.css=Kt.style;Kt.renderedCss=Kt.renderedStyle;Kt.removeBypass=Kt.removeCss=Kt.removeStyle;Kt.pstyle=Kt.parsedStyle;Hn={};Ti({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ti({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ti({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ti({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Hn.deselect=Hn.unselect;Hn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Ti({field:"active",on:"activate",off:"unactivate"});Ti({field:"pannable",on:"panify",off:"unpanify"});Hn.inactive=function(){var t=this[0];if(t)return!t._private.active};Jt={},Hy=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var l=!1,u=o.connectedEdges(),c=0;c<u.length;c++){var f=u[c],d=f.source(),h=f.target();if(e.noIncomingEdges&&h===o&&d!==o||e.noOutgoingEdges&&d===o&&h!==o){l=!0;break}}l||i.push(o)}}return this.spawn(i,!0).filter(n)}},Gy=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),l=0;l<o.length;l++){var u=o[l],c=u.source(),f=u.target();e.outgoing&&c===s?(a.push(u),a.push(f)):e.incoming&&f===s&&(a.push(u),a.push(c))}}return this.spawn(a,!0).filter(r)}},Uy=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,l=0;l<s.length;l++){var u=s[l],c=u.id();i[c]||(i[c]=!0,a.push(u),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};Jt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Le(Jt,{roots:Hy({noIncomingEdges:!0}),leaves:Hy({noOutgoingEdges:!0}),outgoers:kr(Gy({outgoing:!0}),"outgoers"),successors:Uy({outgoing:!0}),incomers:kr(Gy({incoming:!0}),"incomers"),predecessors:Uy({})});Le(Jt,{neighborhood:kr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],l=o.source(),u=o.target(),c=a===l?u:l;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Jt.neighbourhood=Jt.neighborhood;Jt.closedNeighbourhood=Jt.closedNeighborhood;Jt.openNeighbourhood=Jt.openNeighborhood;Le(Jt,{source:kr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:kr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:$y({attr:"source"}),targets:$y({attr:"target"})});Le(Jt,{edgesWith:kr(Yy(),"edgesWith"),edgesTo:kr(Yy({thisIsSrc:!0}),"edgesTo")});Le(Jt,{connectedEdges:kr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:kr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:kr(jy(),"parallelEdges"),codirectedEdges:kr(jy({codirected:!0}),"codirectedEdges")});Le(Jt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var l=function(){var c=n.collection();s.push(c);var f=i[0];o(f,c),r.bfs({directed:!1,roots:f,visit:function(h){return o(h,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(h){r.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do l();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Jt.componentsOf=Jt.components;Xt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){St("A collection must have a reference to the core");return}var i=new hn,s=!1;if(!r)r=[];else if(r.length>0&&et(r[0])&&!Is(r[0])){s=!0;for(var o=[],l=new _i,u=0,c=r.length;u<c;u++){var f=r[u];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=H0();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var h=new tu(e,f,!1);o.push(h),l.add(d.id)}r=o}this.length=0;for(var v=0,p=r.length;v<p;v++){var g=r[v][0];if(g!=null){var m=g._private.data.id;(!n||!i.has(m))&&(n&&i.set(m,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var b=this.lazyMap=new hn,x=this.eles,E=0;E<x.length;E++){var S=x[E];b.set(S.id(),{index:E,ele:S})}}},n&&(this._private.map=i),s&&!a&&this.restore()},pt=tu.prototype=Xt.prototype=Object.create(Array.prototype);pt.instanceString=function(){return"collection"};pt.spawn=function(t,e){return new Xt(this.cy(),t,e)};pt.spawnSelf=function(){return this.spawn(this)};pt.cy=function(){return this._private.cy};pt.renderer=function(){return this._private.cy.renderer()};pt.element=function(){return this[0]};pt.collection=function(){return P0(this)?this:new Xt(this._private.cy,[this])};pt.unique=function(){return new Xt(this._private.cy,this,!0)};pt.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};pt.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new Xt(e)};pt.$id=pt.getElementById;pt.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};pt.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};pt.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};pt.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(et(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,l=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),l!=null&&l!=a.target&&(s.target=""+l,i=!0),i&&(e=e.move(s))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(p,g,m){var y=t[p];y!=null&&y!==n[p]&&(y?e[g]():e[m]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:Yr(n.data),position:Yr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(v){return d.classes+=h++===0?v:" "+v}),d}}};pt.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};pt.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new tu(t,a,!1);e.push(i)}return new Xt(t,e)};pt.copy=pt.clone;pt.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,l=0,u=r.length;l<u;l++){var c=r[l];e&&!c.removed()||(c.isNode()?i.push(c):s.push(c))}o=i.concat(s);var f,d=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var h=o[f],v=h._private,p=v.data;if(h.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=H0();else if(ue(p.id))p.id=""+p.id;else if(Gn(p.id)||!Ae(p.id)){St("Can not create element with invalid string ID `"+p.id+"`"),d();continue}else if(n.hasElementWithId(p.id)){St("Can not create second element with ID `"+p.id+"`"),d();continue}}var g=p.id;if(h.isNode()){var m=v.position;m.x==null&&(m.x=0),m.y==null&&(m.y=0)}if(h.isEdge()){for(var y=h,b=["source","target"],x=b.length,E=!1,S=0;S<x;S++){var w=b[S],T=p[w];ue(T)&&(T=p[w]=""+p[w]),T==null||T===""?(St("Can not create edge `"+g+"` with unspecified "+w),E=!0):n.hasElementWithId(T)||(St("Can not create edge `"+g+"` with nonexistant "+w+" `"+T+"`"),E=!0)}if(E){d();continue}var k=n.getElementById(p.source),P=n.getElementById(p.target);k.same(P)?k._private.edges.push(y):(k._private.edges.push(y),P._private.edges.push(y)),y._private.source=k,y._private.target=P}v.map=new hn,v.map.set(g,{ele:h,index:0}),v.removed=!1,e&&n.addToPool(h)}for(var A=0;A<i.length;A++){var C=i[A],_=C._private.data;ue(_.parent)&&(_.parent=""+_.parent);var R=_.parent,L=R!=null;if(L||C._private.parent){var O=C._private.parent?n.collection().merge(C._private.parent):n.getElementById(R);if(O.empty())_.parent=void 0;else if(O[0].removed())st("Node added with missing parent, reference to parent removed"),_.parent=void 0,C._private.parent=null;else{for(var D=!1,I=O;!I.empty();){if(C.same(I)){D=!0,_.parent=void 0;break}I=I.parent()}D||(O[0]._private.children.push(C),C._private.parent=O[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var F=o.length===r.length?r:new Xt(n,o),z=0;z<F.length;z++){var q=F[z];q.isNode()||(q.parallelEdges().clearTraversalCache(),q.source().clearTraversalCache(),q.target().clearTraversalCache())}var N;a.hasCompoundNodes?N=n.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):N=F,N.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?F.emitAndNotify("add"):e&&F.emit("add")}return r};pt.removed=function(){var t=this[0];return t&&t._private.removed};pt.inside=function(){var t=this[0];return t&&!t._private.removed};pt.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(R){for(var L=R._private.edges,O=0;O<L.length;O++)l(L[O])}function o(R){for(var L=R._private.children,O=0;O<L.length;O++)l(L[O])}function l(R){var L=a[R.id()];e&&R.removed()||L||(a[R.id()]=!0,R.isNode()?(n.push(R),s(R),o(R)):n.unshift(R))}for(var u=0,c=r.length;u<c;u++){var f=r[u];l(f)}function d(R,L){var O=R._private.edges;Un(O,L),R.clearTraversalCache()}function h(R){R.clearTraversalCache()}var v=[];v.ids={};function p(R,L){L=L[0],R=R[0];var O=R._private.children,D=R.id();Un(O,L),L._private.parent=null,v.ids[D]||(v.ids[D]=!0,v.push(R))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var g=0;g<n.length;g++){var m=n[g];if(m.isEdge()){var y=m.source()[0],b=m.target()[0];d(y,m),d(b,m);for(var x=m.parallelEdges(),E=0;E<x.length;E++){var S=x[E];h(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var w=m.parent();w.length!==0&&p(w,m)}e&&(m._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var k=0;k<T.length;k++){var P=T[k];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var A=new Xt(this.cy(),n);A.size()>0&&(t?A.emitAndNotify("remove"):e&&A.emit("remove"));for(var C=0;C<v.length;C++){var _=v[C];(!e||!_.removed())&&_.updateStyle()}return A};pt.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),l=s!=null&&e.hasElementWithId(s),u=o!=null&&e.hasElementWithId(o);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var v=r[h],p=v._private.data;v.isEdge()&&(l&&(p.source=s),u&&(p.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var h=r.remove(n,a);h.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var p=r[v],g=p._private.data;p.isNode()&&(g.parent=d)}h.restore(n,a)}),r.emitAndNotify("move")}}return this};[tb,MI,Dl,Wn,Ei,$I,lu,lq,Tb,kb,hq,$l,Ll,Kt,Hn,Jt].forEach(function(t){Le(pt,t)});xq={add:function(e){var r,n=this;if(pr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new Xt(n,i)}}else if(dt(e)){var l=e;r=new Xt(n,l)}else if(et(e)&&(dt(e.nodes)||dt(e.edges))){for(var u=e,c=[],f=["nodes","edges"],d=0,h=f.length;d<h;d++){var v=f[d],p=u[v];if(dt(p))for(var g=0,m=p.length;g<m;g++){var y=Le({group:v},p[g]);c.push(y)}}r=new Xt(n,c)}else{var b=e;r=new tu(n,b).collection()}return r},remove:function(e){if(!pr(e)){if(Ae(e)){var r=e;e=this.$(r)}}return e.remove()}};Eq=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),l=e(n,a,o),u=1/6*(i.dx+2*(s.dx+o.dx)+l.dx),c=1/6*(i.dv+2*(s.dv+o.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+c*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,d,h,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,d=s!==null,d?(u=n(a,i),h=u/s*f):h=f;v=r(v||o,h),l.push(1+v.x),u+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return d?function(p){return l[p*(l.length-1)|0]}:u}}(),gt=function(e,r,n,a){var i=wq(e,r,n,a);return function(s,o,l){return s+(o-s)*i(l)}},Rl={linear:function(e,r,n){return e+(r-e)*n},ease:gt(.25,.1,.25,1),"ease-in":gt(.42,0,1,1),"ease-out":gt(0,0,.58,1),"ease-in-out":gt(.42,0,.58,1),"ease-in-sine":gt(.47,0,.745,.715),"ease-out-sine":gt(.39,.575,.565,1),"ease-in-out-sine":gt(.445,.05,.55,.95),"ease-in-quad":gt(.55,.085,.68,.53),"ease-out-quad":gt(.25,.46,.45,.94),"ease-in-out-quad":gt(.455,.03,.515,.955),"ease-in-cubic":gt(.55,.055,.675,.19),"ease-out-cubic":gt(.215,.61,.355,1),"ease-in-out-cubic":gt(.645,.045,.355,1),"ease-in-quart":gt(.895,.03,.685,.22),"ease-out-quart":gt(.165,.84,.44,1),"ease-in-out-quart":gt(.77,0,.175,1),"ease-in-quint":gt(.755,.05,.855,.06),"ease-out-quint":gt(.23,1,.32,1),"ease-in-out-quint":gt(.86,0,.07,1),"ease-in-expo":gt(.95,.05,.795,.035),"ease-out-expo":gt(.19,1,.22,1),"ease-in-out-expo":gt(1,0,0,1),"ease-in-circ":gt(.6,.04,.98,.335),"ease-out-circ":gt(.075,.82,.165,1),"ease-in-out-circ":gt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Rl.linear;var a=Eq(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":gt};Cq={animate:it.animate(),animation:it.animation(),animated:it.animated(),clearQueue:it.clearQueue(),delay:it.delay(),delayAnimation:it.delayAnimation(),stop:it.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Vl(function(i){Zy(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){Zy(s,e)},n.beforeRenderPriorities.animations):r()}},Tq={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Is(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Sl=function(e){return Ae(e)?new Yn(e):e},Mb={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new uu(Tq,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Sl(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Sl(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Sl(r),n),this},once:function(e,r,n){return this.emitter().one(e,Sl(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};it.eventAliasesOn(Mb);Ld={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Ld.jpeg=Ld.jpg;Ol={layout:function(e){var r=this;if(e==null){St("Layout options must be specified to make a layout");return}if(e.name==null){St("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){St("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Ae(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(Le({},e,{cy:r,eles:i}));return s}};Ol.createLayout=Ol.makeLayout=Ol.layout;kq={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},Aq=Zt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Rd={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){St("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&st("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Aq(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Rd.invalidateDimensions=Rd.resize;Bl={collection:function(e,r){return Ae(e)?this.$(e):pr(e)?e.collection():dt(e)?(r||(r={}),new Xt(this,e,r.unique,r.removed)):new Xt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Bl.elements=Bl.filter=Bl.$;$t={},Es="t",Pq="f";$t.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var l=e.getContextStyle(o),u=e.applyContextStyle(o,l,s);s._private.appliedInitStyle?e.updateTransitions(s,u.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a};$t.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},l=0;l<r.length;l++){var u=r[l],c=t[l]===Es,f=e[l]===Es,d=c!==f,h=u.mappedProperties.length>0;if(d||f&&h){var v=void 0;d&&h||d?v=u.properties:h&&(v=u.mappedProperties);for(var p=0;p<v.length;p++){for(var g=v[p],m=g.name,y=!1,b=l+1;b<r.length;b++){var x=r[b],E=e[b]===Es;if(E&&(y=x.properties[g.name]!=null,y))break}!o[m]&&!y&&(o[m]=!0,s.push(m))}}}return n[a]=s,s};$t.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=Es:r+=Pq}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};$t.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===Es;if(o)for(var l=0;l<s.properties.length;l++){var u=s.properties[l];a[u.name]=u}}return n[e]=a,a};$t.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var l=a[o],u=e[l],c=r.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,d=f.fnValue=u.value(r);if(d===f.prevFnValue)continue}var h=i[l]={prev:c};n.applyParsedProperty(r,u),h.next=r.pstyle(l),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};$t.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(H,Q,se){return r.getPropertiesHash(H,Q,se)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var c=a[u];e.styleKeys[c]=[Sa,di]}for(var f=function(H,Q){return e.styleKeys[Q][0]=Cs(H,e.styleKeys[Q][0])},d=function(H,Q){return e.styleKeys[Q][1]=Ts(H,e.styleKeys[Q][1])},h=function(H,Q){f(H,Q),d(H,Q)},v=function(H,Q){for(var se=0;se<H.length;se++){var ve=H.charCodeAt(se);f(ve,Q),d(ve,Q)}},p=2e9,g=function(H){return-128<H&&H<128&&Math.floor(H)!==H?p-(H*1024|0):H},m=0;m<n.length;m++){var y=n[m],b=l[y];if(b!=null){var x=this.properties[y],E=x.type,S=x.groupKey,w=void 0;x.hashOverride!=null?w=x.hashOverride(t,b):b.pfValue!=null&&(w=b.pfValue);var T=x.enums==null?b.value:null,k=w!=null,P=T!=null,A=k||P,C=b.units;if(E.number&&A&&!E.multiple){var _=k?w:T;h(g(_),S),!k&&C!=null&&v(C,S)}else v(b.strValue,S)}}for(var R=[Sa,di],L=0;L<a.length;L++){var O=a[L],D=e.styleKeys[O];R[0]=Cs(D[0],R[0]),R[1]=Ts(D[1],R[1])}e.styleKey=UR(R[0],R[1]);var I=e.styleKeys;e.labelDimsKey=In(I.labelDimensions);var F=i(t,["label"],I.labelDimensions);if(e.labelKey=In(F),e.labelStyleKey=In(pl(I.commonLabel,F)),!o){var z=i(t,["source-label"],I.labelDimensions);e.sourceLabelKey=In(z),e.sourceLabelStyleKey=In(pl(I.commonLabel,z));var q=i(t,["target-label"],I.labelDimensions);e.targetLabelKey=In(q),e.targetLabelStyleKey=In(pl(I.commonLabel,q))}if(o){var N=e.styleKeys,U=N.nodeBody,Y=N.nodeBorder,$=N.nodeOutline,j=N.backgroundImage,te=N.compound,oe=N.pie,ee=N.stripe,V=[U,Y,$,j,te,oe,ee].filter(function(W){return W!=null}).reduce(pl,[Sa,di]);e.nodeKey=In(V),e.hasPie=oe!=null&&oe[0]!==Sa&&oe[1]!==di,e.hasStripe=ee!=null&&ee[0]!==Sa&&ee[1]!==di}return s!==e.styleKey};$t.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};$t.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,l=n.bypass,u=a[n.name],c=u&&u.bypass,f=t._private,d="mapping",h=function(U){return U==null?null:U.pfValue!=null?U.pfValue:U.value},v=function(){var U=h(u),Y=h(n);r.checkTriggers(t,n.name,U,Y)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,v(),!0):!1:(v(),!0);var p=function(){st("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var g=n.field.split("."),m=f.data,y=0;y<g.length&&m;y++){var b=g[y];m=m[b]}if(m==null)return p(),!1;var x;if(ue(m)){var E=n.fieldMax-n.fieldMin;E===0?x=0:x=(m-n.fieldMin)/E}else return st("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),o.color){var S=n.valueMin[0],w=n.valueMax[0],T=n.valueMin[1],k=n.valueMax[1],P=n.valueMin[2],A=n.valueMax[2],C=n.valueMin[3]==null?1:n.valueMin[3],_=n.valueMax[3]==null?1:n.valueMax[3],R=[Math.round(S+(w-S)*x),Math.round(T+(k-T)*x),Math.round(P+(A-P)*x),Math.round(C+(_-C)*x)];i={bypass:n.bypass,name:n.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(o.number){var L=n.valueMin+(n.valueMax-n.valueMin)*x;i=this.parse(n.name,L,n.bypass,d)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case s.data:{for(var O=n.field.split("."),D=f.data,I=0;I<O.length&&D;I++){var F=O[I];D=D[F]}if(D!=null&&(i=this.parse(n.name,D,n.bypass,d)),!i)return p(),!1;i.mapping=n,n=i;break}case s.fn:{var z=n.value,q=n.fnValue!=null?n.fnValue:z(t);if(n.prevFnValue=q,q==null)return st("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,q,n.bypass,d),!i)return st("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Yr(n),n=i;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):c?u.bypassed=n:a[n.name]=n,v(),!0};$t.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],l=a[o];l!=null&&(l.bypass?l.bypassed=null:a[o]=null)}}};$t.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};$t.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},l=!1,u=0;u<a.length;u++){var c=a[u],f=t.pstyle(c),d=e[c];if(d){var h=d.prev,v=h,p=d.next!=null?d.next:f,g=!1,m=void 0,y=1e-6;v&&(ue(v.pfValue)&&ue(p.pfValue)?(g=p.pfValue-v.pfValue,m=v.pfValue+y*g):ue(v.value)&&ue(p.value)?(g=p.value-v.value,m=v.value+y*g):dt(v.value)&&dt(p.value)&&(g=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],m=v.strValue),g&&(o[c]=p.strValue,this.applyBypass(t,c,m),l=!0))}}if(!l)return;n.transitioning=!0,new Si(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};$t.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};$t.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};$t.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};$t.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};$t.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};$t.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};Hs={};Hs.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var l=a.properties[o],u=l.name,c=this.parse(u,r,!0);c&&i.push(c)}}else if(Ae(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(et(e)){var d=e;n=r;for(var h=Object.keys(d),v=0;v<h.length;v++){var p=h[v],g=d[p];if(g===void 0&&(g=d[Jl(p)]),g!==void 0){var m=this.parse(p,g,!0);m&&i.push(m)}}}else return!1;if(i.length===0)return!1;for(var y=!1,b=0;b<t.length;b++){for(var x=t[b],E={},S=void 0,w=0;w<i.length;w++){var T=i[w];if(n){var k=x.pstyle(T.name);S=E[T.name]={prev:k}}y=this.applyParsedProperty(x,Yr(T))||y,n&&(S.next=x.pstyle(T.name))}y&&this.updateStyleHints(x),n&&this.updateTransitions(x,E,s)}return y};Hs.overrideBypass=function(t,e,r){e=Ud(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,l=s.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};Hs.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Hs.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var l=e[o],u=this.properties[l],c=i.pstyle(u.name);if(!(!c||!c.bypass)){var f="",d=this.parse(l,f,!0),h=s[u.name]={prev:c};this.applyParsedProperty(i,d),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};sh={};sh.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};sh.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};jr={};jr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};jr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[Jl(i.name)]=s)}return n}};jr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a!=null?a:t.cy().style().getDefaultProperty(e)[r][0]};jr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,l=s.units,u=s.strValue;if(r&&i.number&&o!=null&&ue(o)){var c=t.cy().zoom(),f=function(g){return g*c},d=function(g,m){return f(g)+m},h=dt(o),v=h?l.every(function(p){return p!=null}):l!=null;return v?h?o.map(function(p,g){return d(p,l[g])}).join(" "):d(o,l):h?o.map(function(p){return Ae(p)?p:""+f(p)}).join(" "):""+f(o)}else if(u!=null)return u}return null}};jr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(et(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};jr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],l=n[o],u=a[o]||a[Ud(o)],c=this.parse(u.name,l);c&&r.push(c)}return r};jr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Cs(o,n[0]),n[1]=Ts(o,n[1]);else for(s=i.strValue,u=0;u<s.length;u++)o=s.charCodeAt(u),n[0]=Cs(o,n[0]),n[1]=Ts(o,n[1]);return n};jr.getPropertiesHash=jr.getNonDefaultPropertiesHash;du={};du.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var l=s[o],u=i[l];e.css(l,u)}}return e};du.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};du.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};oh={};oh.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){st("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Yn(f);if(d.invalid){st("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var h=c[2],v=!1;i=h;for(var p=[];;){var g=i.match(/^\s*$/);if(g)break;var m=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!m){st("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}s=m[0];var y=m[1],b=m[2],x=e.properties[y];if(!x){st("Skipping property: Invalid property name in: "+s),l();continue}var E=r.parse(y,b);if(!E){st("Skipping property: Invalid property definition in: "+s),l();continue}p.push({name:y,val:b}),l()}if(v){o();break}r.selector(f);for(var S=0;S<p.length;S++){var w=p[S];r.css(w.name,w.val)}o()}return r};oh.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};Bt={};(function(){var t=zt,e=_R,r=CR,n=TR,a=kR,i=function(W){return"^"+W+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(W){var H=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+W+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+H+")\\s*\\,\\s*("+H+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Bt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(W,H){switch(W.length){case 2:return H[0]!=="deg"&&H[0]!=="rad"&&H[1]!=="deg"&&H[1]!=="rad";case 1:return Ae(W[0])||H[0]==="deg"||H[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(W){var H=W.length;return H===1||H===2||H===4}}};var l={zeroNonZero:function(W,H){return(W==null||H==null)&&W!==H||W==0&&H!=0?!0:W!=0&&H==0},any:function(W,H){return W!=H},emptyNonEmpty:function(W,H){var Q=Gn(W),se=Gn(H);return Q&&!se||!Q&&se}},u=Bt.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],h=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],v=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],p=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any},{name:"box-selection",type:u.boxSelection,triggersZOrder:l.any}],g=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(W,H,Q){return W===H?!1:Q.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],m=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],y=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],b=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],x=function(W,H){return H.value==="label"?-W.poolIndex():H.pfValue},E=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],S=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],w=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],T=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],k=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],P=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(W,H){return W===H?!1:W==="bezier"||H==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],A=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],C=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],_=[];Bt.pieBackgroundN=16,_.push({name:"pie-size",type:u.sizeMaybePercent}),_.push({name:"pie-hole",type:u.sizeMaybePercent}),_.push({name:"pie-start-angle",type:u.angle});for(var R=1;R<=Bt.pieBackgroundN;R++)_.push({name:"pie-"+R+"-background-color",type:u.color}),_.push({name:"pie-"+R+"-background-size",type:u.percent}),_.push({name:"pie-"+R+"-background-opacity",type:u.zeroOneNumber});var L=[];Bt.stripeBackgroundN=16,L.push({name:"stripe-size",type:u.sizeMaybePercent}),L.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var O=1;O<=Bt.stripeBackgroundN;O++)L.push({name:"stripe-"+O+"-background-color",type:u.color}),L.push({name:"stripe-"+O+"-background-size",type:u.percent}),L.push({name:"stripe-"+O+"-background-opacity",type:u.zeroOneNumber});var D=[],I=Bt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(V){I.forEach(function(W){var H=W+"-"+V.name,Q=V.type,se=V.triggersBounds;D.push({name:H,type:Q,triggersBounds:se})})},{});var F=Bt.properties=[].concat(p,b,g,m,y,A,v,h,c,f,d,E,S,w,T,_,L,k,P,D,C),z=Bt.propertyGroups={behavior:p,transition:b,visibility:g,overlay:m,underlay:y,ghost:A,commonLabel:v,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:E,nodeBorder:S,nodeOutline:w,backgroundImage:T,pie:_,stripe:L,compound:k,edgeLine:P,edgeArrow:D,core:C},q=Bt.propertyGroupNames={},N=Bt.propertyGroupKeys=Object.keys(z);N.forEach(function(V){q[V]=z[V].map(function(W){return W.name}),z[V].forEach(function(W){return W.groupKey=V})});var U=Bt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Bt.propertyNames=F.map(function(V){return V.name});for(var Y=0;Y<F.length;Y++){var $=F[Y];F[$.name]=$}for(var j=0;j<U.length;j++){var te=U[j],oe=F[te.pointsTo],ee={name:te.name,alias:!0,pointsTo:oe};F.push(ee),F[te.name]=ee}})();Bt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Bt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Le({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=Bt.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=Bt.stripeBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return Bt.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,d=u.value;l[f]=d}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};Bt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};hu={};hu.parse=function(t,e,r,n){var a=this;if(kt(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,l=z0(t,o,s,i),u=a.propCache=a.propCache||[],c;return(c=u[l])||(c=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Yr(c),c&&(c.value=Yr(c.value))),c};hu.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&st("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&st("The style value of `label` is deprecated for `"+a.name+"`"),a};hu.parseImpl=function(t,e,r,n){var a=this;t=Ud(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=Ae(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(kt(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var c,f;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(r)return!1;var d=o.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(r||u.multiple)return!1;var h=o.mapData;if(!(u.color||u.number))return!1;var v=this.parse(t,f[4]);if(!v||v.mapped)return!1;var p=this.parse(t,f[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return st("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+v.strValue+"`"),this.parse(t,v.strValue);if(u.color){var g=v.value,m=p.value,y=g[0]===m[0]&&g[1]===m[1]&&g[2]===m[2]&&(g[3]===m[3]||(g[3]==null||g[3]===1)&&(m[3]==null||m[3]===1));if(y)return!1}return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:p.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var b;if(l?b=e.split(/\s+/):dt(e)?b=e:b=[e],u.evenMultiple&&b.length%2!==0)return null;for(var x=[],E=[],S=[],w="",T=!1,k=0;k<b.length;k++){var P=a.parse(t,b[k],r,"multiple");T=T||Ae(P.value),x.push(P.value),S.push(P.pfValue!=null?P.pfValue:P.value),E.push(P.units),w+=(k>0?" ":"")+P.strValue}return u.validate&&!u.validate(x,E)?null:u.singleEnum&&T?x.length===1&&Ae(x[0])?{name:t,value:x[0],strValue:x[0],bypass:r}:null:{name:t,value:x,pfValue:S,strValue:w,bypass:r,units:E}}var A=function(){for(var ee=0;ee<u.enums.length;ee++){var V=u.enums[ee];if(V===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var C,_="px";if(u.units&&(C=u.units),u.implicitUnits&&(_=u.implicitUnits),!u.unitless)if(l){var R="px|em"+(u.allowPercent?"|\\%":"");C&&(R=C);var L=e.match("^("+zt+")("+R+")?$");L&&(e=L[1],C=L[2]||_)}else(!C||u.implicitUnits)&&(C=_);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=s,A();if(u.integer&&!pR(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var O={name:t,value:e,strValue:""+e+(C||""),units:C,bypass:r};return u.unitless||C!=="px"&&C!=="em"?O.pfValue=e:O.pfValue=C==="px"||!C?e:this.getEmSizeInPixels()*e,(C==="ms"||C==="s")&&(O.pfValue=C==="ms"?e:1e3*e),(C==="deg"||C==="rad")&&(O.pfValue=C==="rad"?e:TO(e)),C==="%"&&(O.pfValue=e/100),O}else if(u.propList){var D=[],I=""+e;if(I!=="none"){for(var F=I.split(/\s*,\s*|\s+/),z=0;z<F.length;z++){var q=F[z].trim();a.properties[q]?D.push(q):st("`"+q+"` is not a valid property name")}if(D.length===0)return null}return{name:t,value:D,strValue:D.length===0?"none":D.join(" "),bypass:r}}else if(u.color){var N=R0(e);return N?{name:t,value:N,pfValue:N,strValue:"rgb("+N[0]+","+N[1]+","+N[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var U=A();if(U)return U}for(var Y=u.regexes?u.regexes:[u.regex],$=0;$<Y.length;$++){var j=new RegExp(Y[$]),te=j.exec(e);if(te)return{name:t,value:u.singleRegexMatchValue?te[1]:te,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?A():null};Ut=function(e){if(!(this instanceof Ut))return new Ut(e);if(!Gd(e)){St("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},er=Ut.prototype;er.instanceString=function(){return"style"};er.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};er.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};er.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};er.selector=function(t){var e=t==="core"?null:new Yn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};er.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Jl(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};er.style=er.css;er.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};er.append=function(t){return M0(t)?t.appendToStyle(this):dt(t)?this.appendFromJson(t):Ae(t)&&this.appendFromString(t),this};Ut.fromJson=function(t,e){var r=new Ut(t);return r.fromJson(e),r};Ut.fromString=function(t,e){return new Ut(t).fromString(e)};[$t,Hs,sh,jr,du,oh,Bt,hu].forEach(function(t){Le(er,t)});Ut.types=er.types;Ut.properties=er.properties;Ut.propertyGroups=er.propertyGroups;Ut.propertyGroupNames=er.propertyGroupNames;Ut.propertyGroupKeys=er.propertyGroupKeys;Mq={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return M0(e)?r.style=e.generateStyle(this):dt(e)?r.style=Ut.fromJson(this,e):Ae(e)?r.style=Ut.fromString(this,e):r.style=Ut(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Dq="single",Ma={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=Dq),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(Ae(e[0]))return n=e[0],r[n];if(et(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,ue(s)&&(r.x=s),ue(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ue(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:et(e)&&(o=n[0],l=o.x,u=o.y,ue(l)&&(a.x+=l),ue(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&ue(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ue(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ae(e)){var a=e;e=this.$(a)}else if(bR(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else pr(e)||(e=this.mutableElements());if(!(pr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),l;if(r=ue(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((s-2*r)/n.w,(o-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(s-l*(n.x1+n.x2))/2,y:(o-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ue(e)&&ue(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ue(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ue(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),ue(e)?s=e:et(e)&&(s=e.level,e.position!=null?i=ru(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!ue(s)||s===a||i!=null&&(!ue(i.x)||!ue(i.y)))return null;if(i!=null){var l=n,u=a,c=s,f={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(ue(e.zoom)||(n=!1),et(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;ue(u.x)&&(r.pan.x=u.x,o=!1),ue(u.y)&&(r.pan.y=u.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Ae(e)){var n=e;e=this.mutableElements().filter(n)}else pr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ma.centre=Ma.center;Ma.autolockNodes=Ma.autolock;Ma.autoungrabifyNodes=Ma.autoungrabify;Ls={data:it.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:it.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:it.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:it.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ls.attr=Ls.data;Ls.removeAttr=Ls.removeData;Rs=function(e){var r=this;e=Le({},e);var n=e.container;n&&!zl(n)&&zl(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=Nt!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=Le({name:s?"grid":"null"},o.layout),o.renderer=Le({name:s?"canvas":"null"},o.renderer);var l=function(v,p,g){return p!==void 0?p:g!==void 0?g:v},u=this._private={container:n,ready:!1,options:o,elements:new Xt(this),listeners:[],aniEles:new Xt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ue(o.zoom)?o.zoom:1,pan:{x:et(o.pan)&&ue(o.pan.x)?o.pan.x:0,y:et(o.pan)&&ue(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(v,p){var g=v.some(xR);if(g)return Si.all(v).then(p);p(v)};u.styleEnabled&&r.setStyle([]);var f=Le({},o,o.renderer);r.initRenderer(f);var d=function(v,p,g){r.notifications(!1);var m=r.mutableElements();m.length>0&&m.remove(),v!=null&&(et(v)||dt(v))&&r.add(v),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",g),r.emit("done")});var y=Le({},r._private.options.layout);y.eles=r.elements(),r.layout(y).run()};c([o.style,o.elements],function(h){var v=h[0],p=h[1];u.styleEnabled&&r.style().append(v),d(p,function(){r.startAnimationLoop(),u.ready=!0,kt(o.ready)&&r.on("ready",o.ready);for(var g=0;g<i.length;g++){var m=i[g];r.on("ready",m)}a&&(a.readies=[]),r.emit("ready")},o.done)})},Yl=Rs.prototype;Le(Yl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Nt;var r=this._private.container.ownerDocument;return r===void 0||r==null?Nt:r.defaultView||Nt},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!zl(e)&&zl(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Le({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Yr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(x){return r.getElementById(x.id())};if(et(e)){if(r.startBatch(),e.elements){var s={},o=function(x,E){for(var S=[],w=[],T=0;T<x.length;T++){var k=x[T];if(!k.data.id){st("cy.json() cannot handle elements without an ID attribute");continue}var P=""+k.data.id,A=r.getElementById(P);s[P]=!0,A.length!==0?w.push({ele:A,json:k}):(E&&(k.group=E),S.push(k))}r.add(S);for(var C=0;C<w.length;C++){var _=w[C],R=_.ele,L=_.json;R.json(L)}};if(dt(e.elements))o(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];dt(f)&&o(f,c)}var d=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?d.merge(b):b.remove()}),d.forEach(function(b){return b.children().move({parent:null})}),d.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<h.length;v++){var p=h[v];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var g=!!e,m={};g?m.elements=this.elements().map(function(b){return b.json()}):(m.elements={},a.forEach(function(b){var x=b.group();m.elements[x]||(m.elements[x]=[]),m.elements[x].push(b.json())})),this._private.styleEnabled&&(m.style=r.style().json()),m.data=Yr(r.data());var y=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=Yr(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=Yr(y.renderer),m.hideEdgesOnViewport=y.hideEdgesOnViewport,m.textureOnViewport=y.textureOnViewport,m.wheelSensitivity=y.wheelSensitivity,m.motionBlur=y.motionBlur,m.multiClickDebounceTime=y.multiClickDebounceTime,m}}});Yl.$id=Yl.getElementById;[xq,Cq,Mb,Ld,Ol,kq,Rd,Bl,Mq,Ma,Ls].forEach(function(t){Le(Yl,t)});Lq={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},Rq={maximal:!1,acyclic:!1},li=function(e){return e.scratch("breadthfirst")},Qy=function(e,r){return e.scratch("breadthfirst",r)};Db.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(Ce){return Ce.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,l=ar(o?t.boundingBox:structuredClone(e.extent())),u;if(pr(t.roots))u=t.roots;else if(dt(t.roots)){for(var c=[],f=0;f<t.roots.length;f++){var d=t.roots[f],h=e.getElementById(d);c.push(h)}u=e.collection(c)}else if(Ae(t.roots))u=e.$(t.roots);else if(i)u=n.roots();else{var v=r.components();u=e.collection();for(var p=function(){var de=v[g],xe=de.maxDegree(!1),we=de.filter(function(Me){return Me.degree(!1)===xe});u=u.add(we)},g=0;g<v.length;g++)p()}var m=[],y={},b=function(de,xe){m[xe]==null&&(m[xe]=[]);var we=m[xe].length;m[xe].push(de),Qy(de,{index:we,depth:xe})},x=function(de,xe){var we=li(de),Me=we.depth,Se=we.index;m[Me][Se]=null,de.isChildless()&&b(de,xe)};a.bfs({roots:u,directed:t.directed,visit:function(de,xe,we,Me,Se){var ze=de[0],Ye=ze.id();ze.isChildless()&&b(ze,Se),y[Ye]=!0}});for(var E=[],S=0;S<n.length;S++){var w=n[S];y[w.id()]||E.push(w)}var T=function(de){for(var xe=m[de],we=0;we<xe.length;we++){var Me=xe[we];if(Me==null){xe.splice(we,1),we--;continue}Qy(Me,{depth:de,index:we})}},k=function(de,xe){for(var we=li(de),Me=de.incomers().filter(function(Re){return Re.isNode()&&r.has(Re)}),Se=-1,ze=de.id(),Ye=0;Ye<Me.length;Ye++){var Ke=Me[Ye],Xe=li(Ke);Se=Math.max(Se,Xe.depth)}if(we.depth<=Se){if(!t.acyclic&&xe[ze])return null;var Ze=Se+1;return x(de,Ze),xe[ze]=Ze,!0}return!1};if(i&&s){var P=[],A={},C=function(de){return P.push(de)},_=function(){return P.shift()};for(n.forEach(function(Ce){return P.push(Ce)});P.length>0;){var R=_(),L=k(R,A);if(L)R.outgoers().filter(function(Ce){return Ce.isNode()&&r.has(Ce)}).forEach(C);else if(L===null){st("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(t.avoidOverlap)for(var D=0;D<n.length;D++){var I=n[D],F=I.layoutDimensions(t),z=F.w,q=F.h;O=Math.max(O,z,q)}var N={},U=function(de){if(N[de.id()])return N[de.id()];for(var xe=li(de).depth,we=de.neighborhood(),Me=0,Se=0,ze=0;ze<we.length;ze++){var Ye=we[ze];if(!(Ye.isEdge()||Ye.isParent()||!n.has(Ye))){var Ke=li(Ye);if(Ke!=null){var Xe=Ke.index,Ze=Ke.depth;if(!(Xe==null||Ze==null)){var Re=m[Ze].length;Ze<xe&&(Me+=Xe/Re,Se++)}}}}return Se=Math.max(1,Se),Me=Me/Se,Se===0&&(Me=0),N[de.id()]=Me,Me},Y=function(de,xe){var we=U(de),Me=U(xe),Se=we-Me;return Se===0?L0(de.id(),xe.id()):Se};t.depthSort!==void 0&&(Y=t.depthSort);for(var $=m.length,j=0;j<$;j++)m[j].sort(Y),T(j);for(var te=[],oe=0;oe<E.length;oe++)te.push(E[oe]);var ee=function(){for(var de=0;de<$;de++)T(de)};te.length&&(m.unshift(te),$=m.length,ee());for(var V=0,W=0;W<$;W++)V=Math.max(m[W].length,V);var H={x:l.x1+l.w/2,y:l.y1+l.h/2},Q=n.reduce(function(Ce,de){return function(xe){return{w:Ce.w===-1?xe.w:(Ce.w+xe.w)/2,h:Ce.h===-1?xe.h:(Ce.h+xe.h)/2}}(de.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),se=Math.max($===1?0:o?(l.h-t.padding*2-Q.h)/($-1):(l.h-t.padding*2-Q.h)/($+1),O),ve=m.reduce(function(Ce,de){return Math.max(Ce,de.length)},0),Ne=function(de){var xe=li(de),we=xe.depth,Me=xe.index;if(t.circle){var Se=Math.min(l.w/2/$,l.h/2/$);Se=Math.max(Se,O);var ze=Se*we+Se-($>0&&m[0].length<=3?Se/2:0),Ye=2*Math.PI/m[we].length*Me;return we===0&&m[0].length===1&&(ze=1),{x:H.x+ze*Math.cos(Ye),y:H.y+ze*Math.sin(Ye)}}else{var Ke=m[we].length,Xe=Math.max(Ke===1?0:o?(l.w-t.padding*2-Q.w)/((t.grid?ve:Ke)-1):(l.w-t.padding*2-Q.w)/((t.grid?ve:Ke)+1),O),Ze={x:H.x+(Me+1-(Ke+1)/2)*Xe,y:H.y+(we+1-($+1)/2)*se};return Ze}},De={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(De).indexOf(t.direction)===-1&&St("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(De).join(", ")));var ke=function(de){return KR(Ne(de),l,De[t.direction])};return r.nodes().layoutPositions(this,t,ke),this};Oq={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};Lb.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var h=i[d],v=h.layoutDimensions(e),p=v.w,g=v.h;f=Math.max(f,p,g)}if(ue(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var m=Math.cos(u)-Math.cos(0),y=Math.sin(u)-Math.sin(0),b=Math.sqrt(f*f/(m*m+y*y));c=Math.max(b,c)}var x=function(S,w){var T=e.startAngle+w*u*(a?1:-1),k=c*Math.cos(T),P=c*Math.sin(T),A={x:o.x+k,y:o.y+P};return A};return n.nodes().layoutPositions(this,e,x),this};Bq={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};Rb.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],u=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var v=i[h],p=v.layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort(function(se,ve){return ve.value-se.value});for(var g=e.levelWidth(i),m=[[]],y=m[0],b=0;b<l.length;b++){var x=l[b];if(y.length>0){var E=Math.abs(y[0].value-x.value);E>=g&&(y=[],m.push(y))}y.push(x)}var S=u+e.minNodeSpacing;if(!e.avoidOverlap){var w=m.length>0&&m[0].length>1,T=Math.min(s.w,s.h)/2-S,k=T/(m.length+w?1:0);S=Math.min(S,k)}for(var P=0,A=0;A<m.length;A++){var C=m[A],_=e.sweep===void 0?2*Math.PI-2*Math.PI/C.length:e.sweep,R=C.dTheta=_/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var L=Math.cos(R)-Math.cos(0),O=Math.sin(R)-Math.sin(0),D=Math.sqrt(S*S/(L*L+O*O));P=Math.max(D,P)}C.r=P,P+=S}if(e.equidistant){for(var I=0,F=0,z=0;z<m.length;z++){var q=m[z],N=q.r-F;I=Math.max(I,N)}F=0;for(var U=0;U<m.length;U++){var Y=m[U];U===0&&(F=Y.r),Y.r=F,F+=I}}for(var $={},j=0;j<m.length;j++)for(var te=m[j],oe=te.dTheta,ee=te.r,V=0;V<te.length;V++){var W=te[V],H=e.startAngle+(r?1:-1)*oe*V,Q={x:o.x+ee*Math.cos(H),y:o.y+ee*Math.sin(H)};$[W.node.id()]=Q}return a.nodes().layoutPositions(this,e,function(se){var ve=se.id();return $[ve]}),this};Iq={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};vu.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?vd=!0:vd=!1;var n=qq(e,r,t);vd&&Nq(n),t.randomize&&zq(n);var a=vn(),i=function(){Vq(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(d){return!(r.stopped||d>=t.numIter||(Wq(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),h=Bb(n,t,d);d.layoutPositions(r,t,h)}},l=0,u=!0;if(t.animate===!0){var c=function(){for(var d=0;u&&d<t.refresh;)u=s(l),l++,d++;if(!u)e0(n,t),o();else{var h=vn();h-a>=t.animationThreshold&&i(),Vl(c)}};c()}else{for(;u;)u=s(l),l++;e0(n,t),o()}return this};vu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};vu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};qq=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=ar(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var f=l[c],d=0;d<f.length;d++){var h=f[d];u[h.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=i[c],p=v.layoutDimensions(n),g={};g.isLocked=v.locked(),g.id=v.data("id"),g.parentId=v.data("parent"),g.cmptId=u[v.id()],g.children=[],g.positionX=v.position("x"),g.positionY=v.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(v.style("padding")),g.padRight=parseFloat(v.style("padding")),g.padTop=parseFloat(v.style("padding")),g.padBottom=parseFloat(v.style("padding")),g.nodeRepulsion=kt(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=c}for(var m=[],y=0,b=-1,x=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],E=v.parentId;E!=null?o.layoutNodes[o.idToIndex[E]].children.push(v.id):(m[++b]=v.id,x.push(v.id))}for(o.graphSet.push(x);y<=b;){var S=m[y++],w=o.idToIndex[S],h=o.layoutNodes[w],T=h.children;if(T.length>0){o.graphSet.push(T);for(var c=0;c<T.length;c++)m[++b]=T[c]}}for(var c=0;c<o.graphSet.length;c++)for(var k=o.graphSet[c],d=0;d<k.length;d++){var P=o.idToIndex[k[d]];o.indexToGraph[P]=c}for(var c=0;c<o.edgeSize;c++){var A=a[c],C={};C.id=A.data("id"),C.sourceId=A.data("source"),C.targetId=A.data("target");var _=kt(n.idealEdgeLength)?n.idealEdgeLength(A):n.idealEdgeLength,R=kt(n.edgeElasticity)?n.edgeElasticity(A):n.edgeElasticity,L=o.idToIndex[C.sourceId],O=o.idToIndex[C.targetId],D=o.indexToGraph[L],I=o.indexToGraph[O];if(D!=I){for(var F=Fq(C.sourceId,C.targetId,o),z=o.graphSet[F],q=0,g=o.layoutNodes[L];z.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],q++;for(g=o.layoutNodes[O];z.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],q++;_*=q*n.nestingFactor}C.idealLength=_,C.elasticity=R,o.layoutEdges.push(C)}return o},Fq=function(e,r,n){var a=Ob(e,r,0,n);return 2>a.count?0:a.graph},Ob=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var l=i[o],u=a.idToIndex[l],c=a.layoutNodes[u].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=Ob(e,r,f,a);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},zq=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},Bb=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var l=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var u=i.w===0?.5:(l.positionX-i.x1)/i.w,c=i.h===0?.5:(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+c*a.h}}else return{x:l.positionX,y:l.positionY}}},Vq=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=Bb(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},Wq=function(e,r,n){Hq(e,r),$q(e),Yq(e,r),jq(e),Kq(e)},Hq=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],l=s+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];Gq(o,u,e,r)}},Jy=function(e){return-1+2*e*Math.random()},Gq=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;o===0&&l===0&&(o=Jy(u),l=Jy(u));var c=Uq(e,r,o,l);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(o*o+l*l),h=f*o/d,v=f*l/d;else var p=jl(e,o,l),g=jl(r,-1*o,-1*l),m=g.x-p.x,y=g.y-p.y,b=m*m+y*y,d=Math.sqrt(b),f=(e.nodeRepulsion+r.nodeRepulsion)/b,h=f*m/d,v=f*y/d;e.isLocked||(e.offsetX-=h,e.offsetY-=v),r.isLocked||(r.offsetX+=h,r.offsetY+=v)}},Uq=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},jl=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,l=n/r,u=s/o,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+s/2,c):0<r&&-1*u<=l&&l<=u?(c.x=a+o/2,c.y=i+o*n/2/r,c):0>r&&-1*u<=l&&l<=u?(c.x=a-o/2,c.y=i-o*n/2/r,c):0<n&&(l<=-1*u||l>=u)?(c.x=a+s*r/2/n,c.y=i+s/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=a-s*r/2/n,c.y=i-s/2),c)},$q=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],l=e.layoutNodes[o],u=l.positionX-s.positionX,c=l.positionY-s.positionY;if(!(u===0&&c===0)){var f=jl(s,u,c),d=jl(l,-1*u,-1*c),h=d.x-f.x,v=d.y-f.y,p=Math.sqrt(h*h+v*v),g=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var m=g*h/p,y=g*v/p;else var m=0,y=0;s.isLocked||(s.offsetX+=m,s.offsetY+=y),l.isLocked||(l.offsetX-=m,l.offsetY-=y)}}},Yq=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],o=c.positionX,l=c.positionY;for(var f=0;f<s;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var h=o-d.positionX,v=l-d.positionY,p=Math.sqrt(h*h+v*v);if(p>n){var g=r.gravity*h/p,m=r.gravity*v/p;d.offsetX+=g,d.offsetY+=m}}}}},jq=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],l=e.layoutNodes[o],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,d=0;d<u.length;d++){var h=e.layoutNodes[e.idToIndex[u[d]]];h.offsetX+=c,h.offsetY+=f,n[++i]=u[d]}l.offsetX=0,l.offsetY=0}}},Kq=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=Xq(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Ib(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Xq=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},Ib=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return Ib(a,r)}},e0=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,l=a[o]=a[o]||[];l.push(s)}for(var u=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}a.sort(function(y,b){return b.w*b.h-y.w*y.h});for(var h=0,v=0,p=0,g=0,m=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=h-c.x1,d.positionY+=v-c.y1)}h+=c.w+r.componentSpacing,p+=c.w+r.componentSpacing,g=Math.max(g,c.h),p>m&&(v+=g+r.componentSpacing,h=0,p=0,g=0)}}},Zq={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};qb.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(U){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),l=Math.round(o),u=Math.round(i.w/i.h*o),c=function(Y){if(Y==null)return Math.min(l,u);var $=Math.min(l,u);$==l?l=Y:u=Y},f=function(Y){if(Y==null)return Math.max(l,u);var $=Math.max(l,u);$==l?l=Y:u=Y},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)l=d,u=h;else if(d!=null&&h==null)l=d,u=Math.ceil(s/l);else if(d==null&&h!=null)u=h,l=Math.ceil(s/u);else if(u*l>s){var v=c(),p=f();(v-1)*p>=s?c(v-1):(p-1)*v>=s&&f(p-1)}else for(;u*l<s;){var g=c(),m=f();(m+1)*g>=s?f(m+1):c(g+1)}var y=i.w/u,b=i.h/l;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var x=0;x<a.length;x++){var E=a[x],S=E._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var w=E.layoutDimensions(e),T=e.avoidOverlapPadding,k=w.w+T,P=w.h+T;y=Math.max(y,k),b=Math.max(b,P)}for(var A={},C=function(Y,$){return!!A["c-"+Y+"-"+$]},_=function(Y,$){A["c-"+Y+"-"+$]=!0},R=0,L=0,O=function(){L++,L>=u&&(L=0,R++)},D={},I=0;I<a.length;I++){var F=a[I],z=e.position(F);if(z&&(z.row!==void 0||z.col!==void 0)){var q={row:z.row,col:z.col};if(q.col===void 0)for(q.col=0;C(q.row,q.col);)q.col++;else if(q.row===void 0)for(q.row=0;C(q.row,q.col);)q.row++;D[F.id()]=q,_(q.row,q.col)}}var N=function(Y,$){var j,te;if(Y.locked()||Y.isParent())return!1;var oe=D[Y.id()];if(oe)j=oe.col*y+y/2+i.x1,te=oe.row*b+b/2+i.y1;else{for(;C(R,L);)O();j=L*y+y/2+i.x1,te=R*b+b/2+i.y1,_(R,L),O()}return{x:j,y:te}};a.layoutPositions(this,e,N)}return this};Qq={ready:function(){},stop:function(){}};lh.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};lh.prototype.stop=function(){return this};Jq={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};Fb.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=kt(t.positions);function a(i){if(t.positions==null)return wO(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s==null?null:s}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};eF={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};Nb.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=ar(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};tF=[{name:"breadthfirst",impl:Db},{name:"circle",impl:Lb},{name:"concentric",impl:Rb},{name:"cose",impl:vu},{name:"grid",impl:qb},{name:"null",impl:lh},{name:"preset",impl:Fb},{name:"random",impl:Nb}];t0=function(){},r0=function(){throw new Error("A headless instance can not render images")};zb.prototype={recalculateRenderedStyle:t0,notify:function(){this.notifications++},init:t0,isHeadless:function(){return!0},png:r0,jpg:r0};uh={};uh.arrowShapeWidth=.3;uh.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,c,f,d,h,v,p){var g=h.x-f/2-p,m=h.x+f/2+p,y=h.y-f/2-p,b=h.y+f/2+p,x=g<=u&&u<=m&&y<=c&&c<=b;return x},n=function(u,c,f,d,h){var v=u*Math.cos(d)-c*Math.sin(d),p=u*Math.sin(d)+c*Math.cos(d),g=v*f,m=p*f,y=g+h.x,b=m+h.y;return{x:y,y:b}},a=function(u,c,f,d){for(var h=[],v=0;v<u.length;v+=2){var p=u[v],g=u[v+1];h.push(n(p,g,c,f,d))}return h},i=function(u){for(var c=[],f=0;f<u.length;f++){var d=u[f];c.push(d.x,d.y)}return c},s=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},o=function(u,c){Ae(c)&&(c=t[c]),t[u]=Le({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,v,p,g,m){var y=i(a(this.points,v+2*m,p,g)),b=dr(d,h,y);return b},roughCollide:r,draw:function(d,h,v,p){var g=a(this.points,h,v,p);e.arrowShapeImpl("polygon")(d,g)},spacing:function(d){return 0},gap:s},c)};o("none",{collide:Wl,roughCollide:Wl,draw:jd,spacing:pm,gap:pm}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=this.controlPoint,g=n(p[0],p[1],c,f,d);e.arrowShapeImpl(this.name)(u,v,g)},gap:function(u){return s(u)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,d,h,v,p){var g=i(a(this.points,f+2*p,d,h)),m=i(a(this.pointsTee,f+2*p,d,h)),y=dr(u,c,g)||dr(u,c,m);return y},draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(u,v,p)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,d,h,v,p){var g=h,m=Math.pow(g.x-u,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2),y=i(a(this.points,f+2*p,d,h));return dr(u,c,y)||m},draw:function(u,c,f,d,h){var v=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(u,v,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),d=c/u,h=3,v=5;return f[h]=f[h]-d,f[v]=f[v]-d,f},collide:function(u,c,f,d,h,v,p){var g=i(a(this.points,f+2*p,d,h)),m=i(a(this.crossLinePts(f,v),f+2*p,d,h)),y=dr(u,c,g)||dr(u,c,m);return y},draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=a(this.crossLinePts(c,h),c,f,d);e.arrowShapeImpl(this.name)(u,v,p)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return s(u)*.525}}),o("circle",{radius:.15,collide:function(u,c,f,d,h,v,p){var g=h,m=Math.pow(g.x-u,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return m},draw:function(u,c,f,d,h){e.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};La={};La.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),l=r.zoom(),u=((t-a)/s-o.x)/l,c=((e-i)/s-o.y)/l;return[u,c]};La.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(m){return parseFloat(r.getPropertyValue(m))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,c=i.left+i.right,f=e.width/(s+c),d=s-l,h=o-u,v=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[v,p,d,h,f]};La.invalidateContainerClientCoordsCache=function(){this.containerBB=null};La.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};La.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),c=(n?24:8)/l,f=(n?8:2)/l,d=(n?8:2)/l,h=1/0,v,p;r&&(s=s.interactive);function g(w,T){if(w.isNode()){if(p)return;p=w,o.push(w)}if(w.isEdge()&&(T==null||T<h))if(v){if(v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var k=0;k<o.length;k++)if(o[k].isEdge()){o[k]=w,v=w,h=T!=null?T:h;break}}}else o.push(w),v=w,h=T!=null?T:h}function m(w){var T=w.outerWidth()+2*f,k=w.outerHeight()+2*f,P=T/2,A=k/2,C=w.position(),_=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,R=w._private.rscratch;if(C.x-P<=t&&t<=C.x+P&&C.y-A<=e&&e<=C.y+A){var L=i.nodeShapes[a.getNodeShape(w)];if(L.checkPoint(t,e,0,T,k,C.x,C.y,_,R))return g(w,0),!0}}function y(w){var T=w._private,k=T.rscratch,P=w.pstyle("width").pfValue,A=w.pstyle("arrow-scale").value,C=P/2+c,_=C*C,R=C*2,I=T.source,F=T.target,L;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var O=k.allpts,D=0;D+3<O.length;D+=2)if(BO(t,e,O[D],O[D+1],O[D+2],O[D+3],R)&&_>(L=zO(t,e,O[D],O[D+1],O[D+2],O[D+3])))return g(w,L),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var O=k.allpts,D=0;D+5<k.allpts.length;D+=4)if(IO(t,e,O[D],O[D+1],O[D+2],O[D+3],O[D+4],O[D+5],R)&&_>(L=NO(t,e,O[D],O[D+1],O[D+2],O[D+3],O[D+4],O[D+5])))return g(w,L),!0}for(var I=I||T.source,F=F||T.target,z=a.getArrowWidth(P,A),q=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],D=0;D<q.length;D++){var N=q[D],U=i.arrowShapes[w.pstyle(N.name+"-arrow-shape").value],Y=w.pstyle("width").pfValue;if(U.roughCollide(t,e,z,N.angle,{x:N.x,y:N.y},Y,c)&&U.collide(t,e,z,N.angle,{x:N.x,y:N.y},Y,c))return g(w),!0}u&&o.length>0&&(m(I),m(F))}function b(w,T,k){return fr(w,T,k)}function x(w,T){var k=w._private,P=d,A;T?A=T+"-":A="",w.boundingBox();var C=k.labelBounds[T||"main"],_=w.pstyle(A+"label").value,R=w.pstyle("text-events").strValue==="yes";if(!(!R||!_)){var L=b(k.rscratch,"labelX",T),O=b(k.rscratch,"labelY",T),D=b(k.rscratch,"labelAngle",T),I=w.pstyle(A+"text-margin-x").pfValue,F=w.pstyle(A+"text-margin-y").pfValue,z=C.x1-P-I,q=C.x2+P-I,N=C.y1-P-F,U=C.y2+P-F;if(D){var Y=Math.cos(D),$=Math.sin(D),j=function(Q,se){return Q=Q-L,se=se-O,{x:Q*Y-se*$+L,y:Q*$+se*Y+O}},te=j(z,N),oe=j(z,U),ee=j(q,N),V=j(q,U),W=[te.x+I,te.y+F,ee.x+I,ee.y+F,V.x+I,V.y+F,oe.x+I,oe.y+F];if(dr(t,e,W))return g(w),!0}else if(zn(C,t,e))return g(w),!0}}for(var E=s.length-1;E>=0;E--){var S=s[E];S.isNode()?m(S)||x(S):y(S)||x(S)||x(S,"source")||x(S,"target")}return o};La.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],l=Math.min(t,r),u=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=l,r=u,e=c,n=f;var d=ar({x1:t,y1:e,x2:r,y2:n}),h=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],v=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function p(Q,se,ve){return fr(Q,se,ve)}function g(Q,se){var ve=Q._private,Ne=s,De="";Q.boundingBox();var ke=ve.labelBounds.main;if(!ke)return null;var Ce=p(ve.rscratch,"labelX",se),de=p(ve.rscratch,"labelY",se),xe=p(ve.rscratch,"labelAngle",se),we=Q.pstyle(De+"text-margin-x").pfValue,Me=Q.pstyle(De+"text-margin-y").pfValue,Se=ke.x1-Ne-we,ze=ke.x2+Ne-we,Ye=ke.y1-Ne-Me,Ke=ke.y2+Ne-Me;if(xe){var Xe=Math.cos(xe),Ze=Math.sin(xe),Re=function(J,M){return J=J-Ce,M=M-de,{x:J*Xe-M*Ze+Ce,y:J*Ze+M*Xe+de}};return[Re(Se,Ye),Re(ze,Ye),Re(ze,Ke),Re(Se,Ke)]}else return[{x:Se,y:Ye},{x:ze,y:Ye},{x:ze,y:Ke},{x:Se,y:Ke}]}function m(Q,se,ve,Ne){function De(ke,Ce,de){return(de.y-ke.y)*(Ce.x-ke.x)>(Ce.y-ke.y)*(de.x-ke.x)}return De(Q,ve,Ne)!==De(se,ve,Ne)&&De(Q,se,ve)!==De(Q,se,Ne)}for(var y=0;y<a.length;y++){var b=a[y];if(b.isNode()){var x=b,E=x.pstyle("text-events").strValue==="yes",S=x.pstyle("box-selection").strValue,w=x.pstyle("box-select-labels").strValue==="yes";if(S==="none")continue;var T=(S==="overlap"||w)&&E,k=x.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:T});if(S==="contain"){var P=!1;if(w&&E){var A=g(x);A&&df(A,h)&&(o.push(x),P=!0)}!P&&Y0(d,k)&&o.push(x)}else if(S==="overlap"&&Qd(d,k)){var C=x.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),_=[{x:C.x1,y:C.y1},{x:C.x2,y:C.y1},{x:C.x2,y:C.y2},{x:C.x1,y:C.y2}];if(df(_,h))o.push(x);else{var R=g(x);R&&df(R,h)&&o.push(x)}}}else{var L=b,O=L._private,D=O.rscratch,I=L.pstyle("box-selection").strValue;if(I==="none")continue;if(I==="contain"){if(D.startX!=null&&D.startY!=null&&!zn(d,D.startX,D.startY)||D.endX!=null&&D.endY!=null&&!zn(d,D.endX,D.endY))continue;if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"||D.edgeType==="segments"||D.edgeType==="haystack"){for(var F=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts,z=!0,q=0;q<F.length;q++)if(!wm(d,F[q])){z=!1;break}z&&o.push(L)}else D.edgeType==="straight"&&o.push(L)}else if(I==="overlap"){var N=!1;if(D.startX!=null&&D.startY!=null&&D.endX!=null&&D.endY!=null&&(zn(d,D.startX,D.startY)||zn(d,D.endX,D.endY)))o.push(L),N=!0;else if(!N&&D.edgeType==="haystack"){for(var U=O.rstyle.haystackPts,Y=0;Y<U.length;Y++)if(wm(d,U[Y])){o.push(L),N=!0;break}}if(!N){var $=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts;if((!$||$.length<2)&&D.edgeType==="straight"&&D.startX!=null&&D.startY!=null&&D.endX!=null&&D.endY!=null&&($=[{x:D.startX,y:D.startY},{x:D.endX,y:D.endY}]),!$||$.length<2)continue;for(var j=0;j<$.length-1;j++){for(var te=$[j],oe=$[j+1],ee=0;ee<v.length;ee++){var V=It(v[ee],2),W=V[0],H=V[1];if(m(te,oe,W,H)){o.push(L),N=!0;break}}if(N)break}}}}}return o};Kl={};Kl.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",l,u,c,f,d,h,m,y;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),m=e.midX,y=e.midY,i)l=c-e.segpts[0],u=f-e.segpts[1];else if(a||s||o||n){var v=e.allpts,p=Gt(v[0],v[2],v[4],.1),g=Gt(v[1],v[3],v[5],.1);l=c-p,u=f-g}else l=c-m,u=f-y;e.srcArrowAngle=ml(l,u);var m=e.midX,y=e.midY;if(r&&(m=(c+d)/2,y=(f+h)/2),l=d-c,u=h-f,i){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,x=b-2;l=v[b]-v[x],u=v[b+1]-v[x+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var b=v.length/2-1,x=b-2;l=v[b]-v[x],u=v[b+1]-v[x+1]}}else if(a||s||o){var v=e.allpts,E=e.ctrlpts,S,w,T,k;if(E.length/2%2===0){var P=v.length/2-1,A=P+2,C=A+2;S=Gt(v[P],v[A],v[C],0),w=Gt(v[P+1],v[A+1],v[C+1],0),T=Gt(v[P],v[A],v[C],1e-4),k=Gt(v[P+1],v[A+1],v[C+1],1e-4)}else{var A=v.length/2-1,P=A-2,C=A+2;S=Gt(v[P],v[A],v[C],.4999),w=Gt(v[P+1],v[A+1],v[C+1],.4999),T=Gt(v[P],v[A],v[C],.5),k=Gt(v[P+1],v[A+1],v[C+1],.5)}l=T-S,u=k-w}if(e.midtgtArrowAngle=ml(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,_=b+2;l=-(v[_]-v[b]),u=-(v[_+1]-v[b+1])}}}if(e.midsrcArrowAngle=ml(l,u),i)l=d-e.segpts[e.segpts.length-2],u=h-e.segpts[e.segpts.length-1];else if(a||s||o||n){var v=e.allpts,R=v.length,p=Gt(v[R-6],v[R-4],v[R-2],.9),g=Gt(v[R-5],v[R-3],v[R-1],.9);l=d-p,u=h-g}else l=d-m,u=h-y;e.tgtArrowAngle=ml(l,u)};Kl.getArrowWidth=Kl.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};$r={},Cr={},s0=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},rF=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},nF=function(e,r,n,a,i){if(e!==i0?s0(r,e,$r):rF(Cr,$r),s0(r,n,Cr),n0=$r.nx*Cr.ny-$r.ny*Cr.nx,a0=$r.nx*Cr.nx-$r.ny*-Cr.ny,fn=Math.asin(Math.max(-1,Math.min(1,n0))),Math.abs(fn)<1e-6){Od=r.x,Bd=r.y,_a=ui=0;return}Ca=1,Il=!1,a0<0?fn<0?fn=Math.PI+fn:(fn=Math.PI-fn,Ca=-1,Il=!0):fn>0&&(Ca=-1,Il=!0),r.radius!==void 0?ui=r.radius:ui=a,ba=fn/2,Cl=Math.min($r.len/2,Cr.len/2),i?(Gr=Math.abs(Math.cos(ba)*ui/Math.sin(ba)),Gr>Cl?(Gr=Cl,_a=Math.abs(Gr*Math.sin(ba)/Math.cos(ba))):_a=ui):(Gr=Math.min(Cl,ui),_a=Math.abs(Gr*Math.sin(ba)/Math.cos(ba))),Id=r.x+Cr.nx*Gr,qd=r.y+Cr.ny*Gr,Od=Id-Cr.ny*_a*Ca,Bd=qd+Cr.nx*_a*Ca,Vb=r.x+$r.nx*Gr,Wb=r.y+$r.ny*Gr,i0=r};Os=.01,aF=Math.sqrt(2*Os),tr={};tr.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),l=s.units!=null&&o.units!=null,u=function(E,S,w,T){var k=T-S,P=w-E,A=Math.sqrt(P*P+k*k);return{x:-k/A,y:P/A}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(l){var f=this.manualEndptToPx(t.source()[0],s),d=It(f,2),h=d[0],v=d[1],p=this.manualEndptToPx(t.target()[0],o),g=It(p,2),m=g[0],y=g[1],b={x1:h,y1:v,x2:m,y2:y};a=u(h,v,m,y),i=b}else st("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};tr.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,l=s.position(),u=o.position(),c=s.width(),f=o.width(),d=s.height(),h=o.height(),v=r.pstyle("haystack-radius").value,p=v/2;a.haystackPts=a.allpts=[a.source.x*c*p+l.x,a.source.y*d*p+l.y,a.target.x*f*p+u.x,a.target.y*h*p+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};tr.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<o;c++){var f=n.pfValue[c],d=a.pfValue[c],h=1-f,v=f,p=this.findMidptPtsEtc(t,e),g=p.midptPts,m=p.vectorNormInverse,y={x:g.x1*h+g.x2*v,y:g.y1*h+g.y2*v};r.segpts.push(y.x+m.x*d,y.y+m.y*d),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:l),r.isArcRadius.push((s.pfValue[c]!==void 0?s.pfValue[c]:u)==="arc-radius")}};tr.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,h=f;n&&(d=0,h=l);var v=u-Math.PI/2,p=v-c/2,g=v+c/2,m=u+"_"+c;d=i[m]===void 0?i[m]=0:++i[m],a.ctrlpts=[s.x+Math.cos(p)*1.4*h*(d/3+1),s.y+Math.sin(p)*1.4*h*(d/3+1),s.x+Math.cos(g)*1.4*h*(d/3+1),s.y+Math.sin(g)*1.4*h*(d/3+1)]};tr.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,v=r,p=f;n&&(v=0,p=h);var g=50,m={x:i.x-o/2,y:i.y-l/2},y={x:s.x-u/2,y:s.y-c/2},b={x:Math.min(m.x,y.x),y:Math.min(m.y,y.y)},x=.5,E=Math.max(x,Math.log(o*Os)),S=Math.max(x,Math.log(u*Os));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*E,b.x-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*S,b.y]};tr.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};tr.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),u=o&&l?Math.min(o.value.length,l.value.length):1,c=o?o.pfValue[0]:void 0,f=l.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<u;h++){var v=(.5-e.eles.length/2+r)*s*(a?-1:1),p=void 0,g=Zd(v);d&&(c=o?o.pfValue[h]:s,f=l.value[h]),n?p=c:p=c!==void 0?g*c:void 0;var m=p!==void 0?p:v,y=1-f,b=f,x=this.findMidptPtsEtc(t,e),E=x.midptPts,S=x.vectorNormInverse,w={x:E.x1*y+E.x2*b,y:E.y1*y+E.y2*b};i.ctrlpts.push(w.x+S.x*m,w.y+S.y*m)}};tr.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,d=e.srcH,h=e.tgtW,v=e.tgtH,p=t.pstyle("edge-distances").value,g=p!=="node-position",m=t.pstyle("taxi-direction").value,y=m,b=t.pstyle("taxi-turn"),x=b.units==="%",E=b.pfValue,S=E<0,w=t.pstyle("taxi-turn-min-distance").pfValue,T=g?(f+h)/2:0,k=g?(d+v)/2:0,P=c.x2-c.x1,A=c.y2-c.y1,C=function(M,G){return M>0?Math.max(M-G,0):Math.min(M+G,0)},_=C(P,T),R=C(A,k),L=!1;y===u?m=Math.abs(_)>Math.abs(R)?a:n:y===l||y===o?(m=n,L=!0):(y===i||y===s)&&(m=a,L=!0);var O=m===n,D=O?R:_,I=O?A:P,F=Zd(I),z=!1;!(L&&(x||S))&&(y===o&&I<0||y===l&&I>0||y===i&&I>0||y===s&&I<0)&&(F*=-1,D=F*Math.abs(D),z=!0);var q;if(x){var N=E<0?1+E:E;q=N*D}else{var U=E<0?D:0;q=U+E*F}var Y=function(M){return Math.abs(M)<w||Math.abs(M)>=Math.abs(D)},$=Y(q),j=Y(Math.abs(D)-Math.abs(q)),te=$||j;if(te&&!z)if(O){var oe=Math.abs(I)<=d/2,ee=Math.abs(P)<=h/2;if(oe){var V=(c.x1+c.x2)/2,W=c.y1,H=c.y2;r.segpts=[V,W,V,H]}else if(ee){var Q=(c.y1+c.y2)/2,se=c.x1,ve=c.x2;r.segpts=[se,Q,ve,Q]}else r.segpts=[c.x1,c.y2]}else{var Ne=Math.abs(I)<=f/2,De=Math.abs(A)<=v/2;if(Ne){var ke=(c.y1+c.y2)/2,Ce=c.x1,de=c.x2;r.segpts=[Ce,ke,de,ke]}else if(De){var xe=(c.x1+c.x2)/2,we=c.y1,Me=c.y2;r.segpts=[xe,we,xe,Me]}else r.segpts=[c.x2,c.y1]}else if(O){var Se=c.y1+q+(g?d/2*F:0),ze=c.x1,Ye=c.x2;r.segpts=[ze,Se,Ye,Se]}else{var Ke=c.x1+q+(g?f/2*F:0),Xe=c.y1,Ze=c.y2;r.segpts=[Ke,Xe,Ke,Ze]}if(r.isRound){var Re=t.pstyle("taxi-radius").value,pe=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Re),r.isArcRadius=new Array(r.segpts.length/2).fill(pe)}};tr.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,h=e.srcRs,v=e.tgtRs,p=!ue(r.startX)||!ue(r.startY),g=!ue(r.arrowStartX)||!ue(r.arrowStartY),m=!ue(r.endX)||!ue(r.endY),y=!ue(r.arrowEndX)||!ue(r.arrowEndY),b=3,x=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,E=b*x,S=Aa({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=S<E,T=Aa({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),k=T<E,P=!1;if(p||g||w){P=!0;var A={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},C=Math.sqrt(A.x*A.x+A.y*A.y),_={x:A.x/C,y:A.y/C},R=Math.max(i,s),L={x:r.ctrlpts[0]+_.x*2*R,y:r.ctrlpts[1]+_.y*2*R},O=u.intersectLine(n.x,n.y,i,s,L.x,L.y,0,f,h);w?(r.ctrlpts[0]=r.ctrlpts[0]+_.x*(E-S),r.ctrlpts[1]=r.ctrlpts[1]+_.y*(E-S)):(r.ctrlpts[0]=O[0]+_.x*E,r.ctrlpts[1]=O[1]+_.y*E)}if(m||y||k){P=!0;var D={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},I=Math.sqrt(D.x*D.x+D.y*D.y),F={x:D.x/I,y:D.y/I},z=Math.max(i,s),q={x:r.ctrlpts[0]+F.x*2*z,y:r.ctrlpts[1]+F.y*2*z},N=c.intersectLine(a.x,a.y,o,l,q.x,q.y,0,d,v);k?(r.ctrlpts[0]=r.ctrlpts[0]+F.x*(E-T),r.ctrlpts[1]=r.ctrlpts[1]+F.y*(E-T)):(r.ctrlpts[0]=N[0]+F.x*E,r.ctrlpts[1]=N[1]+F.y*E)}P&&this.findEndpoints(t)}};tr.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Gt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Gt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(ch({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-h.y,h.x-f.x]}else{var v=[f.x-d.cx,f.y-d.cy],p=d.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(g){return g*p}),e.midX=d.cx+v[0],e.midY=d.cy+v[1],e.midVector=v}}}}};tr.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ue(e.startX)&&ue(e.startY)&&ue(e.endX)&&ue(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,st("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};tr.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new hn,s=function(k,P){return[].concat(Nl(k),[P?1:0]).join("-")},o=[],l=[],u=0;u<t.length;u++){var c=t[u],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){l.push(c);continue}var h=d==="unbundled-bezier"||Nn(d,"segments")||d==="straight"||d==="straight-triangle"||Nn(d,"taxi"),v=d==="unbundled-bezier"||d==="bezier",p=f.source,g=f.target,m=p.poolIndex(),y=g.poolIndex(),b=[m,y].sort(),x=s(b,h),E=i.get(x);E==null&&(E={eles:[]},o.push({pairId:b,edgeIsUnbundled:h}),i.set(x,E)),E.eles.push(c),h&&(E.hasUnbundled=!0),v&&(E.hasBezier=!0)}}for(var S=function(){var k=o[w],P=k.pairId,A=k.edgeIsUnbundled,C=s(P,A),_=i.get(C),R;if(!_.hasUnbundled){var L=_.eles[0].parallelEdges().filter(function(pe){return pe.isBundledBezier()});Kd(_.eles),L.forEach(function(pe){return _.eles.push(pe)}),_.eles.sort(function(pe,J){return pe.poolIndex()-J.poolIndex()})}var O=_.eles[0],D=O.source(),I=O.target();if(D.poolIndex()>I.poolIndex()){var F=D;D=I,I=F}var z=_.srcPos=D.position(),q=_.tgtPos=I.position(),N=_.srcW=D.outerWidth(),U=_.srcH=D.outerHeight(),Y=_.tgtW=I.outerWidth(),$=_.tgtH=I.outerHeight(),j=_.srcShape=r.nodeShapes[e.getNodeShape(D)],te=_.tgtShape=r.nodeShapes[e.getNodeShape(I)],oe=_.srcCornerRadius=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,ee=_.tgtCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,V=_.tgtRs=I._private.rscratch,W=_.srcRs=D._private.rscratch;_.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var H=0;H<_.eles.length;H++){var Q=_.eles[H],se=Q[0]._private.rscratch,ve=Q.pstyle("curve-style").value,Ne=ve==="unbundled-bezier"||Nn(ve,"segments")||Nn(ve,"taxi"),De=!D.same(Q.source());if(!_.calculatedIntersection&&D!==I&&(_.hasBezier||_.hasUnbundled)){_.calculatedIntersection=!0;var ke=j.intersectLine(z.x,z.y,N,U,q.x,q.y,0,oe,W),Ce=_.srcIntn=ke,de=te.intersectLine(q.x,q.y,Y,$,z.x,z.y,0,ee,V),xe=_.tgtIntn=de,we=_.intersectionPts={x1:ke[0],x2:de[0],y1:ke[1],y2:de[1]},Me=_.posPts={x1:z.x,x2:q.x,y1:z.y,y2:q.y},Se=de[1]-ke[1],ze=de[0]-ke[0],Ye=Math.sqrt(ze*ze+Se*Se);ue(Ye)&&Ye>=aF||(Ye=Math.sqrt(Math.max(ze*ze,Os)+Math.max(Se*Se,Os)));var Ke=_.vector={x:ze,y:Se},Xe=_.vectorNorm={x:Ke.x/Ye,y:Ke.y/Ye},Ze={x:-Xe.y,y:Xe.x};_.nodesOverlap=!ue(Ye)||te.checkPoint(ke[0],ke[1],0,Y,$,q.x,q.y,ee,V)||j.checkPoint(de[0],de[1],0,N,U,z.x,z.y,oe,W),_.vectorNormInverse=Ze,R={nodesOverlap:_.nodesOverlap,dirCounts:_.dirCounts,calculatedIntersection:!0,hasBezier:_.hasBezier,hasUnbundled:_.hasUnbundled,eles:_.eles,srcPos:q,srcRs:V,tgtPos:z,tgtRs:W,srcW:Y,srcH:$,tgtW:N,tgtH:U,srcIntn:xe,tgtIntn:Ce,srcShape:te,tgtShape:j,posPts:{x1:Me.x2,y1:Me.y2,x2:Me.x1,y2:Me.y1},intersectionPts:{x1:we.x2,y1:we.y2,x2:we.x1,y2:we.y1},vector:{x:-Ke.x,y:-Ke.y},vectorNorm:{x:-Xe.x,y:-Xe.y},vectorNormInverse:{x:-Ze.x,y:-Ze.y}}}var Re=De?R:_;se.nodesOverlap=Re.nodesOverlap,se.srcIntn=Re.srcIntn,se.tgtIntn=Re.tgtIntn,se.isRound=ve.startsWith("round"),a&&(D.isParent()||D.isChild()||I.isParent()||I.isChild())&&(D.parents().anySame(I)||I.parents().anySame(D)||D.same(I)&&D.isParent())?e.findCompoundLoopPoints(Q,Re,H,Ne):D===I?e.findLoopPoints(Q,Re,H,Ne):ve.endsWith("segments")?e.findSegmentsPoints(Q,Re):ve.endsWith("taxi")?e.findTaxiPoints(Q,Re):ve==="straight"||!Ne&&_.eles.length%2===1&&H===Math.floor(_.eles.length/2)?e.findStraightEdgePoints(Q):e.findBezierPoints(Q,Re,H,Ne,De),e.findEndpoints(Q),e.tryToCorrectInvalidPoints(Q,Re),e.checkForInvalidEdgeWarning(Q),e.storeAllpts(Q),e.storeEdgeProjections(Q),e.calculateArrowAngles(Q),e.recalculateEdgeLabelProjections(Q),e.calculateLabelAngles(Q)}},w=0;w<o.length;w++)S();this.findHaystackPoints(l)}};tr.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return Gb(e.segpts)};tr.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return Gb(e.ctrlpts)};tr.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};Gs={};Gs.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};Gs.findEndpoints=function(t){var e,r,n,a,i=this,s,o=t.source()[0],l=t.target()[0],u=o.position(),c=l.position(),f=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,h=t.pstyle("target-distance-from-node").pfValue,v=t.pstyle("source-distance-from-node").pfValue,p=o._private.rscratch,g=l._private.rscratch,m=t.pstyle("curve-style").value,y=t._private.rscratch,b=y.edgeType,x=Nn(m,"taxi"),E=b==="self"||b==="compound",S=b==="bezier"||b==="multibezier"||E,w=b!=="bezier",T=b==="straight"||b==="segments",k=b==="segments",P=S||w||T,A=E||x,C=t.pstyle("source-endpoint"),_=A?"outside-to-node":C.value,R=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,L=t.pstyle("target-endpoint"),O=A?"outside-to-node":L.value,D=l.pstyle("corner-radius").value==="auto"?"auto":l.pstyle("corner-radius").pfValue;y.srcManEndpt=C,y.tgtManEndpt=L;var I,F,z,q,N=(e=(L==null||(r=L.pfValue)===null||r===void 0?void 0:r.length)===2?L.pfValue:null)!==null&&e!==void 0?e:[0,0],U=(n=(C==null||(a=C.pfValue)===null||a===void 0?void 0:a.length)===2?C.pfValue:null)!==null&&n!==void 0?n:[0,0];if(S){var Y=[y.ctrlpts[0],y.ctrlpts[1]],$=w?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:Y;I=$,F=Y}else if(T){var j=k?y.segpts.slice(0,2):[c.x+N[0],c.y+N[1]],te=k?y.segpts.slice(y.segpts.length-2):[u.x+U[0],u.y+U[1]];I=te,F=j}if(O==="inside-to-node")s=[c.x,c.y];else if(L.units)s=this.manualEndptToPx(l,L);else if(O==="outside-to-line")s=y.tgtIntn;else if(O==="outside-to-node"||O==="outside-to-node-or-label"?z=I:(O==="outside-to-line"||O==="outside-to-line-or-label")&&(z=[u.x,u.y]),s=i.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),z[0],z[1],0,D,g),O==="outside-to-node-or-label"||O==="outside-to-line-or-label"){var oe=l._private.rscratch,ee=oe.labelWidth,V=oe.labelHeight,W=oe.labelX,H=oe.labelY,Q=ee/2,se=V/2,ve=l.pstyle("text-valign").value;ve==="top"?H-=se:ve==="bottom"&&(H+=se);var Ne=l.pstyle("text-halign").value;Ne==="left"?W-=Q:Ne==="right"&&(W+=Q);var De=Ps(z[0],z[1],[W-Q,H-se,W+Q,H-se,W+Q,H+se,W-Q,H+se],c.x,c.y);if(De.length>0){var ke=u,Ce=Ea(ke,hi(s)),de=Ea(ke,hi(De)),xe=Ce;if(de<Ce&&(s=De,xe=de),De.length>2){var we=Ea(ke,{x:De[2],y:De[3]});we<xe&&(s=[De[2],De[3]])}}}var Me=yl(s,I,i.arrowShapes[f].spacing(t)+h),Se=yl(s,I,i.arrowShapes[f].gap(t)+h);if(y.endX=Se[0],y.endY=Se[1],y.arrowEndX=Me[0],y.arrowEndY=Me[1],_==="inside-to-node")s=[u.x,u.y];else if(C.units)s=this.manualEndptToPx(o,C);else if(_==="outside-to-line")s=y.srcIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?q=F:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(q=[c.x,c.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(u.x,u.y,o.outerWidth(),o.outerHeight(),q[0],q[1],0,R,p),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var ze=o._private.rscratch,Ye=ze.labelWidth,Ke=ze.labelHeight,Xe=ze.labelX,Ze=ze.labelY,Re=Ye/2,pe=Ke/2,J=o.pstyle("text-valign").value;J==="top"?Ze-=pe:J==="bottom"&&(Ze+=pe);var M=o.pstyle("text-halign").value;M==="left"?Xe-=Re:M==="right"&&(Xe+=Re);var G=Ps(q[0],q[1],[Xe-Re,Ze-pe,Xe+Re,Ze-pe,Xe+Re,Ze+pe,Xe-Re,Ze+pe],u.x,u.y);if(G.length>0){var K=c,X=Ea(K,hi(s)),Z=Ea(K,hi(G)),fe=X;if(Z<X&&(s=[G[0],G[1]],fe=Z),G.length>2){var ne=Ea(K,{x:G[2],y:G[3]});ne<fe&&(s=[G[2],G[3]])}}}var Ee=yl(s,F,i.arrowShapes[d].spacing(t)+v),be=yl(s,F,i.arrowShapes[d].gap(t)+v);y.startX=be[0],y.startY=be[1],y.arrowStartX=Ee[0],y.arrowStartY=Ee[1],P&&(!ue(y.startX)||!ue(y.startY)||!ue(y.endX)||!ue(y.endY)?y.badLine=!0:y.badLine=!1)};Gs.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Gs.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};fh={};fh.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)iF(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};fh.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};Kr={};Kr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Gn(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(u){case"left":r=l.x-i/2-o;break;case"right":r=l.x+i/2+o;break;default:r=l.x}switch(c){case"top":n=l.y-s/2-o;break;case"bottom":n=l.y+s/2+o;break;default:n=l.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};Ub=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},$b=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Ub(n,a)},sF=function(e,r,n,a){var i=As(0,a-.001,1),s=As(0,a+.001,1),o=pi(e,r,n,i),l=pi(e,r,n,s);return $b(o,l)};Kr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(f,d,h){dn(r.rscratch,f,d,h),dn(r.rstyle,f,d,h)};s("labelX",null,e.x),s("labelY",null,e.y);var o=Ub(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},v={x:n.allpts[d+2],y:n.allpts[d+3]},p={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:h,p1:v,p2:p,startDist:0,length:0,segments:[]})}var g=r.rstyle.bezierPts,m=a.bezierProjPcts.length;function y(w,T,k,P,A){var C=Aa(T,k),_=w.segments[w.segments.length-1],R={p0:T,p1:k,t0:P,t1:A,startDist:_?_.startDist+_.length:0,length:C};w.segments.push(R),w.length+=C}for(var b=0;b<f.length;b++){var x=f[b],E=f[b-1];E&&(x.startDist=E.startDist+E.length),y(x,x.p0,g[b*m],0,a.bezierProjPcts[0]);for(var S=0;S<m-1;S++)y(x,g[b*m+S],g[b*m+S+1],a.bezierProjPcts[S],a.bezierProjPcts[S+1]);y(x,g[b*m+m-1],x.p2,a.bezierProjPcts[m-1],1)}return l.cache=f},u=function(f){var d,h=f==="source";if(i[f]){var v=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=l(),g,m=0,y=0,b=0;b<p.length;b++){for(var x=p[h?b:p.length-1-b],E=0;E<x.segments.length;E++){var S=x.segments[h?E:x.segments.length-1-E],w=b===p.length-1&&E===x.segments.length-1;if(m=y,y+=S.length,y>=v||w){g={cp:x,segment:S};break}}if(g)break}var T=g.cp,k=g.segment,P=(v-m)/k.length,A=k.t1-k.t0,C=h?k.t0+A*P:k.t1-A*P;C=As(0,C,1),e=pi(T.p0,T.p1,T.p2,C),d=sF(T.p0,T.p1,T.p2,C);break}case"straight":case"segments":case"haystack":{for(var _=0,R,L,O,D,I=n.allpts.length,F=0;F+3<I&&(h?(O={x:n.allpts[F],y:n.allpts[F+1]},D={x:n.allpts[F+2],y:n.allpts[F+3]}):(O={x:n.allpts[I-2-F],y:n.allpts[I-1-F]},D={x:n.allpts[I-4-F],y:n.allpts[I-3-F]}),R=Aa(O,D),L=_,_+=R,!(_>=v));F+=2);var z=v-L,q=z/R;q=As(0,q,1),e=AO(O,D,q),d=$b(O,D);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,d)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Kr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Kr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=ka(n,t._private.labelDimsKey);if(fr(r.rscratch,"prefixedLabelDimsKey",e)!==a){dn(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,l=fr(r.rscratch,"labelWrapCachedLines",e)||[],u=o!=="wrap"?1:Math.max(l.length,1),c=i.height/u,f=c*s,d=i.width,h=i.height+(u-1)*(s-1)*c;dn(r.rstyle,"labelWidth",e,d),dn(r.rscratch,"labelWidth",e,d),dn(r.rstyle,"labelHeight",e,h),dn(r.rscratch,"labelHeight",e,h),dn(r.rscratch,"labelLineHeight",e,f)}};Kr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(U,Y){return Y?(dn(r.rscratch,U,e,Y),Y):fr(r.rscratch,U,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var l=s("labelKey");if(l!=null&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var u="\u200B",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,h=d==="anywhere",v=[],p=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var m=c[g],y=this.calculateLabelDimensions(t,m),b=y.width;if(h){var x=m.split("").join(u);m=x}if(b>f){var E=m.matchAll(p),S="",w=0,T=hr(E),k;try{for(T.s();!(k=T.n()).done;){var P=k.value,A=P[0],C=m.substring(w,P.index);w=P.index+A.length;var _=S.length===0?C:S+C+A,R=this.calculateLabelDimensions(t,_),L=R.width;L<=f?S+=C+A:(S&&v.push(S),S=C+A)}}catch(N){T.e(N)}finally{T.f()}S.match(/^[\s\u200b]+$/)||v.push(S)}else v.push(m)}s("labelWrapCachedLines",v),a=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",l)}else if(o==="ellipsis"){var O=t.pstyle("text-max-width").pfValue,D="",I="\u2026",F=!1;if(this.calculateLabelDimensions(t,a).width<O)return a;for(var z=0;z<a.length;z++){var q=this.calculateLabelDimensions(t,D+a[z]+I).width;if(q>O)break;D+=a[z],z===a.length-1&&(F=!0)}return F||(D+=I),D}return a};Kr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Kr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(s," ").concat(u," ").concat(o,"px ").concat(l);for(var h=0,v=0,p=e.split(`
`),g=0;g<p.length;g++){var m=p[g],y=f.measureText(m),b=Math.ceil(y.width),x=o;h=Math.max(b,h),v+=x}return h+=i,v+=i,{width:h,height:v}};Kr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};Kr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};Yb={},o0=28,l0=!1;Yb.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<o0||t.height()<o0))return l0||(st("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),l0=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};gu={};gu.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var l=0;l<s.length;l++){var u=s[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var d=o[f];d(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};gu.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};gu.recalculateRenderedStyle=function(t,e){var r=function(x){return x._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,l=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(l.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(l.clean=!1),!(e&&l.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),l.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],f=c._private,d=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],g=p._private,m=g.rstyle,y=g.rscratch;m.srcX=y.arrowStartX,m.srcY=y.arrowStartY,m.tgtX=y.arrowEndX,m.tgtY=y.arrowEndY,m.midX=y.midX,m.midY=y.midY,m.labelAngle=y.labelAngle,m.sourceLabelAngle=y.sourceLabelAngle,m.targetLabelAngle=y.targetLabelAngle}}}};pu={};pu.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};pu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};pu.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Ab),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};jb={};[La,Kl,tr,Gs,fh,Kr,Yb,gu,pu].forEach(function(t){Le(jb,t)});Kb={};Kb.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",l=t.substring(0,o.length).toLowerCase()===o;return l||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};ki={};ki.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var l=this.binder(o);i.push(l.on.apply(l,a))}}return i}var l=this.binder(t);return l.on.apply(l,a)};ki.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||yR(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch(o){}e.supportsPassiveEvents=a}var s=function(l,u,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c!=null?c:!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};ki.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};ki.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};ki.load=function(){var t=this,e=t.cy.window(),r=function(M){return M.selected()},n=function(M){var G=M.getRootNode();if(G&&G.nodeType===11&&G.host!==void 0)return G},a=function(M,G,K,X){M==null&&(M=t.cy);for(var Z=0;Z<G.length;Z++){var fe=G[Z];M.emit({originalEvent:K,type:fe,position:X})}},i=function(M){return M.shiftKey||M.metaKey||M.ctrlKey},s=function(M,G){var K=!0;if(t.cy.hasCompoundNodes()&&M&&M.pannable())for(var X=0;G&&X<G.length;X++){var M=G[X];if(M.isNode()&&M.isParent()&&!M.pannable()){K=!1;break}}else K=!0;return K},o=function(M){M[0]._private.grabbed=!0},l=function(M){M[0]._private.grabbed=!1},u=function(M){M[0]._private.rscratch.inDragLayer=!0},c=function(M){M[0]._private.rscratch.inDragLayer=!1},f=function(M){M[0]._private.rscratch.isGrabTarget=!0},d=function(M){M[0]._private.rscratch.isGrabTarget=!1},h=function(M,G){var K=G.addToList,X=K.has(M);!X&&M.grabbable()&&!M.locked()&&(K.merge(M),o(M))},v=function(M,G){if(M.cy().hasCompoundNodes()&&!(G.inDragLayer==null&&G.addToList==null)){var K=M.descendants();G.inDragLayer&&(K.forEach(u),K.connectedEdges().forEach(u)),G.addToList&&h(K,G)}},p=function(M,G){G=G||{};var K=M.cy().hasCompoundNodes();G.inDragLayer&&(M.forEach(u),M.neighborhood().stdFilter(function(X){return!K||X.isEdge()}).forEach(u)),G.addToList&&M.forEach(function(X){h(X,G)}),v(M,G),y(M,{inDragLayer:G.inDragLayer}),t.updateCachedGrabbedEles()},g=p,m=function(M){M&&(t.getCachedZSortedEles().forEach(function(G){l(G),c(G),d(G)}),t.updateCachedGrabbedEles())},y=function(M,G){if(!(G.inDragLayer==null&&G.addToList==null)&&M.cy().hasCompoundNodes()){var K=M.ancestors().orphans();if(!K.same(M)){var X=K.descendants().spawnSelf().merge(K).unmerge(M).unmerge(M.descendants()),Z=X.connectedEdges();G.inDragLayer&&(Z.forEach(u),X.forEach(u)),G.addToList&&X.forEach(function(fe){h(fe,G)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},x=typeof MutationObserver!="undefined",E=typeof ResizeObserver!="undefined";x?(t.removeObserver=new MutationObserver(function(J){for(var M=0;M<J.length;M++){var G=J[M],K=G.removedNodes;if(K)for(var X=0;X<K.length;X++){var Z=K[X];if(Z===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(J){t.destroy()});var S=zs(function(){t.cy.resize()},100);x&&(t.styleObserver=new MutationObserver(S),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",S),E&&(t.resizeObserver=new ResizeObserver(S),t.resizeObserver.observe(t.container));var w=function(M,G){for(;M!=null;)G(M),M=M.parentNode},T=function(){t.invalidateContainerClientCoordsCache()};w(t.container,function(J){t.registerBinding(J,"transitionend",T),t.registerBinding(J,"animationend",T),t.registerBinding(J,"scroll",T)}),t.registerBinding(t.container,"contextmenu",function(J){J.preventDefault()});var k=function(){return t.selection[4]!==0},P=function(M){for(var G=t.findContainerClientCoords(),K=G[0],X=G[1],Z=G[2],fe=G[3],ne=M.touches?M.touches:[M],Ee=!1,be=0;be<ne.length;be++){var Pe=ne[be];if(K<=Pe.clientX&&Pe.clientX<=K+Z&&X<=Pe.clientY&&Pe.clientY<=X+fe){Ee=!0;break}}if(!Ee)return!1;for(var We=t.container,Be=M.target,me=Be.parentNode,Ve=!1;me;){if(me===We){Ve=!0;break}me=me.parentNode}return!!Ve};t.registerBinding(t.container,"mousedown",function(M){if(P(M)&&!(t.hoverData.which===1&&M.which!==1)){M.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=M.which;var G=t.cy,K=[M.clientX,M.clientY],X=t.projectIntoViewport(K[0],K[1]),Z=t.selection,fe=t.findNearestElements(X[0],X[1],!0,!1),ne=fe[0],Ee=t.dragData.possibleDragElements;t.hoverData.mdownPos=X,t.hoverData.mdownGPos=K;var be=function(Fe){return{originalEvent:M,type:Fe,position:{x:X[0],y:X[1]}}},Pe=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Fe=t.hoverData.down;Fe?Fe.emit(be("taphold")):G.emit(be("taphold"))}},t.tapholdDuration)};if(M.which==3){t.hoverData.cxtStarted=!0;var We={originalEvent:M,type:"cxttapstart",position:{x:X[0],y:X[1]}};ne?(ne.activate(),ne.emit(We),t.hoverData.down=ne):G.emit(We),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(M.which==1){ne&&ne.activate();{if(ne!=null&&t.nodeIsGrabbable(ne)){var Be=function(Fe){Fe.emit(be("grab"))};if(f(ne),!ne.selected())Ee=t.dragData.possibleDragElements=G.collection(),g(ne,{addToList:Ee}),ne.emit(be("grabon")).emit(be("grab"));else{Ee=t.dragData.possibleDragElements=G.collection();var me=G.$(function(Ve){return Ve.isNode()&&Ve.selected()&&t.nodeIsGrabbable(Ve)});p(me,{addToList:Ee}),ne.emit(be("grabon")),me.forEach(Be)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ne,t.hoverData.downs=fe,t.hoverData.downTime=new Date().getTime()}a(ne,["mousedown","tapstart","vmousedown"],M,{x:X[0],y:X[1]}),ne==null?(Z[4]=1,t.data.bgActivePosistion={x:X[0],y:X[1]},t.redrawHint("select",!0),t.redraw()):ne.pannable()&&(Z[4]=1),Pe()}Z[0]=Z[2]=X[0],Z[1]=Z[3]=X[1]}},!1);var A=n(t.container);t.registerBinding([e,A],"mousemove",function(M){var G=t.hoverData.capture;if(!(!G&&!P(M))){var K=!1,X=t.cy,Z=X.zoom(),fe=[M.clientX,M.clientY],ne=t.projectIntoViewport(fe[0],fe[1]),Ee=t.hoverData.mdownPos,be=t.hoverData.mdownGPos,Pe=t.selection,We=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(We=t.findNearestElement(ne[0],ne[1],!0,!1));var Be=t.hoverData.last,me=t.hoverData.down,Ve=[ne[0]-Pe[2],ne[1]-Pe[3]],Fe=t.dragData.possibleDragElements,wt;if(be){var ht=fe[0]-be[0],qt=ht*ht,ut=fe[1]-be[1],Et=ut*ut,tt=qt+Et;t.hoverData.isOverThresholdDrag=wt=tt>=t.desktopTapThreshold2}var Dt=i(M);wt&&(t.hoverData.tapholdCancelled=!0);var Dr=function(){var he=t.hoverData.dragDelta=t.hoverData.dragDelta||[];he.length===0?(he.push(Ve[0]),he.push(Ve[1])):(he[0]+=Ve[0],he[1]+=Ve[1])};K=!0,a(We,["mousemove","vmousemove","tapdrag"],M,{x:ne[0],y:ne[1]});var Ct=function(he){return{originalEvent:M,type:he,position:{x:ne[0],y:ne[1]}}},ae=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||X.emit(Ct("boxstart")),Pe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(wt){var ie=Ct("cxtdrag");me?me.emit(ie):X.emit(ie),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||We!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(Ct("cxtdragout")),t.hoverData.cxtOver=We,We&&We.emit(Ct("cxtdragover")))}}else if(t.hoverData.dragging){if(K=!0,X.panningEnabled()&&X.userPanningEnabled()){var ge;if(t.hoverData.justStartedPan){var He=t.hoverData.mdownPos;ge={x:(ne[0]-He[0])*Z,y:(ne[1]-He[1])*Z},t.hoverData.justStartedPan=!1}else ge={x:Ve[0]*Z,y:Ve[1]*Z};X.panBy(ge),X.emit(Ct("dragpan")),t.hoverData.dragged=!0}ne=t.projectIntoViewport(M.clientX,M.clientY)}else if(Pe[4]==1&&(me==null||me.pannable())){if(wt){if(!t.hoverData.dragging&&X.boxSelectionEnabled()&&(Dt||!X.panningEnabled()||!X.userPanningEnabled()))ae();else if(!t.hoverData.selecting&&X.panningEnabled()&&X.userPanningEnabled()){var Te=s(me,t.hoverData.downs);Te&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Pe[4]=0,t.data.bgActivePosistion=hi(Ee),t.redrawHint("select",!0),t.redraw())}me&&me.pannable()&&me.active()&&me.unactivate()}}else{if(me&&me.pannable()&&me.active()&&me.unactivate(),(!me||!me.grabbed())&&We!=Be&&(Be&&a(Be,["mouseout","tapdragout"],M,{x:ne[0],y:ne[1]}),We&&a(We,["mouseover","tapdragover"],M,{x:ne[0],y:ne[1]}),t.hoverData.last=We),me)if(wt){if(X.boxSelectionEnabled()&&Dt)me&&me.grabbed()&&(m(Fe),me.emit(Ct("freeon")),Fe.emit(Ct("free")),t.dragData.didDrag&&(me.emit(Ct("dragfreeon")),Fe.emit(Ct("dragfree")))),ae();else if(me&&me.grabbed()&&t.nodeIsDraggable(me)){var _e=!t.dragData.didDrag;_e&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||p(Fe,{inDragLayer:!0});var ce={x:0,y:0};if(ue(Ve[0])&&ue(Ve[1])&&(ce.x+=Ve[0],ce.y+=Ve[1],_e)){var re=t.hoverData.dragDelta;re&&ue(re[0])&&ue(re[1])&&(ce.x+=re[0],ce.y+=re[1])}t.hoverData.draggingEles=!0,Fe.silentShift(ce).emit(Ct("position")).emit(Ct("drag")),t.redrawHint("drag",!0),t.redraw()}}else Dr();K=!0}if(Pe[2]=ne[0],Pe[3]=ne[1],K)return M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault(),!1}},!1);var C,_,R;t.registerBinding(e,"mouseup",function(M){if(!(t.hoverData.which===1&&M.which!==1&&t.hoverData.capture)){var G=t.hoverData.capture;if(G){t.hoverData.capture=!1;var K=t.cy,X=t.projectIntoViewport(M.clientX,M.clientY),Z=t.selection,fe=t.findNearestElement(X[0],X[1],!0,!1),ne=t.dragData.possibleDragElements,Ee=t.hoverData.down,be=i(M);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Ee&&Ee.unactivate();var Pe=function(ht){return{originalEvent:M,type:ht,position:{x:X[0],y:X[1]}}};if(t.hoverData.which===3){var We=Pe("cxttapend");if(Ee?Ee.emit(We):K.emit(We),!t.hoverData.cxtDragged){var Be=Pe("cxttap");Ee?Ee.emit(Be):K.emit(Be)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(fe,["mouseup","tapend","vmouseup"],M,{x:X[0],y:X[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Ee,["click","tap","vclick"],M,{x:X[0],y:X[1]}),_=!1,M.timeStamp-R<=K.multiClickDebounceTime()?(C&&clearTimeout(C),_=!0,R=null,a(Ee,["dblclick","dbltap","vdblclick"],M,{x:X[0],y:X[1]})):(C=setTimeout(function(){_||a(Ee,["oneclick","onetap","voneclick"],M,{x:X[0],y:X[1]})},K.multiClickDebounceTime()),R=M.timeStamp)),Ee==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(M)&&(K.$(r).unselect(["tapunselect"]),ne.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ne=K.collection()),fe==Ee&&!t.dragData.didDrag&&!t.hoverData.selecting&&fe!=null&&fe._private.selectable&&(t.hoverData.dragging||(K.selectionType()==="additive"||be?fe.selected()?fe.unselect(["tapunselect"]):fe.select(["tapselect"]):be||(K.$(r).unmerge(fe).unselect(["tapunselect"]),fe.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var me=K.collection(t.getAllInBox(Z[0],Z[1],Z[2],Z[3]));t.redrawHint("select",!0),me.length>0&&t.redrawHint("eles",!0),K.emit(Pe("boxend"));var Ve=function(ht){return ht.selectable()&&!ht.selected()};K.selectionType()==="additive"||be||K.$(r).unmerge(me).unselect(),me.emit(Pe("box")).stdFilter(Ve).select().emit(Pe("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Z[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Fe=Ee&&Ee.grabbed();m(ne),Fe&&(Ee.emit(Pe("freeon")),ne.emit(Pe("free")),t.dragData.didDrag&&(Ee.emit(Pe("dragfreeon")),ne.emit(Pe("dragfree"))))}}Z[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var L=[],O=4,D,I=1e5,F=function(M,G){for(var K=0;K<M.length;K++)if(M[K]%G!==0)return!1;return!0},z=function(M){for(var G=Math.abs(M[0]),K=1;K<M.length;K++)if(Math.abs(M[K])!==G)return!1;return!0},q=function(M){var G=!1,K=M.deltaY;if(K==null&&(M.wheelDeltaY!=null?K=M.wheelDeltaY/4:M.wheelDelta!=null&&(K=M.wheelDelta/4)),K!==0){if(D==null)if(L.length>=O){var X=L;if(D=F(X,5),!D){var Z=Math.abs(X[0]);D=z(X)&&Z>5}if(D)for(var fe=0;fe<X.length;fe++)I=Math.min(Math.abs(X[fe]),I)}else L.push(K),G=!0;else D&&(I=Math.min(Math.abs(K),I));if(!t.scrollingPage){var ne=t.cy,Ee=ne.zoom(),be=ne.pan(),Pe=t.projectIntoViewport(M.clientX,M.clientY),We=[Pe[0]*Ee+be.x,Pe[1]*Ee+be.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||k()){M.preventDefault();return}if(ne.panningEnabled()&&ne.userPanningEnabled()&&ne.zoomingEnabled()&&ne.userZoomingEnabled()){M.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Be;G&&Math.abs(K)>5&&(K=Zd(K)*5),Be=K/-250,D&&(Be/=I,Be*=3),Be=Be*t.wheelSensitivity;var me=M.deltaMode===1;me&&(Be*=33);var Ve=ne.zoom()*Math.pow(10,Be);M.type==="gesturechange"&&(Ve=t.gestureStartZoom*M.scale),ne.zoom({level:Ve,renderedPosition:{x:We[0],y:We[1]}}),ne.emit({type:M.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:M,position:{x:Pe[0],y:Pe[1]}})}}}};t.registerBinding(t.container,"wheel",q,!0),t.registerBinding(e,"scroll",function(M){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(M){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||M.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(J){t.hasTouchStarted||q(J)},!0),t.registerBinding(t.container,"mouseout",function(M){var G=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseout",position:{x:G[0],y:G[1]}})},!1),t.registerBinding(t.container,"mouseover",function(M){var G=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseover",position:{x:G[0],y:G[1]}})},!1);var N,U,Y,$,j,te,oe,ee,V,W,H,Q,se,ve=function(M,G,K,X){return Math.sqrt((K-M)*(K-M)+(X-G)*(X-G))},Ne=function(M,G,K,X){return(K-M)*(K-M)+(X-G)*(X-G)},De;t.registerBinding(t.container,"touchstart",De=function(M){if(t.hasTouchStarted=!0,!!P(M)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var G=t.cy,K=t.touchData.now,X=t.touchData.earlier;if(M.touches[0]){var Z=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);K[0]=Z[0],K[1]=Z[1]}if(M.touches[1]){var Z=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);K[2]=Z[0],K[3]=Z[1]}if(M.touches[2]){var Z=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);K[4]=Z[0],K[5]=Z[1]}var fe=function(Dt){return{originalEvent:M,type:Dt,position:{x:K[0],y:K[1]}}};if(M.touches[1]){t.touchData.singleTouchMoved=!0,m(t.dragData.touchDragEles);var ne=t.findContainerClientCoords();V=ne[0],W=ne[1],H=ne[2],Q=ne[3],N=M.touches[0].clientX-V,U=M.touches[0].clientY-W,Y=M.touches[1].clientX-V,$=M.touches[1].clientY-W,se=0<=N&&N<=H&&0<=Y&&Y<=H&&0<=U&&U<=Q&&0<=$&&$<=Q;var Ee=G.pan(),be=G.zoom();j=ve(N,U,Y,$),te=Ne(N,U,Y,$),oe=[(N+Y)/2,(U+$)/2],ee=[(oe[0]-Ee.x)/be,(oe[1]-Ee.y)/be];var Pe=200,We=Pe*Pe;if(te<We&&!M.touches[2]){var Be=t.findNearestElement(K[0],K[1],!0,!0),me=t.findNearestElement(K[2],K[3],!0,!0);Be&&Be.isNode()?(Be.activate().emit(fe("cxttapstart")),t.touchData.start=Be):me&&me.isNode()?(me.activate().emit(fe("cxttapstart")),t.touchData.start=me):G.emit(fe("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(M.touches[2])G.boxSelectionEnabled()&&M.preventDefault();else if(!M.touches[1]){if(M.touches[0]){var Ve=t.findNearestElements(K[0],K[1],!0,!0),Fe=Ve[0];if(Fe!=null&&(Fe.activate(),t.touchData.start=Fe,t.touchData.starts=Ve,t.nodeIsGrabbable(Fe))){var wt=t.dragData.touchDragEles=G.collection(),ht=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Fe.selected()?(ht=G.$(function(tt){return tt.selected()&&t.nodeIsGrabbable(tt)}),p(ht,{addToList:wt})):g(Fe,{addToList:wt}),f(Fe),Fe.emit(fe("grabon")),ht?ht.forEach(function(tt){tt.emit(fe("grab"))}):Fe.emit(fe("grab"))}a(Fe,["touchstart","tapstart","vmousedown"],M,{x:K[0],y:K[1]}),Fe==null&&(t.data.bgActivePosistion={x:Z[0],y:Z[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],M,{x:K[0],y:K[1]})},t.tapholdDuration)}}if(M.touches.length>=1){for(var qt=t.touchData.startPosition=[null,null,null,null,null,null],ut=0;ut<K.length;ut++)qt[ut]=X[ut]=K[ut];var Et=M.touches[0];t.touchData.startGPosition=[Et.clientX,Et.clientY]}}},!1);var ke;t.registerBinding(e,"touchmove",ke=function(M){var G=t.touchData.capture;if(!(!G&&!P(M))){var K=t.selection,X=t.cy,Z=t.touchData.now,fe=t.touchData.earlier,ne=X.zoom();if(M.touches[0]){var Ee=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);Z[0]=Ee[0],Z[1]=Ee[1]}if(M.touches[1]){var Ee=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);Z[2]=Ee[0],Z[3]=Ee[1]}if(M.touches[2]){var Ee=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);Z[4]=Ee[0],Z[5]=Ee[1]}var be=function(yP){return{originalEvent:M,type:yP,position:{x:Z[0],y:Z[1]}}},Pe=t.touchData.startGPosition,We;if(G&&M.touches[0]&&Pe){for(var Be=[],me=0;me<Z.length;me++)Be[me]=Z[me]-fe[me];var Ve=M.touches[0].clientX-Pe[0],Fe=Ve*Ve,wt=M.touches[0].clientY-Pe[1],ht=wt*wt,qt=Fe+ht;We=qt>=t.touchTapThreshold2}if(G&&t.touchData.cxt){M.preventDefault();var ut=M.touches[0].clientX-V,Et=M.touches[0].clientY-W,tt=M.touches[1].clientX-V,Dt=M.touches[1].clientY-W,Dr=Ne(ut,Et,tt,Dt),Ct=Dr/te,ae=150,ie=ae*ae,ge=1.5,He=ge*ge;if(Ct>=He||Dr>=ie){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Te=be("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(Te),t.touchData.start=null):X.emit(Te)}}if(G&&t.touchData.cxt){var Te=be("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Te):X.emit(Te),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var _e=t.findNearestElement(Z[0],Z[1],!0,!0);(!t.touchData.cxtOver||_e!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(be("cxtdragout")),t.touchData.cxtOver=_e,_e&&_e.emit(be("cxtdragover")))}else if(G&&M.touches[2]&&X.boxSelectionEnabled())M.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||X.emit(be("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,K[4]=1,!K||K.length===0||K[0]===void 0?(K[0]=(Z[0]+Z[2]+Z[4])/3,K[1]=(Z[1]+Z[3]+Z[5])/3,K[2]=(Z[0]+Z[2]+Z[4])/3+1,K[3]=(Z[1]+Z[3]+Z[5])/3+1):(K[2]=(Z[0]+Z[2]+Z[4])/3,K[3]=(Z[1]+Z[3]+Z[5])/3),t.redrawHint("select",!0),t.redraw();else if(G&&M.touches[1]&&!t.touchData.didSelect&&X.zoomingEnabled()&&X.panningEnabled()&&X.userZoomingEnabled()&&X.userPanningEnabled()){M.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ce=t.dragData.touchDragEles;if(ce){t.redrawHint("drag",!0);for(var re=0;re<ce.length;re++){var le=ce[re]._private;le.grabbed=!1,le.rscratch.inDragLayer=!1}}var he=t.touchData.start,ut=M.touches[0].clientX-V,Et=M.touches[0].clientY-W,tt=M.touches[1].clientX-V,Dt=M.touches[1].clientY-W,vt=ve(ut,Et,tt,Dt),ot=vt/j;if(se){var Lt=ut-N,Ht=Et-U,_n=tt-Y,Sn=Dt-$,tn=(Lt+_n)/2,rn=(Ht+Sn)/2,vr=X.zoom(),Rt=vr*ot,Nr=X.pan(),So=ee[0]*vr+Nr.x,Co=ee[1]*vr+Nr.y,To={x:-Rt/vr*(So-Nr.x-tn)+So,y:-Rt/vr*(Co-Nr.y-rn)+Co};if(he&&he.active()){var ce=t.dragData.touchDragEles;m(ce),t.redrawHint("drag",!0),t.redrawHint("eles",!0),he.unactivate().emit(be("freeon")),ce.emit(be("free")),t.dragData.didDrag&&(he.emit(be("dragfreeon")),ce.emit(be("dragfree")))}X.viewport({zoom:Rt,pan:To,cancelOnFailedZoom:!0}),X.emit(be("pinchzoom")),j=vt,N=ut,U=Et,Y=tt,$=Dt,t.pinching=!0}if(M.touches[0]){var Ee=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);Z[0]=Ee[0],Z[1]=Ee[1]}if(M.touches[1]){var Ee=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);Z[2]=Ee[0],Z[3]=Ee[1]}if(M.touches[2]){var Ee=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);Z[4]=Ee[0],Z[5]=Ee[1]}}else if(M.touches[0]&&!t.touchData.didSelect){var Lr=t.touchData.start,ju=t.touchData.last,_e;if(!t.hoverData.draggingEles&&!t.swipePanning&&(_e=t.findNearestElement(Z[0],Z[1],!0,!0)),G&&Lr!=null&&M.preventDefault(),G&&Lr!=null&&t.nodeIsDraggable(Lr))if(We){var ce=t.dragData.touchDragEles,Hv=!t.dragData.didDrag;Hv&&p(ce,{inDragLayer:!0}),t.dragData.didDrag=!0;var Wi={x:0,y:0};if(ue(Be[0])&&ue(Be[1])&&(Wi.x+=Be[0],Wi.y+=Be[1],Hv)){t.redrawHint("eles",!0);var Rr=t.touchData.dragDelta;Rr&&ue(Rr[0])&&ue(Rr[1])&&(Wi.x+=Rr[0],Wi.y+=Rr[1])}t.hoverData.draggingEles=!0,ce.silentShift(Wi).emit(be("position")).emit(be("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==fe[0]&&t.touchData.startPosition[1]==fe[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Rr=t.touchData.dragDelta=t.touchData.dragDelta||[];Rr.length===0?(Rr.push(Be[0]),Rr.push(Be[1])):(Rr[0]+=Be[0],Rr[1]+=Be[1])}if(a(Lr||_e,["touchmove","tapdrag","vmousemove"],M,{x:Z[0],y:Z[1]}),(!Lr||!Lr.grabbed())&&_e!=ju&&(ju&&ju.emit(be("tapdragout")),_e&&_e.emit(be("tapdragover"))),t.touchData.last=_e,G)for(var re=0;re<Z.length;re++)Z[re]&&t.touchData.startPosition[re]&&We&&(t.touchData.singleTouchMoved=!0);if(G&&(Lr==null||Lr.pannable())&&X.panningEnabled()&&X.userPanningEnabled()){var mP=s(Lr,t.touchData.starts);mP&&(M.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=hi(t.touchData.startPosition)),t.swipePanning?(X.panBy({x:Be[0]*ne,y:Be[1]*ne}),X.emit(be("dragpan"))):We&&(t.swipePanning=!0,X.panBy({x:Ve*ne,y:wt*ne}),X.emit(be("dragpan")),Lr&&(Lr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Ee=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);Z[0]=Ee[0],Z[1]=Ee[1]}}for(var me=0;me<Z.length;me++)fe[me]=Z[me];G&&M.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var Ce;t.registerBinding(e,"touchcancel",Ce=function(M){var G=t.touchData.start;t.touchData.capture=!1,G&&G.unactivate()});var de,xe,we,Me;if(t.registerBinding(e,"touchend",de=function(M){var G=t.touchData.start,K=t.touchData.capture;if(K)M.touches.length===0&&(t.touchData.capture=!1),M.preventDefault();else return;var X=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Z=t.cy,fe=Z.zoom(),ne=t.touchData.now,Ee=t.touchData.earlier;if(M.touches[0]){var be=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);ne[0]=be[0],ne[1]=be[1]}if(M.touches[1]){var be=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);ne[2]=be[0],ne[3]=be[1]}if(M.touches[2]){var be=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);ne[4]=be[0],ne[5]=be[1]}var Pe=function(ie){return{originalEvent:M,type:ie,position:{x:ne[0],y:ne[1]}}};G&&G.unactivate();var We;if(t.touchData.cxt){if(We=Pe("cxttapend"),G?G.emit(We):Z.emit(We),!t.touchData.cxtDragged){var Be=Pe("cxttap");G?G.emit(Be):Z.emit(Be)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!M.touches[2]&&Z.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var me=Z.collection(t.getAllInBox(X[0],X[1],X[2],X[3]));X[0]=void 0,X[1]=void 0,X[2]=void 0,X[3]=void 0,X[4]=0,t.redrawHint("select",!0),Z.emit(Pe("boxend"));var Ve=function(ie){return ie.selectable()&&!ie.selected()};me.emit(Pe("box")).stdFilter(Ve).select().emit(Pe("boxselect")),me.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(G!=null&&G.unactivate(),M.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!M.touches[1]){if(!M.touches[0]){if(!M.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Fe=t.dragData.touchDragEles;if(G!=null){var wt=G._private.grabbed;m(Fe),t.redrawHint("drag",!0),t.redrawHint("eles",!0),wt&&(G.emit(Pe("freeon")),Fe.emit(Pe("free")),t.dragData.didDrag&&(G.emit(Pe("dragfreeon")),Fe.emit(Pe("dragfree")))),a(G,["touchend","tapend","vmouseup","tapdragout"],M,{x:ne[0],y:ne[1]}),G.unactivate(),t.touchData.start=null}else{var ht=t.findNearestElement(ne[0],ne[1],!0,!0);a(ht,["touchend","tapend","vmouseup","tapdragout"],M,{x:ne[0],y:ne[1]})}var qt=t.touchData.startPosition[0]-ne[0],ut=qt*qt,Et=t.touchData.startPosition[1]-ne[1],tt=Et*Et,Dt=ut+tt,Dr=Dt*fe*fe;t.touchData.singleTouchMoved||(G||Z.$(":selected").unselect(["tapunselect"]),a(G,["tap","vclick"],M,{x:ne[0],y:ne[1]}),xe=!1,M.timeStamp-Me<=Z.multiClickDebounceTime()?(we&&clearTimeout(we),xe=!0,Me=null,a(G,["dbltap","vdblclick"],M,{x:ne[0],y:ne[1]})):(we=setTimeout(function(){xe||a(G,["onetap","voneclick"],M,{x:ne[0],y:ne[1]})},Z.multiClickDebounceTime()),Me=M.timeStamp)),G!=null&&!t.dragData.didDrag&&G._private.selectable&&Dr<t.touchTapThreshold2&&!t.pinching&&(Z.selectionType()==="single"?(Z.$(r).unmerge(G).unselect(["tapunselect"]),G.select(["tapselect"])):G.selected()?G.unselect(["tapunselect"]):G.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Ct=0;Ct<ne.length;Ct++)Ee[Ct]=ne[Ct];t.dragData.didDrag=!1,M.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),M.touches.length<2&&(M.touches.length===1&&(t.touchData.startGPosition=[M.touches[0].clientX,M.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent=="undefined"){var Se=[],ze=function(M){return{clientX:M.clientX,clientY:M.clientY,force:1,identifier:M.pointerId,pageX:M.pageX,pageY:M.pageY,radiusX:M.width/2,radiusY:M.height/2,screenX:M.screenX,screenY:M.screenY,target:M.target}},Ye=function(M){return{event:M,touch:ze(M)}},Ke=function(M){Se.push(Ye(M))},Xe=function(M){for(var G=0;G<Se.length;G++){var K=Se[G];if(K.event.pointerId===M.pointerId){Se.splice(G,1);return}}},Ze=function(M){var G=Se.filter(function(K){return K.event.pointerId===M.pointerId})[0];G.event=M,G.touch=ze(M)},Re=function(M){M.touches=Se.map(function(G){return G.touch})},pe=function(M){return M.pointerType==="mouse"||M.pointerType===4};t.registerBinding(t.container,"pointerdown",function(J){pe(J)||(J.preventDefault(),Ke(J),Re(J),De(J))}),t.registerBinding(t.container,"pointerup",function(J){pe(J)||(Xe(J),Re(J),de(J))}),t.registerBinding(t.container,"pointercancel",function(J){pe(J)||(Xe(J),Re(J),Ce(J))}),t.registerBinding(t.container,"pointermove",function(J){pe(J)||(J.preventDefault(),Ze(J),Re(J),ke(J))})}};pn={};pn.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,l){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,l,u,c){return Ps(o,l,this.points,n,a,i/2,s/2,u)},checkPoint:function(n,a,i,s,o,l,u,c){return gn(n,a,this.points,l,u,s,o,[0,-1],i)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,a,i,s,o,l){return OO(this.points,n,a,i,s,o)}}};pn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,l){return WO(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,l){return Ta(e,r,a,i,s,o,n)}}};pn.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var c=i/2,f=s/2;o=o==="auto"?X0(i,s):o;for(var d=new Array(e.length/2),h=0;h<e.length/2;h++)d[h]={x:n+c*e[h*2],y:a+f*e[h*2+1]};var v,p,g,m,y=d.length;for(p=d[y-1],v=0;v<y;v++)g=d[v%y],m=d[(v+1)%y],l[u][v]=ch(p,g,m,o),p=g,g=m;return l[u]},draw:function(n,a,i,s,o,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,l,u,"drawCorners"))},intersectLine:function(n,a,i,s,o,l,u,c,f){return GO(o,l,this.points,n,a,i,s,u,this.getOrCreateCorners(n,a,i,s,c,f,"corners"))},checkPoint:function(n,a,i,s,o,l,u,c,f){return VO(n,a,this.points,l,u,s,o,this.getOrCreateCorners(l,u,s,o,c,f,"corners"))}}};pn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:nr(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,l){return j0(i,s,e,r,n,a,o,l)},checkPoint:function(e,r,n,a,i,s,o,l){var u=a/2,c=i/2;l=l==="auto"?$n(a,i):l,l=Math.min(u,c,l);var f=l*2;return!!(gn(e,r,this.points,s,o,a,i-f,[0,-1],n)||gn(e,r,this.points,s,o,a-f,i,[0,-1],n)||Ta(e,r,f,f,s-u+l,o-c+l,n)||Ta(e,r,f,f,s+u-l,o-c+l,n)||Ta(e,r,f,f,s+u-l,o+c-l,n)||Ta(e,r,f,f,s-u+l,o+c-l,n))}}};pn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Jd(),points:nr(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,l=e/2,u=n-l,c=n+l,f=a-o,d=a+o;return{topLeft:[u,f+s,u+s,f,u+s,f+s],topRight:[c-s,f,c,f+s,c-s,f+s],bottomRight:[c,d-s,c-s,d,c-s,d-s],bottomLeft:[u+s,d,u,d-s,u+s,d-s]}},intersectLine:function(e,r,n,a,i,s,o,l){var u=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Ps(i,s,c,e,r)},checkPoint:function(e,r,n,a,i,s,o,l){var u=l==="auto"?this.cornerLength:l;if(gn(e,r,this.points,s,o,a,i-2*u,[0,-1],n)||gn(e,r,this.points,s,o,a-2*u,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,s,o);return dr(e,r,c.topLeft)||dr(e,r,c.topRight)||dr(e,r,c.bottomRight)||dr(e,r,c.bottomLeft)}}};pn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:nr(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,l){var u=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),h=function(g){var m=pi({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},u),y=pi({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),b=pi({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],m.x,m.y,y.x,y.y,b.x,b.y,g[4],g[5]]},v=[].concat(h(d.topLeft),h(d.topRight),h(d.bottomRight),h(d.bottomLeft));return Ps(i,s,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,l=n+s,u=a-i,c=a+i,f=Cd(e,r),d=f.heightOffset,h=f.widthOffset,v=f.ctrlPtOffsetPct*e,p={topLeft:[o,u+d,o+v,u,o+h,u],topRight:[l-h,u,l-v,u,l,u+d],bottomRight:[l,c-d,l-v,c,l-h,c],bottomLeft:[o+h,c,o+v,c,o,c-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,s,o,l){var u=Cd(a,i),c=u.heightOffset,f=u.widthOffset;if(gn(e,r,this.points,s,o,a,i-2*c,[0,-1],n)||gn(e,r,this.points,s,o,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,s,o),h=function(T,k,P){var A=P[4],C=P[2],_=P[0],R=P[5],L=P[1],O=Math.min(A,_),D=Math.max(A,_),I=Math.min(R,L),F=Math.max(R,L);if(O<=T&&T<=D&&I<=k&&k<=F){var z=UO(A,C,_),q=qO(z[0],z[1],z[2],T),N=q.filter(function(U){return 0<=U&&U<=1});if(N.length>0)return N[0]}return null},v=Object.keys(d),p=0;p<v.length;p++){var g=v[p],m=d[g],y=h(e,r,m);if(y!=null){var b=m[5],x=m[3],E=m[1],S=Gt(b,x,E,y);if(m.isTop&&S<=r||m.isBottom&&r<=S)return!0}}return!1}}};pn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:nr(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,l){var u=e-(n/2+o),c=r-(a/2+o),f=c,d=e+(n/2+o),h=Vn(i,s,e,r,u,c,d,f,!1);return h.length>0?h:j0(i,s,e,r,n,a,o,l)},checkPoint:function(e,r,n,a,i,s,o,l){l=l==="auto"?$n(a,i):l;var u=2*l;if(gn(e,r,this.points,s,o,a,i-u,[0,-1],n)||gn(e,r,this.points,s,o,a-u,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(dr(e,r,d)||Ta(e,r,u,u,s+a/2-l,o+i/2-l,n)||Ta(e,r,u,u,s-a/2+l,o+i/2-l,n))}}};pn.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",nr(3,0)),this.generateRoundPolygon("round-triangle",nr(3,0)),this.generatePolygon("rectangle",nr(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",nr(5,0)),this.generateRoundPolygon("round-pentagon",nr(5,0)),this.generatePolygon("hexagon",nr(6,0)),this.generateRoundPolygon("round-hexagon",nr(6,0)),this.generatePolygon("heptagon",nr(7,0)),this.generateRoundPolygon("round-heptagon",nr(7,0)),this.generatePolygon("octagon",nr(8,0)),this.generateRoundPolygon("round-octagon",nr(8,0));var n=new Array(20);{var a=Sd(5,0),i=Sd(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=K0(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,u)}};Us={};Us.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Us.redraw=function(t){t=t||G0();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Us.beforeRender=function(t,e){if(!this.destroyed){e==null&&St("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};u0=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Us.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){u0(t,!0,a);var i=vn();t.render(t.renderOptions);var s=t.lastDrawTime=vn();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else u0(t,!1,a);t.skipFrame=!1,Vl(r)}};Vl(r)}};oF=function(e){this.init(e)},Xb=oF,Ai=Xb.prototype;Ai.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Ai.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",l=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var u=a.createElement("style");u.id=s,u.textContent="."+o+" { position: relative; }",i.insertBefore(u,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&st("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ue(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Ai.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Ai.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(i){}};Ai.isHeadless=function(){return!1};[uh,jb,Kb,ki,pn,Us].forEach(function(t){Le(Ai,t)});gd=1e3/60,Zb={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=zs(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(u,c){var f=vn(),d=a.averageRedrawTime,h=a.lastRedrawTime,v=[],p=a.cy.extent(),g=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var m=vn(),y=m-f,b=m-c;if(h<gd){var x=gd-(u?d:0);if(b>=e.deqFastCost*x)break}else if(u){if(y>=e.deqCost*h||y>=e.deqAvgCost*d)break}else if(b>=e.deqNoDrawCost*gd)break;var E=e.deq(n,g,p);if(E.length>0)for(var S=0;S<E.length;S++)v.push(E[S]);else break}v.length>0&&(e.onDeqd(n,v),!u&&e.shouldRedraw(n,v,g,p)&&i())},o=e.priority||jd;a.beforeRender(s,o(n))}}}},lF=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wl;Xn(this,t),this.idsByKey=new hn,this.keyForId=new hn,this.cachesByLvl=new hn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Zn(t,[{key:"getIdsFor",value:function(r){r==null&&St("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new _i,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new hn,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),c0=25,Tl=50,ql=-4,Fd=3,Qb=7.99,uF=8,cF=1024,fF=1024,dF=1024,hF=.2,vF=.8,gF=10,pF=.15,mF=.1,yF=.9,bF=.9,xF=100,wF=1,gi={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},EF=Zt({getKey:null,doesEleInvalidateKey:Wl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:V0,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ws=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=EF(r);Le(n,a),n.lookup=new lF(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Wt=ws.prototype;Wt.reasons=gi;Wt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Wt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};Wt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Vs(function(r,n){return n.reqs-r.reqs});return e};Wt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Wt.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Xd(o*r))),n<ql)n=ql;else if(o>=Qb||n>Fd)return null;var u=Math.pow(2,n),c=e.h*u,f=e.w*u,d=s.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var h=l.get(t,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var v;if(c<=c0?v=c0:c<=Tl?v=Tl:v=Math.ceil(c/Tl)*Tl,c>dF||f>fF)return null;var p=i.getTextureQueue(v),g=p[p.length-2],m=function(){return i.recycleTexture(v,f)||i.addTexture(v,f)};g||(g=p[p.length-1]),g||(g=m()),g.width-g.usedWidth<f&&(g=m());for(var y=function(O){return O&&O.scaledLabelShown===d},b=a&&a===gi.dequeue,x=a&&a===gi.highQuality,E=a&&a===gi.downscale,S,w=n+1;w<=Fd;w++){var T=l.get(t,w);if(T){S=T;break}}var k=S&&S.level===n+1?S:null,P=function(){g.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,g.usedWidth,0,f,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,f,v),y(k))P();else if(y(S))if(x){for(var A=S.level;A>n;A--)k=i.getElement(t,e,r,A,gi.downscale);P()}else return i.queueElement(t,S.level-1),S;else{var C;if(!b&&!x&&!E)for(var _=n-1;_>=ql;_--){var R=l.get(t,_);if(R){C=R;break}}if(y(C))return i.queueElement(t,n),C;g.context.translate(g.usedWidth,0),g.context.scale(u,u),this.drawElement(g.context,t,e,d,!1),g.context.scale(1/u,1/u),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:n,scale:u,width:f,height:c,scaledLabelShown:d},g.usedWidth+=Math.ceil(f+uF),g.eleCaches.push(h),l.set(t,n,h),i.checkTextureFullness(g),h};Wt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Wt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=ql;i<=Fd;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Wt.checkTextureUtility=function(t){t.invalidatedWidth>=hF*t.width&&this.retireTexture(t)};Wt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>vF&&t.fullnessChecks>=gF?Un(r,t):t.fullnessChecks++};Wt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Un(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Kd(i);var l=e.getRetiredTextureQueue(r);l.push(t)};Wt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(cF,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Wt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Kd(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Un(a,s),n.push(s),s}};Wt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};Wt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<wF&&r.size()>0;s++){var o=r.pop(),l=o.key,u=o.eles[0],c=i.hasCache(u,o.level);if(n[l]=null,c)continue;a.push(o);var f=e.getBoundingBox(u);e.getElement(u,f,t,o.level,gi.dequeue)}return a};Wt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Yd,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};Wt.onDequeue=function(t){this.onDequeues.push(t)};Wt.offDequeue=function(t){Un(this.onDequeues,t)};Wt.setupDequeueing=Zb.setupDequeueing({deqRedrawThreshold:xF,deqCost:pF,deqAvgCost:mF,deqNoDrawCost:yF,deqFastCost:bF,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var l=s[o].boundingBox();if(Qd(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});_F=1,_s=-4,Xl=2,SF=3.99,CF=50,TF=50,kF=.15,AF=.1,PF=.9,MF=.9,DF=1,f0=250,LF=4e3*4e3,d0=32767,RF=!0,Jb=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=vn()-2*f0,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=zs(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},TF),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=f0?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,l){return l.reqs-o.reqs};r.layersQueue=new Vs(i),r.setupDequeueing()},Qt=Jb.prototype,h0=0,OF=Math.pow(2,53)-1;Qt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:h0=++h0%OF,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,l=-s.bb.x1,u=-s.bb.y1;return o.scale(r,r),o.translate(l,u),s};Qt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Xd(s*e)),r<_s)r=_s;else if(s>=SF||r>Xl)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[],f,d=n.levelIsComplete(r,t),h,v=function(){var P=function(L){if(n.validateLayersElesOrdering(L,t),n.levelIsComplete(L,t))return h=l[L],!0},A=function(L){if(!h)for(var O=r+L;_s<=O&&O<=Xl&&!P(O);O+=L);};A(1),A(-1);for(var C=c.length-1;C>=0;C--){var _=c[C];_.invalid&&Un(c,_)}};if(!d)v();else return c;var p=function(){if(!f){f=ar();for(var P=0;P<t.length;P++)DO(f,t[P].boundingBox())}return f},g=function(P){P=P||{};var A=P.after;p();var C=Math.ceil(f.w*u),_=Math.ceil(f.h*u);if(C>d0||_>d0)return null;var R=C*_;if(R>LF)return null;var L=n.makeLayer(f,r);if(A!=null){var O=c.indexOf(A)+1;c.splice(O,0,L)}else(P.insert===void 0||P.insert)&&c.unshift(L);return L};if(n.skipping&&!o)return null;for(var m=null,y=t.length/_F,b=!o,x=0;x<t.length;x++){var E=t[x],S=E._private.rscratch,w=S.imgLayerCaches=S.imgLayerCaches||{},T=w[r];if(T){m=T;continue}if((!m||m.eles.length>=y||!Y0(m.bb,E.boundingBox()))&&(m=g({insert:!0,after:m}),!m))return null;h||b?n.queueLayer(m,E):n.drawEleInLayer(m,E,r,e),m.eles.push(E),w[r]=m}return h||(b?null:c)};Qt.getEleLevelForLayerLevel=function(t,e){return t};Qt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,RF),i.setImgSmoothing(s,!0))};Qt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Qt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Qt.updateElementsInLayers=function(t,e){for(var r=this,n=Is(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},u=_s;u<=Xl;u++){var c=l[u];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,s,i))}};Qt.haveLayers=function(){for(var t=this,e=!1,r=_s;r<=Xl;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Qt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=vn(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Qt.invalidateLayer=function(t){if(this.lastInvalidationTime=vn(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Un(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Qt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Qt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Qt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Qt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<DF&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Qt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};Qt.requestRedraw=zs(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Qt.setupDequeueing=Zb.setupDequeueing({deqRedrawThreshold:CF,deqCost:kF,deqAvgCost:AF,deqNoDrawCost:PF,deqFastCost:MF,deq:function(e,r){return e.dequeue(r)},onDeqd:jd,shouldRedraw:V0,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});ex={};ex.arrowShapeImpl=function(t){return(v0||(v0={polygon:BF,"triangle-backcurve":IF,"triangle-tee":g0,"circle-triangle":qF,"triangle-cross":g0,circle:FF}))[t]};Xr={};Xr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};Xr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Xr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Xr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=r.getElement(e,u,n,a,i);if(c!=null){var f=o(l,e);if(f===0)return;var d=s(l,e),h=u.x1,v=u.y1,p=u.w,g=u.h,m,y,b,x,E;if(d!==0){var S=r.getRotationPoint(e);b=S.x,x=S.y,t.translate(b,x),t.rotate(d),E=l.getImgSmoothing(t),E||l.setImgSmoothing(t,!0);var w=r.getRotationOffset(e);m=w.x,y=w.y}else m=h,y=v;var T;f!==1&&(T=t.globalAlpha,t.globalAlpha=T*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,m,y,p,g),f!==1&&(t.globalAlpha=T),d!==0&&(t.rotate(-d),t.translate(-b,-x),E||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};NF=function(){return 0},zF=function(e,r){return e.getTextAngle(r,null)},VF=function(e,r){return e.getTextAngle(r,"source")},WF=function(e,r){return e.getTextAngle(r,"target")},HF=function(e,r){return r.effectiveOpacity()},pd=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Xr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,l=o.eleTxrCache,u=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,d=e.boundingBox(),h=i===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Qd(d,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,l,r,a,h,NF,HF),(!v||!p)&&s.drawCachedElementPortion(t,e,u,r,a,h,zF,pd),v&&!p&&(s.drawCachedElementPortion(t,e,c,r,a,h,VF,pd),s.drawCachedElementPortion(t,e,f,r,a,h,WF,pd)),s.drawElementOverlay(t,e)}};Xr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Xr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};Xr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};Xr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],l=o.bb;l.w===0||l.h===0||t.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};mn={};mn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,m=u*c,y=u*c,b=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;f==="straight-triangle"?(s.eleStrokeStyle(t,e,L),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=h,t.lineCap=v,s.eleStrokeStyle(t,e,L),s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},x=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;if(t.lineWidth=h+p,t.lineCap=v,p>0)s.colorStrokeStyle(t,g[0],g[1],g[2],L);else{t.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},E=function(){a&&s.drawEdgeOverlay(t,e)},S=function(){a&&s.drawEdgeUnderlay(t,e)},w=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;s.drawArrowheads(t,e,L)},T=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var k=e.pstyle("ghost").value==="yes";if(k){var P=e.pstyle("ghost-offset-x").pfValue,A=e.pstyle("ghost-offset-y").pfValue,C=e.pstyle("ghost-opacity").value,_=m*C;t.translate(P,A),b(_),w(_),t.translate(-P,-A)}else x();S(),b(),w(),E(),T(),r&&t.translate(l.x1,l.y1)}};tx=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};mn.drawEdgeOverlay=tx("overlay");mn.drawEdgeUnderlay=tx("underlay");mn.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=f,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4)e.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1]);break;case"segments":if(a.isRound){var p=hr(a.roundCorners),g;try{for(p.s();!(g=p.n()).done;){var m=g.value;Hb(e,m)}}catch(b){p.e(b)}finally{p.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var y=2;y+1<r.length;y+=2)e.lineTo(r[y],r[y+1]);break}e=i,l?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};mn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],l=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};mn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};mn.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(r+"-arrow-width"),h=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(h*=f);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var p=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,u,f,l,h,n,a,i),t.globalCompositeOperation=p);var g=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,g[0],g[1],g[2],s),o.colorStrokeStyle(t,g[0],g[1],g[2],s),o.drawArrowShape(e,t,c,f,l,h,n,a,i)}}};mn.drawArrowShape=function(t,e,r,n,a,i,s,o,l){var u=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,h=e,v={x:s,y:o},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),m=u.arrowShapes[a];if(c){var y=u.arrowPathCache=u.arrowPathCache||[],b=ka(a),x=y[b];x!=null?(d=e=x,f=!0):(d=e=new Path2D,y[b]=d)}f||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,g,l,v,n),e.closePath&&e.closePath()),e=h,c&&(e.translate(s,o),e.rotate(l),e.scale(g,g)),(r==="filled"||r==="both")&&(c?e.fill(d):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?g:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-l),e.translate(-s,-o))};dh={};dh.safeDrawImage=function(t,e,r,n,a,i,s,o,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,s,o,l,u)}catch(c){st(c)}};dh.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,l=s.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),h=r.width(),v=r.height(),p=r.padding()*2,g=h+(c(r,"background-width-relative-to","value",n)==="inner"?0:p),m=v+(c(r,"background-height-relative-to","value",n)==="inner"?0:p),y=r._private.rscratch,b=c(r,"background-clip","value",n),x=b==="node",E=c(r,"background-image-opacity","value",n)*a,S=c(r,"background-image-smoothing","value",n),w=r.pstyle("corner-radius").value;w!=="auto"&&(w=r.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,k=e.height||e.cachedH;(T==null||k==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var P=T,A=k;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?P=c(r,"background-width","pfValue",n)*g:P=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?A=c(r,"background-height","pfValue",n)*m:A=c(r,"background-height","pfValue",n)),!(P===0||A===0)){if(f==="contain"){var C=Math.min(g/P,m/A);P*=C,A*=C}else if(f==="cover"){var C=Math.max(g/P,m/A);P*=C,A*=C}var _=o-g/2,R=c(r,"background-position-x","units",n),L=c(r,"background-position-x","pfValue",n);R==="%"?_+=(g-P)*L:_+=L;var O=c(r,"background-offset-x","units",n),D=c(r,"background-offset-x","pfValue",n);O==="%"?_+=(g-P)*D:_+=D;var I=l-m/2,F=c(r,"background-position-y","units",n),z=c(r,"background-position-y","pfValue",n);F==="%"?I+=(m-A)*z:I+=z;var q=c(r,"background-offset-y","units",n),N=c(r,"background-offset-y","pfValue",n);q==="%"?I+=(m-A)*N:I+=N,y.pathCache&&(_-=o,I-=l,o=0,l=0);var U=t.globalAlpha;t.globalAlpha=E;var Y=i.getImgSmoothing(t),$=!1;if(S==="no"&&Y?(i.setImgSmoothing(t,!1),$=!0):S==="yes"&&!Y&&(i.setImgSmoothing(t,!0),$=!0),d==="no-repeat")x&&(t.save(),y.pathCache?t.clip(y.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,l,g,m,w,y),t.clip())),i.safeDrawImage(t,e,0,0,T,k,_,I,P,A),x&&t.restore();else{var j=t.createPattern(e,d);t.fillStyle=j,i.nodeShapes[i.getNodeShape(r)].draw(t,o,l,g,m,w,y),t.translate(_,I),t.fill(),t.translate(-_,-I)}t.globalAlpha=U,$&&i.setImgSmoothing(t,Y)}};Ra={};Ra.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Xd(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};Ra.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var l=s.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!r,v;r&&(v=r,t.translate(-v.x1,-v.y1)),a==null?(s.drawText(t,e,null,h,i),e.isEdge()&&(s.drawText(t,e,"source",h,i),s.drawText(t,e,"target",h,i))):s.drawText(t,e,a,h,i),r&&t.translate(v.x1,v.y1)};Ra.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Ra.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*o,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],o),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};Ra.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=fr(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};Ra.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=fr(s,"labelX",r),u=fr(s,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var h=r?r+"-":"",v=fr(s,"labelWidth",r),p=fr(s,"labelHeight",r),g=e.pstyle(h+"text-margin-x").pfValue,m=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;y&&(b="center",x="center"),l+=g,u+=m;var E;switch(n?E=this.getTextAngle(e,r):E=0,E!==0&&(c=l,f=u,t.translate(c,f),t.rotate(E),l=0,u=0),x){case"top":break;case"center":u+=p/2;break;case"bottom":u+=p;break}var S=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,P=e.pstyle("text-background-shape").strValue,A=P==="round-rectangle"||P==="roundrectangle",C=P==="circle",_=2;if(S>0||T>0&&w>0){var R=t.fillStyle,L=t.strokeStyle,O=t.lineWidth,D=e.pstyle("text-background-color").value,I=e.pstyle("text-border-color").value,F=e.pstyle("text-border-style").value,z=S>0,q=T>0&&w>0,N=l-k;switch(b){case"left":N-=v;break;case"center":N-=v/2;break}var U=u-p-k,Y=v+2*k,$=p+2*k;if(z&&(t.fillStyle="rgba(".concat(D[0],",").concat(D[1],",").concat(D[2],",").concat(S*o,")")),q&&(t.strokeStyle="rgba(".concat(I[0],",").concat(I[1],",").concat(I[2],",").concat(w*o,")"),t.lineWidth=T,t.setLineDash))switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(A?(t.beginPath(),p0(t,N,U,Y,$,_)):C?(t.beginPath(),GF(t,N,U,Y,$)):(t.beginPath(),t.rect(N,U,Y,$)),z&&t.fill(),q&&t.stroke(),q&&F==="double"){var j=T/2;t.beginPath(),A?p0(t,N+j,U+j,Y-2*j,$-2*j,_):t.rect(N+j,U+j,Y-2*j,$-2*j),t.stroke()}t.fillStyle=R,t.strokeStyle=L,t.lineWidth=O,t.setLineDash&&t.setLineDash([])}var te=2*e.pstyle("text-outline-width").pfValue;if(te>0&&(t.lineWidth=te),e.pstyle("text-wrap").value==="wrap"){var oe=fr(s,"labelWrapCachedLines",r),ee=fr(s,"labelLineHeight",r),V=v/2,W=this.getLabelJustification(e);switch(W==="auto"||(b==="left"?W==="left"?l+=-v:W==="center"&&(l+=-V):b==="center"?W==="left"?l+=-V:W==="right"&&(l+=V):b==="right"&&(W==="center"?l+=V:W==="right"&&(l+=v))),x){case"top":u-=(oe.length-1)*ee;break;case"center":case"bottom":u-=(oe.length-1)*ee;break}for(var H=0;H<oe.length;H++)te>0&&t.strokeText(oe[H],l,u),t.fillText(oe[H],l,u),u+=ee}else te>0&&t.strokeText(d,l,u),t.fillText(d,l,u);E!==0&&(t.rotate(-E),t.translate(-c,-f))}}};Jn={};Jn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,l,u=e._private,c=u.rscratch,f=e.position();if(!(!ue(f.x)||!ue(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,h=s.usePaths(),v,p=!1,g=e.padding();o=e.width()+2*g,l=e.height()+2*g;var m;r&&(m=r,t.translate(-m.x1,-m.y1));for(var y=e.pstyle("background-image"),b=y.value,x=new Array(b.length),E=new Array(b.length),S=0,w=0;w<b.length;w++){var T=b[w],k=x[w]=T!=null&&T!=="none";if(k){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);S++,E[w]=s.getCachedImage(T,P,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var A=e.pstyle("background-blacken").value,C=e.pstyle("border-width").pfValue,_=e.pstyle("background-opacity").value*d,R=e.pstyle("border-color").value,L=e.pstyle("border-style").value,O=e.pstyle("border-join").value,D=e.pstyle("border-cap").value,I=e.pstyle("border-position").value,F=e.pstyle("border-dash-pattern").pfValue,z=e.pstyle("border-dash-offset").pfValue,q=e.pstyle("border-opacity").value*d,N=e.pstyle("outline-width").pfValue,U=e.pstyle("outline-color").value,Y=e.pstyle("outline-style").value,$=e.pstyle("outline-opacity").value*d,j=e.pstyle("outline-offset").value,te=e.pstyle("corner-radius").value;te!=="auto"&&(te=e.pstyle("corner-radius").pfValue);var oe=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;s.eleFillStyle(t,e,pe)},ee=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;s.colorStrokeStyle(t,R[0],R[1],R[2],pe)},V=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$;s.colorStrokeStyle(t,U[0],U[1],U[2],pe)},W=function(pe,J,M,G){var K=s.nodePathCache=s.nodePathCache||[],X=z0(M==="polygon"?M+","+G.join(","):M,""+J,""+pe,""+te),Z=K[X],fe,ne=!1;return Z!=null?(fe=Z,ne=!0,c.pathCache=fe):(fe=new Path2D,K[X]=c.pathCache=fe),{path:fe,cacheHit:ne}},H=e.pstyle("shape").strValue,Q=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(f.x,f.y);var se=W(o,l,H,Q);v=se.path,p=se.cacheHit}var ve=function(){if(!p){var pe=f;h&&(pe={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||t,pe.x,pe.y,o,l,te,c)}h?t.fill(v):t.fill()},Ne=function(){for(var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,M=u.backgrounding,G=0,K=0;K<E.length;K++){var X=e.cy().style().getIndexedStyle(e,"background-image-containment","value",K);if(J&&X==="over"||!J&&X==="inside"){G++;continue}x[K]&&E[K].complete&&!E[K].error&&(G++,s.drawInscribedImage(t,E[K],e,K,pe))}u.backgrounding=G!==S,M!==u.backgrounding&&e.updateStyle(!1)},De=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(e)&&(s.drawPie(t,e,J),pe&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,te,c)))},ke=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasStripe(e)&&(t.save(),h?t.clip(c.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,te,c),t.clip()),s.drawStripe(t,e,J),t.restore(),pe&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,te,c)))},Ce=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=(A>0?A:-A)*pe,M=A>0?0:255;A!==0&&(s.colorFillStyle(t,M,M,M,J),h?t.fill(v):t.fill())},de=function(){if(C>0){if(t.lineWidth=C,t.lineCap=D,t.lineJoin=O,t.setLineDash)switch(L){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(F),t.lineDashOffset=z;break;case"solid":case"double":t.setLineDash([]);break}if(I!=="center"){if(t.save(),t.lineWidth*=2,I==="inside")h?t.clip(v):t.clip();else{var pe=new Path2D;pe.rect(-o/2-C,-l/2-C,o+2*C,l+2*C),pe.addPath(v),t.clip(pe,"evenodd")}h?t.stroke(v):t.stroke(),t.restore()}else h?t.stroke(v):t.stroke();if(L==="double"){t.lineWidth=C/3;var J=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(v):t.stroke(),t.globalCompositeOperation=J}t.setLineDash&&t.setLineDash([])}},xe=function(){if(N>0){if(t.lineWidth=N,t.lineCap="butt",t.setLineDash)switch(Y){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var pe=f;h&&(pe={x:0,y:0});var J=s.getNodeShape(e),M=C;I==="inside"&&(M=0),I==="outside"&&(M*=2);var G=(o+M+(N+j))/o,K=(l+M+(N+j))/l,X=o*G,Z=l*K,fe=s.nodeShapes[J].points,ne;if(h){var Ee=W(X,Z,J,fe);ne=Ee.path}if(J==="ellipse")s.drawEllipsePath(ne||t,pe.x,pe.y,X,Z);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var be=0,Pe=0,We=0;J==="round-diamond"?be=(M+j+N)*1.4:J==="round-heptagon"?(be=(M+j+N)*1.075,We=-(M/2+j+N)/35):J==="round-hexagon"?be=(M+j+N)*1.12:J==="round-pentagon"?(be=(M+j+N)*1.13,We=-(M/2+j+N)/15):J==="round-tag"?(be=(M+j+N)*1.12,Pe=(M/2+N+j)*.07):J==="round-triangle"&&(be=(M+j+N)*(Math.PI/2),We=-(M+j/2+N)/Math.PI),be!==0&&(G=(o+be)/o,X=o*G,["round-hexagon","round-tag"].includes(J)||(K=(l+be)/l,Z=l*K)),te=te==="auto"?X0(X,Z):te;for(var Be=X/2,me=Z/2,Ve=te+(M+N+j)/2,Fe=new Array(fe.length/2),wt=new Array(fe.length/2),ht=0;ht<fe.length/2;ht++)Fe[ht]={x:pe.x+Pe+Be*fe[ht*2],y:pe.y+We+me*fe[ht*2+1]};var qt,ut,Et,tt,Dt=Fe.length;for(ut=Fe[Dt-1],qt=0;qt<Dt;qt++)Et=Fe[qt%Dt],tt=Fe[(qt+1)%Dt],wt[qt]=ch(ut,Et,tt,Ve),ut=Et,Et=tt;s.drawRoundPolygonPath(ne||t,pe.x+Pe,pe.y+We,o*G,l*K,fe,wt)}else if(["roundrectangle","round-rectangle"].includes(J))te=te==="auto"?$n(X,Z):te,s.drawRoundRectanglePath(ne||t,pe.x,pe.y,X,Z,te+(M+N+j)/2);else if(["cutrectangle","cut-rectangle"].includes(J))te=te==="auto"?Jd():te,s.drawCutRectanglePath(ne||t,pe.x,pe.y,X,Z,null,te+(M+N+j)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))te=te==="auto"?$n(X,Z):te,s.drawBottomRoundRectanglePath(ne||t,pe.x,pe.y,X,Z,te+(M+N+j)/2);else if(J==="barrel")s.drawBarrelPath(ne||t,pe.x,pe.y,X,Z);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var Dr=(M+N+j)/o;fe=Hl(Gl(fe,Dr)),s.drawPolygonPath(ne||t,pe.x,pe.y,o,l,fe)}else{var Ct=(M+N+j)/o;fe=Hl(Gl(fe,-Ct)),s.drawPolygonPath(ne||t,pe.x,pe.y,o,l,fe)}if(h?t.stroke(ne):t.stroke(),Y==="double"){t.lineWidth=M/3;var ae=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(ne):t.stroke(),t.globalCompositeOperation=ae}t.setLineDash&&t.setLineDash([])}},we=function(){a&&s.drawNodeOverlay(t,e,f,o,l)},Me=function(){a&&s.drawNodeUnderlay(t,e,f,o,l)},Se=function(){s.drawElementText(t,e,null,n)},ze=e.pstyle("ghost").value==="yes";if(ze){var Ye=e.pstyle("ghost-offset-x").pfValue,Ke=e.pstyle("ghost-offset-y").pfValue,Xe=e.pstyle("ghost-opacity").value,Ze=Xe*d;t.translate(Ye,Ke),V(),xe(),oe(Xe*_),ve(),Ne(Ze,!0),ee(Xe*q),de(),De(A!==0||C!==0),ke(A!==0||C!==0),Ne(Ze,!1),Ce(Ze),t.translate(-Ye,-Ke)}h&&t.translate(-f.x,-f.y),Me(),h&&t.translate(f.x,f.y),V(),xe(),oe(),ve(),Ne(d,!0),ee(),de(),De(A!==0||C!==0),ke(A!==0||C!==0),Ne(d,!1),Ce(),h&&t.translate(-f.x,-f.y),Se(),we(),r&&t.translate(m.x1,m.y1)}};rx=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||s==null){var h=n.padding();i=n.width()+2*h,s=n.height()+2*h}o.colorFillStyle(r,c[0],c[1],c[2],u),o.nodeShapes[f].draw(r,a.x,a.y,i+l*2,s+l*2,d),r.fill()}}}};Jn.drawNodeOverlay=rx("overlay");Jn.drawNodeUnderlay=rx("underlay");Jn.hasPie=function(t){return t=t[0],t._private.hasPie};Jn.hasStripe=function(t){return t=t[0],t._private.hasStripe};Jn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,l=n.x,u=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,h,v=0,p=this.usePaths();if(p&&(l=0,u=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2),s.units==="%"?h=d*s.pfValue:s.pfValue!==void 0&&(h=s.pfValue/2),!(h>=d))for(var g=1;g<=a.pieBackgroundN;g++){var m=e.pstyle("pie-"+g+"-background-size").value,y=e.pstyle("pie-"+g+"-background-color").value,b=e.pstyle("pie-"+g+"-background-opacity").value*r,x=m/100;x+v>1&&(x=1-v);var E=1.5*Math.PI+2*Math.PI*v;E+=o;var S=2*Math.PI*x,w=E+S;m===0||v>=1||v+x>1||(h===0?(t.beginPath(),t.moveTo(l,u),t.arc(l,u,d,E,w),t.closePath()):(t.beginPath(),t.arc(l,u,d,E,w),t.arc(l,u,h,w,E,!0),t.closePath()),this.colorFillStyle(t,y[0],y[1],y[2],b),t.fill(),v+=x)}};Jn.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),l=e.height(),u=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var h=o,v=l;d.units==="%"?(h=h*d.pfValue,v=v*d.pfValue):d.pfValue!==void 0&&(h=d.pfValue,v=d.pfValue),c&&(i=0,s=0),s-=h/2,i-=v/2;for(var p=1;p<=a.stripeBackgroundN;p++){var g=e.pstyle("stripe-"+p+"-background-size").value,m=e.pstyle("stripe-"+p+"-background-color").value,y=e.pstyle("stripe-"+p+"-background-opacity").value*r,b=g/100;b+u>1&&(b=1-u),!(g===0||u>=1||u+b>1)&&(t.beginPath(),t.rect(i,s+v*u,h,v*b),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],y),t.fill(),u+=b)}t.restore()};ir={},UF=100;ir.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};ir.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};ir.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=Aa(u,f),h=Aa(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var v=s?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,g))}else if(r.isEdge()){var m=r.sourceEndpoint(),y=r.targetEndpoint();i=t.createLinearGradient(m.x,m.y,y.x,y.y)}else{var b=s?{x:0,y:0}:r.position(),x=r.paddedWidth(),E=r.paddedHeight(),S=x/2,w=E/2,T=r.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":i=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":i=t.createLinearGradient(b.x+S,b.y,b.x-S,b.y);break;case"to-right":i=t.createLinearGradient(b.x-S,b.y,b.x+S,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-S,b.y-w,b.x+S,b.y+w);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-S,b.y+w,b.x+S,b.y-w);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+S,b.y-w,b.x-S,b.y+w);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+S,b.y+w,b.x-S,b.y-w);break}}if(!i)return null;for(var k=l.length===o.length,P=o.length,A=0;A<P;A++)i.addColorStop(k?l[A]:A/(P-1),"rgba("+o[A][0]+","+o[A][1]+","+o[A][2]+","+a+")");return i};ir.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};ir.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};ir.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};ir.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};ir.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};ir.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};ir.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var l=a*s,u=i*s,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=s}};ir.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};ir.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};ir.render=function(t){var e=this;t=t||G0();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,v=r.hasCompoundNodes(),p=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!g;var m=d;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(m=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var y=r.style(),b=r.zoom(),x=s!==void 0?s:b,E=r.pan(),S={x:E.x,y:E.y},w={zoom:b,pan:{x:E.x,y:E.y}},T=e.prevViewport,k=T===void 0||w.zoom!==T.zoom||w.pan.x!==T.pan.x||w.pan.y!==T.pan.y;!k&&!(p&&!v)&&(e.motionBlurPxRatio=1),o&&(S=o),x*=l,S.x*=l,S.y*=l;var P=e.getCachedZSortedEles();function A(ee,V,W,H,Q){var se=ee.globalCompositeOperation;ee.globalCompositeOperation="destination-out",e.colorFillStyle(ee,255,255,255,e.motionBlurTransparency),ee.fillRect(V,W,H,Q),ee.globalCompositeOperation=se}function C(ee,V){var W,H,Q,se;!e.clearingMotionBlur&&(ee===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||ee===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(W={x:E.x*h,y:E.y*h},H=b*h,Q=e.canvasWidth*h,se=e.canvasHeight*h):(W=S,H=x,Q=e.canvasWidth,se=e.canvasHeight),ee.setTransform(1,0,0,1,0,0),V==="motionBlur"?A(ee,0,0,Q,se):!n&&(V===void 0||V)&&ee.clearRect(0,0,Q,se),a||(ee.translate(W.x,W.y),ee.scale(H,H)),o&&ee.translate(o.x,o.y),s&&ee.scale(s,s)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var _=e.data.bufferContexts[e.TEXTURE_BUFFER];_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:_,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var w=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=u.contexts[e.NODE],L=e.textureCache.texture,w=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),d?A(R,0,0,w.width,w.height):R.clearRect(0,0,w.width,w.height);var O=y.core("outside-texture-bg-color").value,D=y.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,O[0],O[1],O[2],D),R.fillRect(0,0,w.width,w.height);var b=r.zoom();C(R,!1),R.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/l,w.height/w.zoom/l),R.drawImage(L,w.mpan.x,w.mpan.y,w.width/w.zoom/l,w.height/w.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var I=r.extent(),F=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),z=e.hideEdgesOnViewport&&F,q=[];if(q[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,q[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),q[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,q[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||q[e.NODE]){var N=d&&!q[e.NODE]&&h!==1,R=n||(N?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),U=d&&!N?"motionBlur":void 0;C(R,U),z?e.drawCachedNodes(R,P.nondrag,l,I):e.drawLayeredElements(R,P.nondrag,l,I),e.debug&&e.drawDebugPoints(R,P.nondrag),!a&&!d&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||q[e.DRAG])){var N=d&&!q[e.DRAG]&&h!==1,R=n||(N?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);C(R,d&&!N?"motionBlur":void 0),z?e.drawCachedNodes(R,P.drag,l,I):e.drawCachedElements(R,P.drag,l,I),e.debug&&e.drawDebugPoints(R,P.drag),!a&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,C),d&&h!==1){var Y=u.contexts[e.NODE],$=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],j=u.contexts[e.DRAG],te=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],oe=function(V,W,H){V.setTransform(1,0,0,1,0,0),H||!m?V.clearRect(0,0,e.canvasWidth,e.canvasHeight):A(V,0,0,e.canvasWidth,e.canvasHeight);var Q=h;V.drawImage(W,0,0,e.canvasWidth*Q,e.canvasHeight*Q,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||q[e.NODE])&&(oe(Y,$,q[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||q[e.DRAG])&&(oe(j,te,q[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=w,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},UF)),n||r.emit("render")};ir.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,l=a.canvasNeedsRedraw,u=t.forcedContext;if(r.showFps||!s&&l[r.SELECT_BOX]&&!o){var c=u||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),d=i.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),h=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=r.lastRedrawTime;if(r.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),g="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!ps){var m=c.measureText(g);ps=m.actualBoundingBoxAscent}c.fillText(g,0,ps);var y=60;c.strokeRect(0,ps+10,250,20),c.fillRect(0,ps+10,250*Math.min(p/y,1),20)}o||(l[r.SELECT_BOX]=!1)}};y0=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});sN=function(){function t(e,r,n,a){Xn(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Zn(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,l=n*o,u=a*o;return l>s&&(o=s/n,l=n*o,u=a*o),{scale:o,texW:l,texH:u}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,l=this.texHeight,u=this.getScale(n),c=u.scale,f=u.texW,d=u.texH,h=function(b,x){if(a&&x){var E=x.context,S=b.x,w=b.row,T=S,k=l*w;E.save(),E.translate(T,k),E.scale(c,c),a(E,n),E.restore()}},v=[null,null],p=function(){h(i.freePointer,i.canvas),v[0]={x:i.freePointer.x,y:i.freePointer.row*l,w:f,h:d},v[1]={x:i.freePointer.x+f,y:i.freePointer.row*l,w:0,h:d},i.freePointer.x+=f,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},g=function(){var b=i.scratch,x=i.canvas;b.clear(),h({x:0,row:0},b);var E=s-i.freePointer.x,S=f-E,w=l;{var T=i.freePointer.x,k=i.freePointer.row*l,P=E;x.context.drawImage(b,0,0,P,w,T,k,P,w),v[0]={x:T,y:k,w:P,h:d}}{var A=E,C=(i.freePointer.row+1)*l,_=S;x&&x.context.drawImage(b,A,0,_,w,0,C,_,w),v[1]={x:0,y:C,w:_,h:d}}i.freePointer.x=S,i.freePointer.row++},m=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=s)p();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(m(),p()):this.enableWrapping?g():(m(),p())}return this.keyToLocation.set(r,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=JF(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),oN=function(){function t(e,r,n,a){Xn(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Zn(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new sN(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=hr(this.atlases),l;try{var u=function(){var f=l.value,d=f.getKeys(),h=lN(n,d);if(h.size===0)return a.push(f),d.forEach(function(E){return i.set(E,f)}),1;s||(s=r._createAtlas(),a.push(s));var v=hr(d),p;try{for(v.s();!(p=v.n()).done;){var g=p.value;if(!h.has(g)){var m=f.getOffsets(g),y=It(m,2),b=y[0],x=y[1];s.canFit({w:b.w+x.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),f.canvas&&(r._copyTextureToNewAtlas(g,f,s),i.set(g,s))}}}catch(E){v.e(E)}finally{v.f()}f.dispose()};for(o.s();!(l=o.n()).done;)u()}catch(c){o.e(c)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=It(i,2),o=s[0],l=s[1];if(l.w===0)a.draw(r,o,function(d){d.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var c=o.w+l.w,f=o.h;a.draw(r,{w:c,h:f},function(d){d.drawImage(u,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();uN=function(){function t(e,r){Xn(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Zn(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,l=this._cacheScratchCanvas(s),u=new oN(this.r,i,o,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=Le({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,l,u){return u?((!i||o!=n||l!=a)&&(n=o,a=l,i=r(s,o,l)),i):r(s,o,l)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,l=o===void 0?function(){return!0}:o,u=a.filterType,c=u===void 0?function(){return!0}:u,f=!1,d=!1,h=hr(r),v;try{for(h.s();!(v=h.n()).done;){var p=v.value;if(l(p)){var g=hr(this.renderTypes.values()),m;try{var y=function(){var x=m.value,E=x.type;if(c(E)){var S=n.collections.get(x.collection),w=x.getKey(p),T=Array.isArray(w)?w:[w];if(s)T.forEach(function(C){return S.markKeyForGC(C)}),d=!0;else{var k=x.getID?x.getID(p):p.id(),P=n._key(E,k),A=n.typeAndIdToKey.get(P);A!==void 0&&!ZF(T,A)&&(f=!0,n.typeAndIdToKey.delete(P),A.forEach(function(C){return S.markKeyForGC(C)}))}}};for(g.s();!(m=g.n()).done;)y()}catch(b){g.e(b)}finally{g.f()}}}}catch(b){h.e(b)}finally{h.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=hr(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),l=!1,u=o.draw(i,a,function(d){s.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,a.w,a.h),d.clip(),s.drawElement(d,r,a,!0,!0),d.restore()):s.drawElement(d,r,a,!0,!0),l=!0});if(l){var c=s.getID?s.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return u}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(l){var u=i.getBoundingBox(r,l),c=a.getOrCreateAtlas(r,n,u,l),f=c.getOffsets(l),d=It(f,2),h=d[0],v=d[1];return{atlas:c,tex:h,tex1:h,tex2:v,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],n=hr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=It(a.value,2),s=i[0],o=i[1],l=o.getCounts(),u=l.keyCount,c=l.atlasCount;r.push({type:s,keyCount:u,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),cN=function(){function t(e){Xn(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Zn(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),fN=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,dN=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,hN=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,vN=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Ss={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Zl={IGNORE:1,USE_BB:2},yd=0,w0=1,E0=2,bd=3,fi=4,kl=5,ms=6,ys=7,gN=function(){function t(e,r,n){Xn(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=YF,this.atlasManager=new uN(e,n),this.batchManager=new cN(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Ss.SCREEN),this.pickingProgram=this._createShaderProgram(Ss.PICKING),this.vao=this._createVAO()}return Zn(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(yd,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(fi," || aVertType == ").concat(ys,` 
             || aVertType == `).concat(kl," || aVertType == ").concat(ms,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(w0,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(E0,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(bd,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(fN,`
      `).concat(dN,`
      `).concat(hN,`
      `).concat(vN,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(yd,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(bd,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(fi,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(fi," || vVertType == ").concat(ys,` 
          || vVertType == `).concat(kl," || vVertType == ").concat(ms,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(fi,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ys,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ys,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=$F(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),tN(a,"vec2",i.aPosition,r),this.transformBuffer=rN(a,n,i.aTransform),this.indexBuffer=Ur(a,n,"vec4",i.aIndex),this.vertTypeBuffer=Ur(a,n,"int",i.aVertType),this.atlasIdBuffer=Ur(a,n,"int",i.aAtlasId),this.texBuffer=Ur(a,n,"vec4",i.aTex),this.pointAPointBBuffer=Ur(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Ur(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=Ur(a,n,"vec2",i.aLineWidth),this.colorBuffer=Ur(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=Ur(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=Ur(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return Nn(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ss.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(r);if(l===Zl.IGNORE)return;if(l==Zl.USE_BB){this.drawPickingRectangle(r,n,a);return}}var u=i.getAtlasInfo(r,a),c=hr(u),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,h=d.atlas,v=d.tex1,p=d.tex2;s.canAddToCurrentBatch(h)||this.endBatch();for(var g=s.getAtlasIndexForBatch(h),m=0,y=[[v,!0],[p,!1]];m<y.length;m++){var b=It(y[m],2),x=b[0],E=b[1];if(x.w!=0){var S=this.instanceCount;this.vertTypeBuffer.getView(S)[0]=yd;var w=this.indexBuffer.getView(S);ci(n,w);var T=this.atlasIdBuffer.getView(S);T[0]=g;var k=this.texBuffer.getView(S);k[0]=x.x,k[1]=x.y,k[2]=x.w,k[3]=x.h;var P=this.transformBuffer.getMatrixView(S);this.setTransformMatrix(r,P,o,d,E),this.instanceCount++,E||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(A){c.e(A)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var l=i.bb,u=i.tex1,c=i.tex2,f=u.w/(u.w+c.w);s||(f=1-f);var d=this._getAdjustedBB(l,o,s,f);this._applyTransformMatrix(n,d,a,r)}else{var h=a.getBoundingBox(r),v=this._getAdjustedBB(h,o,!0,1);this._applyTransformMatrix(n,v,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;b0(r);var l=a.getRotation?a.getRotation(i):0;if(l!==0){var u=a.getRotationPoint(i),c=u.x,f=u.y;Fl(r,r,[c,f]),x0(r,r,l);var d=a.getRotationOffset(i);s=d.x+(n.xOffset||0),o=d.y+(n.yOffset||0)}else s=n.x1,o=n.y1;Fl(r,r,[s,o]),Nd(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,l=r.w,u=r.h,c=r.yOffset;n&&(s-=n,o-=n,l+=2*n,u+=2*n);var f=0,d=l*i;return a&&i<1?l=d:!a&&i<1&&(f=l-d,s+=f,l=d),{x1:s,y1:o,w:l,h:u,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=fi;var o=this.indexBuffer.getView(s);ci(n,o);var l=this.colorBuffer.getView(s);xa([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,u,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===kl||o===ms){var u=i.getBoundingBox(r),c=this._getCornerRadius(r,s.radius,u),f=this.cornerRadiusBuffer.getView(l);f[0]=c,f[1]=c,f[2]=c,f[3]=c,o===ms&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(l);ci(n,d);var h=r.pstyle(s.color).value,v=r.pstyle(s.opacity).value,p=this.colorBuffer.getView(l);xa(h,v,p);var g=this.lineWidthBuffer.getView(l);if(g[0]=0,g[1]=0,s.border){var m=r.pstyle("border-width").value;if(m>0){var y=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,x=this.borderColorBuffer.getView(l);xa(y,b,x);var E=r.pstyle("border-position").value;if(E==="inside")g[0]=0,g[1]=-m;else if(E==="outside")g[0]=m,g[1]=0;else{var S=m/2;g[0]=S,g[1]=-S}}}var w=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,w,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return fi;case"ellipse":return ys;case"roundrectangle":case"round-rectangle":return kl;case"bottom-round-rectangle":return ms;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return $n(i,s);var o=r.pstyle(n).pfValue,l=i/2,u=s/2;return Math.min(o,u,l)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,l;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,l=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,l=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(l)||l==null)){var u=r.pstyle(a+"-arrow-shape").value;if(u!=="none"){var c=r.pstyle(a+"-arrow-color").value,f=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,h=f*d,v=r.pstyle("width").pfValue,p=r.pstyle("arrow-scale").value,g=this.r.getArrowWidth(v,p),m=this.instanceCount,y=this.transformBuffer.getMatrixView(m);b0(y),Fl(y,y,[s,o]),Nd(y,y,[g,g]),x0(y,y,l),this.vertTypeBuffer.getView(m)[0]=bd;var b=this.indexBuffer.getView(m);ci(n,b);var x=this.colorBuffer.getView(m);xa(c,h,x),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=w0;var f=this.indexBuffer.getView(c);ci(n,f);var d=this.colorBuffer.getView(c);xa(l,u,d);var h=this.lineWidthBuffer.getView(c);h[0]=o;var v=this.pointAPointBBuffer.getView(c);v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<a.length-2;p+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=E0;var m=this.indexBuffer.getView(g);ci(n,m);var y=this.colorBuffer.getView(g);xa(l,u,y);var b=this.lineWidthBuffer.getView(g);b[0]=o;var x=a[p-2],E=a[p-1],S=a[p],w=a[p+1],T=a[p+2],k=a[p+3],P=a[p+4],A=a[p+5];p==0&&(x=2*S-T+.001,E=2*w-k+.001),p==a.length-4&&(P=2*T-S+.001,A=2*k-w+.001);var C=this.pointAPointBBuffer.getView(g);C[0]=x,C[1]=E,C[2]=S,C[3]=w;var _=this.pointCPointDBuffer.getView(g);_[0]=T,_[1]=k,_[2]=P,_[3]=A,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var l=(1-n)*r[o]+n*r[o+2],u=(1-n)*r[o+1]+n*r[o+3];s[o]=l,s[o+1]=u}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=hr(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;u.bufferSubData(i)}}catch(v){o.e(v)}finally{o.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var d=0;d<c.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,c[d].texture),r.uniform1i(s.uTextures[d],d);r.uniform1f(s.uZoom,jF(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var h=xa(this.bgColor,1);r.uniform4fv(s.uBGColor,h),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),ix={};ix.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=pN(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=nN(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new gN(r,n,t);var a=function(f){return function(d){return r.getTextAngle(d,f)}},i=function(f){return function(d){var h=d.pstyle(f);return h&&h.value}},s=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},o=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?Zl.USE_BB:Zl.IGNORE},l=function(f){var d=f.position(),h=d.x,v=d.y,p=f.outerWidth(),g=f.outerHeight();return{w:p,h:g,x1:h-p/2,y1:v-g/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:XF,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:xd(e.getLabelKey,null),getBoundingBox:wd(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:xd(e.getSourceLabelKey,"source"),getBoundingBox:wd(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:xd(e.getTargetLabelKey,"target"),getBoundingBox:wd(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var u=zs(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=r.drawing.invalidate(f)),d&&u()}),mN(r)};xd=function(e,r){return function(n){var a=e(n),i=sx(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},wd=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),l=sx(n,r),u=i.h/l.length,c=u*o,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:u,yOffset:c}}}return i}};ea={};ea.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+s*i[l*2],r+o*i[l*2+1]);t.closePath()};ea.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return Hb(t,o)}),t.closePath()};ea.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,l=i==="auto"?$n(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,l),t.arcTo(e+s,r+o,e,r+o,l),t.arcTo(e-s,r+o,e-s,r,l),t.arcTo(e-s,r-o,e,r-o,l),t.lineTo(e,r-o),t.closePath()};ea.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,l=i==="auto"?$n(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,l),t.arcTo(e-s,r+o,e-s,r,l),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};ea.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,l=a/2,u=s==="auto"?Jd():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+u,r-l),t.lineTo(e+o-u,r-l),t.lineTo(e+o,r-l+u),t.lineTo(e+o,r+l-u),t.lineTo(e+o-u,r+l),t.lineTo(e-o+u,r+l),t.lineTo(e-o,r+l-u),t.lineTo(e-o,r-l+u),t.closePath()};ea.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,l=e+i,u=r-s,c=r+s,f=Cd(n,a),d=f.widthOffset,h=f.heightOffset,v=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(o,u+h),t.lineTo(o,c-h),t.quadraticCurveTo(o+v,c,o+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-v,c,l,c-h),t.lineTo(l,u+h),t.quadraticCurveTo(l-v,u,l-d,u),t.lineTo(o+d,u),t.quadraticCurveTo(o+v,u,o,u+h),t.closePath()};_0=Math.sin(0),S0=Math.cos(0),zd={},Vd={},ux=Math.PI/40;for(wa=0*Math.PI;wa<2*Math.PI;wa+=ux)zd[wa]=Math.sin(wa),Vd[wa]=Math.cos(wa);ea.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=ux)i=e-o*zd[u]*_0+o*Vd[u]*S0,s=r+l*Vd[u]*_0+l*zd[u]*S0,u===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};$s={};$s.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};$s.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=ue(t.maxWidth)||ue(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,u=t.scale;else if(o){var c=1/0,f=1/0;ue(t.maxWidth)&&(c=u*t.maxWidth/i),ue(t.maxHeight)&&(f=u*t.maxHeight/s),u=Math.min(c,f),i*=u,s*=u}o||(i*=l,s*=l,u*=l);var d=document.createElement("canvas");d.width=i,d.height=s,d.style.width=i+"px",d.style.height=s+"px";var h=d.getContext("2d");if(i>0&&s>0){h.clearRect(0,0,i,s),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)h.translate(-n.x1*u,-n.y1*u),h.scale(u,u),this.drawElements(h,v),h.scale(1/u,1/u),h.translate(n.x1*u,n.y1*u);else{var p=e.pan(),g={x:p.x*u,y:p.y*u};u*=e.zoom(),h.translate(g.x,g.y),h.scale(u,u),this.drawElements(h,v),h.scale(1/u,1/u),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,s),h.fill())}return d};$s.png=function(t){return cx(t,this.bufferCanvasImage(t),"image/png")};$s.jpg=function(t){return cx(t,this.bufferCanvasImage(t),"image/jpeg")};fx={};fx.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};kN=dx,Ge=dx.prototype;Ge.CANVAS_LAYERS=3;Ge.SELECT_BOX=0;Ge.DRAG=1;Ge.NODE=2;Ge.WEBGL=3;Ge.CANVAS_TYPES=["2d","2d","2d","webgl2"];Ge.BUFFER_COUNT=3;Ge.TEXTURE_BUFFER=0;Ge.MOTIONBLUR_BUFFER_NODE=1;Ge.MOTIONBLUR_BUFFER_DRAG=2;Ge.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Ge.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Ge.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Ge.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};AN=typeof Path2D!="undefined";Ge.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ge.usePaths=function(){return AN&&this.pathsEnabled};Ge.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ge.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ge.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas=="undefined"?"undefined":Vt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[ex,Xr,mn,dh,Ra,Jn,ir,ix,ea,$s,fx].forEach(function(t){Le(Ge,t)});PN=[{name:"null",impl:zb},{name:"base",impl:Xb},{name:"canvas",impl:kN}],MN=[{type:"layout",extensions:tF},{type:"renderer",extensions:PN}],hx={},vx={};Wd=function(){if(arguments.length===2)return px.apply(null,arguments);if(arguments.length===3)return gx.apply(null,arguments);if(arguments.length===4)return LN.apply(null,arguments);if(arguments.length===5)return DN.apply(null,arguments);St("Invalid extension access syntax")};Rs.prototype.extension=Wd;MN.forEach(function(t){t.extensions.forEach(function(e){gx(t.type,e.name,e.impl)})});Ql=function(){if(!(this instanceof Ql))return new Ql;this.length=0},Da=Ql.prototype;Da.instanceString=function(){return"stylesheet"};Da.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Da.css=function(t,e){var r=this.length-1;if(Ae(t))this[r].properties.push({name:t,value:e});else if(et(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var l=Ut.properties[s]||Ut.properties[Jl(s)];if(l!=null){var u=l.name,c=o;this[r].properties.push({name:u,value:c})}}}return this};Da.style=Da.css;Da.generateStyle=function(t){var e=new Ut(t);return this.appendToStyle(e)};Da.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};RN="3.33.1",qr=function(e){if(e===void 0&&(e={}),et(e))return new Rs(e);if(Ae(e))return Wd.apply(Wd,arguments)};qr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(qr),t.apply(null,e),this};qr.warnings=function(t){return W0(t)};qr.version=RN;qr.stylesheet=qr.Stylesheet=Ql});var bx=B((fQ,yx)=>{function ON(){this.__data__=[],this.size=0}yx.exports=ON});var Oa=B((dQ,xx)=>{function BN(t,e){return t===e||t!==t&&e!==e}xx.exports=BN});var Ys=B((hQ,wx)=>{var IN=Oa();function qN(t,e){for(var r=t.length;r--;)if(IN(t[r][0],e))return r;return-1}wx.exports=qN});var _x=B((vQ,Ex)=>{var FN=Ys(),NN=Array.prototype,zN=NN.splice;function VN(t){var e=this.__data__,r=FN(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():zN.call(e,r,1),--this.size,!0}Ex.exports=VN});var Cx=B((gQ,Sx)=>{var WN=Ys();function HN(t){var e=this.__data__,r=WN(e,t);return r<0?void 0:e[r][1]}Sx.exports=HN});var kx=B((pQ,Tx)=>{var GN=Ys();function UN(t){return GN(this.__data__,t)>-1}Tx.exports=UN});var Px=B((mQ,Ax)=>{var $N=Ys();function YN(t,e){var r=this.__data__,n=$N(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}Ax.exports=YN});var js=B((yQ,Mx)=>{var jN=bx(),KN=_x(),XN=Cx(),ZN=kx(),QN=Px();function Pi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Pi.prototype.clear=jN;Pi.prototype.delete=KN;Pi.prototype.get=XN;Pi.prototype.has=ZN;Pi.prototype.set=QN;Mx.exports=Pi});var Lx=B((bQ,Dx)=>{var JN=js();function ez(){this.__data__=new JN,this.size=0}Dx.exports=ez});var Ox=B((xQ,Rx)=>{function tz(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}Rx.exports=tz});var Ix=B((wQ,Bx)=>{function rz(t){return this.__data__.get(t)}Bx.exports=rz});var Fx=B((EQ,qx)=>{function nz(t){return this.__data__.has(t)}qx.exports=nz});var vh=B((_Q,Nx)=>{var az=typeof global=="object"&&global&&global.Object===Object&&global;Nx.exports=az});var Ar=B((SQ,zx)=>{var iz=vh(),sz=typeof self=="object"&&self&&self.Object===Object&&self,oz=iz||sz||Function("return this")();zx.exports=oz});var Ba=B((CQ,Vx)=>{var lz=Ar(),uz=lz.Symbol;Vx.exports=uz});var Ux=B((TQ,Gx)=>{var Wx=Ba(),Hx=Object.prototype,cz=Hx.hasOwnProperty,fz=Hx.toString,Ks=Wx?Wx.toStringTag:void 0;function dz(t){var e=cz.call(t,Ks),r=t[Ks];try{t[Ks]=void 0;var n=!0}catch(i){}var a=fz.call(t);return n&&(e?t[Ks]=r:delete t[Ks]),a}Gx.exports=dz});var Yx=B((kQ,$x)=>{var hz=Object.prototype,vz=hz.toString;function gz(t){return vz.call(t)}$x.exports=gz});var ta=B((AQ,Xx)=>{var jx=Ba(),pz=Ux(),mz=Yx(),yz="[object Null]",bz="[object Undefined]",Kx=jx?jx.toStringTag:void 0;function xz(t){return t==null?t===void 0?bz:yz:Kx&&Kx in Object(t)?pz(t):mz(t)}Xx.exports=xz});var mr=B((PQ,Zx)=>{function wz(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Zx.exports=wz});var Mi=B((MQ,Qx)=>{var Ez=ta(),_z=mr(),Sz="[object AsyncFunction]",Cz="[object Function]",Tz="[object GeneratorFunction]",kz="[object Proxy]";function Az(t){if(!_z(t))return!1;var e=Ez(t);return e==Cz||e==Tz||e==Sz||e==kz}Qx.exports=Az});var ew=B((DQ,Jx)=>{var Pz=Ar(),Mz=Pz["__core-js_shared__"];Jx.exports=Mz});var nw=B((LQ,rw)=>{var gh=ew(),tw=function(){var t=/[^.]+$/.exec(gh&&gh.keys&&gh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Dz(t){return!!tw&&tw in t}rw.exports=Dz});var ph=B((RQ,aw)=>{var Lz=Function.prototype,Rz=Lz.toString;function Oz(t){if(t!=null){try{return Rz.call(t)}catch(e){}try{return t+""}catch(e){}}return""}aw.exports=Oz});var sw=B((OQ,iw)=>{var Bz=Mi(),Iz=nw(),qz=mr(),Fz=ph(),Nz=/[\\^$.*+?()[\]{}|]/g,zz=/^\[object .+?Constructor\]$/,Vz=Function.prototype,Wz=Object.prototype,Hz=Vz.toString,Gz=Wz.hasOwnProperty,Uz=RegExp("^"+Hz.call(Gz).replace(Nz,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $z(t){if(!qz(t)||Iz(t))return!1;var e=Bz(t)?Uz:zz;return e.test(Fz(t))}iw.exports=$z});var lw=B((BQ,ow)=>{function Yz(t,e){return t==null?void 0:t[e]}ow.exports=Yz});var ra=B((IQ,uw)=>{var jz=sw(),Kz=lw();function Xz(t,e){var r=Kz(t,e);return jz(r)?r:void 0}uw.exports=Xz});var mu=B((qQ,cw)=>{var Zz=ra(),Qz=Ar(),Jz=Zz(Qz,"Map");cw.exports=Jz});var Xs=B((FQ,fw)=>{var e5=ra(),t5=e5(Object,"create");fw.exports=t5});var vw=B((NQ,hw)=>{var dw=Xs();function r5(){this.__data__=dw?dw(null):{},this.size=0}hw.exports=r5});var pw=B((zQ,gw)=>{function n5(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}gw.exports=n5});var yw=B((VQ,mw)=>{var a5=Xs(),i5="__lodash_hash_undefined__",s5=Object.prototype,o5=s5.hasOwnProperty;function l5(t){var e=this.__data__;if(a5){var r=e[t];return r===i5?void 0:r}return o5.call(e,t)?e[t]:void 0}mw.exports=l5});var xw=B((WQ,bw)=>{var u5=Xs(),c5=Object.prototype,f5=c5.hasOwnProperty;function d5(t){var e=this.__data__;return u5?e[t]!==void 0:f5.call(e,t)}bw.exports=d5});var Ew=B((HQ,ww)=>{var h5=Xs(),v5="__lodash_hash_undefined__";function g5(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=h5&&e===void 0?v5:e,this}ww.exports=g5});var Sw=B((GQ,_w)=>{var p5=vw(),m5=pw(),y5=yw(),b5=xw(),x5=Ew();function Di(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Di.prototype.clear=p5;Di.prototype.delete=m5;Di.prototype.get=y5;Di.prototype.has=b5;Di.prototype.set=x5;_w.exports=Di});var kw=B((UQ,Tw)=>{var Cw=Sw(),w5=js(),E5=mu();function _5(){this.size=0,this.__data__={hash:new Cw,map:new(E5||w5),string:new Cw}}Tw.exports=_5});var Pw=B(($Q,Aw)=>{function S5(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Aw.exports=S5});var Zs=B((YQ,Mw)=>{var C5=Pw();function T5(t,e){var r=t.__data__;return C5(e)?r[typeof e=="string"?"string":"hash"]:r.map}Mw.exports=T5});var Lw=B((jQ,Dw)=>{var k5=Zs();function A5(t){var e=k5(this,t).delete(t);return this.size-=e?1:0,e}Dw.exports=A5});var Ow=B((KQ,Rw)=>{var P5=Zs();function M5(t){return P5(this,t).get(t)}Rw.exports=M5});var Iw=B((XQ,Bw)=>{var D5=Zs();function L5(t){return D5(this,t).has(t)}Bw.exports=L5});var Fw=B((ZQ,qw)=>{var R5=Zs();function O5(t,e){var r=R5(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}qw.exports=O5});var yu=B((QQ,Nw)=>{var B5=kw(),I5=Lw(),q5=Ow(),F5=Iw(),N5=Fw();function Li(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Li.prototype.clear=B5;Li.prototype.delete=I5;Li.prototype.get=q5;Li.prototype.has=F5;Li.prototype.set=N5;Nw.exports=Li});var Vw=B((JQ,zw)=>{var z5=js(),V5=mu(),W5=yu(),H5=200;function G5(t,e){var r=this.__data__;if(r instanceof z5){var n=r.__data__;if(!V5||n.length<H5-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new W5(n)}return r.set(t,e),this.size=r.size,this}zw.exports=G5});var Qs=B((eJ,Ww)=>{var U5=js(),$5=Lx(),Y5=Ox(),j5=Ix(),K5=Fx(),X5=Vw();function Ri(t){var e=this.__data__=new U5(t);this.size=e.size}Ri.prototype.clear=$5;Ri.prototype.delete=Y5;Ri.prototype.get=j5;Ri.prototype.has=K5;Ri.prototype.set=X5;Ww.exports=Ri});var bu=B((tJ,Hw)=>{function Z5(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}Hw.exports=Z5});var mh=B((rJ,Gw)=>{var Q5=ra(),J5=function(){try{var t=Q5(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();Gw.exports=J5});var Js=B((nJ,$w)=>{var Uw=mh();function eV(t,e,r){e=="__proto__"&&Uw?Uw(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}$w.exports=eV});var eo=B((aJ,Yw)=>{var tV=Js(),rV=Oa(),nV=Object.prototype,aV=nV.hasOwnProperty;function iV(t,e,r){var n=t[e];(!(aV.call(t,e)&&rV(n,r))||r===void 0&&!(e in t))&&tV(t,e,r)}Yw.exports=iV});var Oi=B((iJ,jw)=>{var sV=eo(),oV=Js();function lV(t,e,r,n){var a=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var o=e[i],l=n?n(r[o],t[o],o,r,t):void 0;l===void 0&&(l=t[o]),a?oV(r,o,l):sV(r,o,l)}return r}jw.exports=lV});var Xw=B((sJ,Kw)=>{function uV(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}Kw.exports=uV});var Fr=B((oJ,Zw)=>{function cV(t){return t!=null&&typeof t=="object"}Zw.exports=cV});var Jw=B((lJ,Qw)=>{var fV=ta(),dV=Fr(),hV="[object Arguments]";function vV(t){return dV(t)&&fV(t)==hV}Qw.exports=vV});var Bi=B((uJ,r1)=>{var e1=Jw(),gV=Fr(),t1=Object.prototype,pV=t1.hasOwnProperty,mV=t1.propertyIsEnumerable,yV=e1(function(){return arguments}())?e1:function(t){return gV(t)&&pV.call(t,"callee")&&!mV.call(t,"callee")};r1.exports=yV});var Mt=B((cJ,n1)=>{var bV=Array.isArray;n1.exports=bV});var i1=B((fJ,a1)=>{function xV(){return!1}a1.exports=xV});var Ia=B((to,Ii)=>{var wV=Ar(),EV=i1(),l1=typeof to=="object"&&to&&!to.nodeType&&to,s1=l1&&typeof Ii=="object"&&Ii&&!Ii.nodeType&&Ii,_V=s1&&s1.exports===l1,o1=_V?wV.Buffer:void 0,SV=o1?o1.isBuffer:void 0,CV=SV||EV;Ii.exports=CV});var ro=B((dJ,u1)=>{var TV=9007199254740991,kV=/^(?:0|[1-9]\d*)$/;function AV(t,e){var r=typeof t;return e=e==null?TV:e,!!e&&(r=="number"||r!="symbol"&&kV.test(t))&&t>-1&&t%1==0&&t<e}u1.exports=AV});var xu=B((hJ,c1)=>{var PV=9007199254740991;function MV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PV}c1.exports=MV});var d1=B((vJ,f1)=>{var DV=ta(),LV=xu(),RV=Fr(),OV="[object Arguments]",BV="[object Array]",IV="[object Boolean]",qV="[object Date]",FV="[object Error]",NV="[object Function]",zV="[object Map]",VV="[object Number]",WV="[object Object]",HV="[object RegExp]",GV="[object Set]",UV="[object String]",$V="[object WeakMap]",YV="[object ArrayBuffer]",jV="[object DataView]",KV="[object Float32Array]",XV="[object Float64Array]",ZV="[object Int8Array]",QV="[object Int16Array]",JV="[object Int32Array]",eW="[object Uint8Array]",tW="[object Uint8ClampedArray]",rW="[object Uint16Array]",nW="[object Uint32Array]",bt={};bt[KV]=bt[XV]=bt[ZV]=bt[QV]=bt[JV]=bt[eW]=bt[tW]=bt[rW]=bt[nW]=!0;bt[OV]=bt[BV]=bt[YV]=bt[IV]=bt[jV]=bt[qV]=bt[FV]=bt[NV]=bt[zV]=bt[VV]=bt[WV]=bt[HV]=bt[GV]=bt[UV]=bt[$V]=!1;function aW(t){return RV(t)&&LV(t.length)&&!!bt[DV(t)]}f1.exports=aW});var no=B((gJ,h1)=>{function iW(t){return function(e){return t(e)}}h1.exports=iW});var wu=B((ao,qi)=>{var sW=vh(),v1=typeof ao=="object"&&ao&&!ao.nodeType&&ao,io=v1&&typeof qi=="object"&&qi&&!qi.nodeType&&qi,oW=io&&io.exports===v1,yh=oW&&sW.process,lW=function(){try{var t=io&&io.require&&io.require("util").types;return t||yh&&yh.binding&&yh.binding("util")}catch(e){}}();qi.exports=lW});var Fi=B((pJ,m1)=>{var uW=d1(),cW=no(),g1=wu(),p1=g1&&g1.isTypedArray,fW=p1?cW(p1):uW;m1.exports=fW});var bh=B((mJ,y1)=>{var dW=Xw(),hW=Bi(),vW=Mt(),gW=Ia(),pW=ro(),mW=Fi(),yW=Object.prototype,bW=yW.hasOwnProperty;function xW(t,e){var r=vW(t),n=!r&&hW(t),a=!r&&!n&&gW(t),i=!r&&!n&&!a&&mW(t),s=r||n||a||i,o=s?dW(t.length,String):[],l=o.length;for(var u in t)(e||bW.call(t,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||pW(u,l)))&&o.push(u);return o}y1.exports=xW});var so=B((yJ,b1)=>{var wW=Object.prototype;function EW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||wW;return t===r}b1.exports=EW});var xh=B((bJ,x1)=>{function _W(t,e){return function(r){return t(e(r))}}x1.exports=_W});var E1=B((xJ,w1)=>{var SW=xh(),CW=SW(Object.keys,Object);w1.exports=CW});var Eu=B((wJ,_1)=>{var TW=so(),kW=E1(),AW=Object.prototype,PW=AW.hasOwnProperty;function MW(t){if(!TW(t))return kW(t);var e=[];for(var r in Object(t))PW.call(t,r)&&r!="constructor"&&e.push(r);return e}_1.exports=MW});var Zr=B((EJ,S1)=>{var DW=Mi(),LW=xu();function RW(t){return t!=null&&LW(t.length)&&!DW(t)}S1.exports=RW});var yn=B((_J,C1)=>{var OW=bh(),BW=Eu(),IW=Zr();function qW(t){return IW(t)?OW(t):BW(t)}C1.exports=qW});var k1=B((SJ,T1)=>{var FW=Oi(),NW=yn();function zW(t,e){return t&&FW(e,NW(e),t)}T1.exports=zW});var P1=B((CJ,A1)=>{function VW(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}A1.exports=VW});var D1=B((TJ,M1)=>{var WW=mr(),HW=so(),GW=P1(),UW=Object.prototype,$W=UW.hasOwnProperty;function YW(t){if(!WW(t))return GW(t);var e=HW(t),r=[];for(var n in t)n=="constructor"&&(e||!$W.call(t,n))||r.push(n);return r}M1.exports=YW});var na=B((kJ,L1)=>{var jW=bh(),KW=D1(),XW=Zr();function ZW(t){return XW(t)?jW(t,!0):KW(t)}L1.exports=ZW});var O1=B((AJ,R1)=>{var QW=Oi(),JW=na();function eH(t,e){return t&&QW(e,JW(e),t)}R1.exports=eH});var wh=B((oo,Ni)=>{var tH=Ar(),F1=typeof oo=="object"&&oo&&!oo.nodeType&&oo,B1=F1&&typeof Ni=="object"&&Ni&&!Ni.nodeType&&Ni,rH=B1&&B1.exports===F1,I1=rH?tH.Buffer:void 0,q1=I1?I1.allocUnsafe:void 0;function nH(t,e){if(e)return t.slice();var r=t.length,n=q1?q1(r):new t.constructor(r);return t.copy(n),n}Ni.exports=nH});var Eh=B((PJ,N1)=>{function aH(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}N1.exports=aH});var _h=B((MJ,z1)=>{function iH(t,e){for(var r=-1,n=t==null?0:t.length,a=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[a++]=s)}return i}z1.exports=iH});var Sh=B((DJ,V1)=>{function sH(){return[]}V1.exports=sH});var _u=B((LJ,H1)=>{var oH=_h(),lH=Sh(),uH=Object.prototype,cH=uH.propertyIsEnumerable,W1=Object.getOwnPropertySymbols,fH=W1?function(t){return t==null?[]:(t=Object(t),oH(W1(t),function(e){return cH.call(t,e)}))}:lH;H1.exports=fH});var U1=B((RJ,G1)=>{var dH=Oi(),hH=_u();function vH(t,e){return dH(t,hH(t),e)}G1.exports=vH});var Su=B((OJ,$1)=>{function gH(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}$1.exports=gH});var lo=B((BJ,Y1)=>{var pH=xh(),mH=pH(Object.getPrototypeOf,Object);Y1.exports=mH});var Ch=B((IJ,j1)=>{var yH=Su(),bH=lo(),xH=_u(),wH=Sh(),EH=Object.getOwnPropertySymbols,_H=EH?function(t){for(var e=[];t;)yH(e,xH(t)),t=bH(t);return e}:wH;j1.exports=_H});var X1=B((qJ,K1)=>{var SH=Oi(),CH=Ch();function TH(t,e){return SH(t,CH(t),e)}K1.exports=TH});var Th=B((FJ,Z1)=>{var kH=Su(),AH=Mt();function PH(t,e,r){var n=e(t);return AH(t)?n:kH(n,r(t))}Z1.exports=PH});var kh=B((NJ,Q1)=>{var MH=Th(),DH=_u(),LH=yn();function RH(t){return MH(t,LH,DH)}Q1.exports=RH});var eE=B((zJ,J1)=>{var OH=Th(),BH=Ch(),IH=na();function qH(t){return OH(t,IH,BH)}J1.exports=qH});var rE=B((VJ,tE)=>{var FH=ra(),NH=Ar(),zH=FH(NH,"DataView");tE.exports=zH});var aE=B((WJ,nE)=>{var VH=ra(),WH=Ar(),HH=VH(WH,"Promise");nE.exports=HH});var Ah=B((HJ,iE)=>{var GH=ra(),UH=Ar(),$H=GH(UH,"Set");iE.exports=$H});var oE=B((GJ,sE)=>{var YH=ra(),jH=Ar(),KH=YH(jH,"WeakMap");sE.exports=KH});var Fa=B((UJ,vE)=>{var Ph=rE(),Mh=mu(),Dh=aE(),Lh=Ah(),Rh=oE(),hE=ta(),zi=ph(),lE="[object Map]",XH="[object Object]",uE="[object Promise]",cE="[object Set]",fE="[object WeakMap]",dE="[object DataView]",ZH=zi(Ph),QH=zi(Mh),JH=zi(Dh),e3=zi(Lh),t3=zi(Rh),qa=hE;(Ph&&qa(new Ph(new ArrayBuffer(1)))!=dE||Mh&&qa(new Mh)!=lE||Dh&&qa(Dh.resolve())!=uE||Lh&&qa(new Lh)!=cE||Rh&&qa(new Rh)!=fE)&&(qa=function(t){var e=hE(t),r=e==XH?t.constructor:void 0,n=r?zi(r):"";if(n)switch(n){case ZH:return dE;case QH:return lE;case JH:return uE;case e3:return cE;case t3:return fE}return e});vE.exports=qa});var pE=B(($J,gE)=>{var r3=Object.prototype,n3=r3.hasOwnProperty;function a3(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&n3.call(t,"index")&&(r.index=t.index,r.input=t.input),r}gE.exports=a3});var Oh=B((YJ,mE)=>{var i3=Ar(),s3=i3.Uint8Array;mE.exports=s3});var Cu=B((jJ,bE)=>{var yE=Oh();function o3(t){var e=new t.constructor(t.byteLength);return new yE(e).set(new yE(t)),e}bE.exports=o3});var wE=B((KJ,xE)=>{var l3=Cu();function u3(t,e){var r=e?l3(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}xE.exports=u3});var _E=B((XJ,EE)=>{var c3=/\w*$/;function f3(t){var e=new t.constructor(t.source,c3.exec(t));return e.lastIndex=t.lastIndex,e}EE.exports=f3});var AE=B((ZJ,kE)=>{var SE=Ba(),CE=SE?SE.prototype:void 0,TE=CE?CE.valueOf:void 0;function d3(t){return TE?Object(TE.call(t)):{}}kE.exports=d3});var Bh=B((QJ,PE)=>{var h3=Cu();function v3(t,e){var r=e?h3(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}PE.exports=v3});var DE=B((JJ,ME)=>{var g3=Cu(),p3=wE(),m3=_E(),y3=AE(),b3=Bh(),x3="[object Boolean]",w3="[object Date]",E3="[object Map]",_3="[object Number]",S3="[object RegExp]",C3="[object Set]",T3="[object String]",k3="[object Symbol]",A3="[object ArrayBuffer]",P3="[object DataView]",M3="[object Float32Array]",D3="[object Float64Array]",L3="[object Int8Array]",R3="[object Int16Array]",O3="[object Int32Array]",B3="[object Uint8Array]",I3="[object Uint8ClampedArray]",q3="[object Uint16Array]",F3="[object Uint32Array]";function N3(t,e,r){var n=t.constructor;switch(e){case A3:return g3(t);case x3:case w3:return new n(+t);case P3:return p3(t,r);case M3:case D3:case L3:case R3:case O3:case B3:case I3:case q3:case F3:return b3(t,r);case E3:return new n;case _3:case T3:return new n(t);case S3:return m3(t);case C3:return new n;case k3:return y3(t)}}ME.exports=N3});var Ih=B((eee,RE)=>{var z3=mr(),LE=Object.create,V3=function(){function t(){}return function(e){if(!z3(e))return{};if(LE)return LE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();RE.exports=V3});var qh=B((tee,OE)=>{var W3=Ih(),H3=lo(),G3=so();function U3(t){return typeof t.constructor=="function"&&!G3(t)?W3(H3(t)):{}}OE.exports=U3});var IE=B((ree,BE)=>{var $3=Fa(),Y3=Fr(),j3="[object Map]";function K3(t){return Y3(t)&&$3(t)==j3}BE.exports=K3});var zE=B((nee,NE)=>{var X3=IE(),Z3=no(),qE=wu(),FE=qE&&qE.isMap,Q3=FE?Z3(FE):X3;NE.exports=Q3});var WE=B((aee,VE)=>{var J3=Fa(),e4=Fr(),t4="[object Set]";function r4(t){return e4(t)&&J3(t)==t4}VE.exports=r4});var $E=B((iee,UE)=>{var n4=WE(),a4=no(),HE=wu(),GE=HE&&HE.isSet,i4=GE?a4(GE):n4;UE.exports=i4});var Fh=B((see,XE)=>{var s4=Qs(),o4=bu(),l4=eo(),u4=k1(),c4=O1(),f4=wh(),d4=Eh(),h4=U1(),v4=X1(),g4=kh(),p4=eE(),m4=Fa(),y4=pE(),b4=DE(),x4=qh(),w4=Mt(),E4=Ia(),_4=zE(),S4=mr(),C4=$E(),T4=yn(),k4=na(),A4=1,P4=2,M4=4,YE="[object Arguments]",D4="[object Array]",L4="[object Boolean]",R4="[object Date]",O4="[object Error]",jE="[object Function]",B4="[object GeneratorFunction]",I4="[object Map]",q4="[object Number]",KE="[object Object]",F4="[object RegExp]",N4="[object Set]",z4="[object String]",V4="[object Symbol]",W4="[object WeakMap]",H4="[object ArrayBuffer]",G4="[object DataView]",U4="[object Float32Array]",$4="[object Float64Array]",Y4="[object Int8Array]",j4="[object Int16Array]",K4="[object Int32Array]",X4="[object Uint8Array]",Z4="[object Uint8ClampedArray]",Q4="[object Uint16Array]",J4="[object Uint32Array]",mt={};mt[YE]=mt[D4]=mt[H4]=mt[G4]=mt[L4]=mt[R4]=mt[U4]=mt[$4]=mt[Y4]=mt[j4]=mt[K4]=mt[I4]=mt[q4]=mt[KE]=mt[F4]=mt[N4]=mt[z4]=mt[V4]=mt[X4]=mt[Z4]=mt[Q4]=mt[J4]=!0;mt[O4]=mt[jE]=mt[W4]=!1;function Tu(t,e,r,n,a,i){var s,o=e&A4,l=e&P4,u=e&M4;if(r&&(s=a?r(t,n,a,i):r(t)),s!==void 0)return s;if(!S4(t))return t;var c=w4(t);if(c){if(s=y4(t),!o)return d4(t,s)}else{var f=m4(t),d=f==jE||f==B4;if(E4(t))return f4(t,o);if(f==KE||f==YE||d&&!a){if(s=l||d?{}:x4(t),!o)return l?v4(t,c4(s,t)):h4(t,u4(s,t))}else{if(!mt[f])return a?t:{};s=b4(t,f,o)}}i||(i=new s4);var h=i.get(t);if(h)return h;i.set(t,s),C4(t)?t.forEach(function(g){s.add(Tu(g,e,r,g,t,i))}):_4(t)&&t.forEach(function(g,m){s.set(m,Tu(g,e,r,m,t,i))});var v=u?l?p4:g4:l?k4:T4,p=c?void 0:v(t);return o4(p||t,function(g,m){p&&(m=g,g=t[m]),l4(s,m,Tu(g,e,r,m,t,i))}),s}XE.exports=Tu});var QE=B((oee,ZE)=>{var eG=Fh(),tG=4;function rG(t){return eG(t,tG)}ZE.exports=rG});var ku=B((lee,JE)=>{function nG(t){return function(){return t}}JE.exports=nG});var t_=B((uee,e_)=>{function aG(t){return function(e,r,n){for(var a=-1,i=Object(e),s=n(e),o=s.length;o--;){var l=s[t?o:++a];if(r(i[l],l,i)===!1)break}return e}}e_.exports=aG});var Au=B((cee,r_)=>{var iG=t_(),sG=iG();r_.exports=sG});var Pu=B((fee,n_)=>{var oG=Au(),lG=yn();function uG(t,e){return t&&oG(t,e,lG)}n_.exports=uG});var i_=B((dee,a_)=>{var cG=Zr();function fG(t,e){return function(r,n){if(r==null)return r;if(!cG(r))return t(r,n);for(var a=r.length,i=e?a:-1,s=Object(r);(e?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}a_.exports=fG});var uo=B((hee,s_)=>{var dG=Pu(),hG=i_(),vG=hG(dG);s_.exports=vG});var aa=B((vee,o_)=>{function gG(t){return t}o_.exports=gG});var Nh=B((gee,l_)=>{var pG=aa();function mG(t){return typeof t=="function"?t:pG}l_.exports=mG});var zh=B((pee,u_)=>{var yG=bu(),bG=uo(),xG=Nh(),wG=Mt();function EG(t,e){var r=wG(t)?yG:bG;return r(t,xG(e))}u_.exports=EG});var Vh=B((mee,c_)=>{c_.exports=zh()});var d_=B((yee,f_)=>{var _G=uo();function SG(t,e){var r=[];return _G(t,function(n,a,i){e(n,a,i)&&r.push(n)}),r}f_.exports=SG});var v_=B((bee,h_)=>{var CG="__lodash_hash_undefined__";function TG(t){return this.__data__.set(t,CG),this}h_.exports=TG});var p_=B((xee,g_)=>{function kG(t){return this.__data__.has(t)}g_.exports=kG});var Wh=B((wee,m_)=>{var AG=yu(),PG=v_(),MG=p_();function Mu(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new AG;++e<r;)this.add(t[e])}Mu.prototype.add=Mu.prototype.push=PG;Mu.prototype.has=MG;m_.exports=Mu});var b_=B((Eee,y_)=>{function DG(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}y_.exports=DG});var Hh=B((_ee,x_)=>{function LG(t,e){return t.has(e)}x_.exports=LG});var Gh=B((See,w_)=>{var RG=Wh(),OG=b_(),BG=Hh(),IG=1,qG=2;function FG(t,e,r,n,a,i){var s=r&IG,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,h=r&qG?new RG:void 0;for(i.set(t,e),i.set(e,t);++f<o;){var v=t[f],p=e[f];if(n)var g=s?n(p,v,f,e,t,i):n(v,p,f,t,e,i);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!OG(e,function(m,y){if(!BG(h,y)&&(v===m||a(v,m,r,n,i)))return h.push(y)})){d=!1;break}}else if(!(v===p||a(v,p,r,n,i))){d=!1;break}}return i.delete(t),i.delete(e),d}w_.exports=FG});var __=B((Cee,E_)=>{function NG(t){var e=-1,r=Array(t.size);return t.forEach(function(n,a){r[++e]=[a,n]}),r}E_.exports=NG});var Du=B((Tee,S_)=>{function zG(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}S_.exports=zG});var P_=B((kee,A_)=>{var C_=Ba(),T_=Oh(),VG=Oa(),WG=Gh(),HG=__(),GG=Du(),UG=1,$G=2,YG="[object Boolean]",jG="[object Date]",KG="[object Error]",XG="[object Map]",ZG="[object Number]",QG="[object RegExp]",JG="[object Set]",eU="[object String]",tU="[object Symbol]",rU="[object ArrayBuffer]",nU="[object DataView]",k_=C_?C_.prototype:void 0,Uh=k_?k_.valueOf:void 0;function aU(t,e,r,n,a,i,s){switch(r){case nU:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rU:return!(t.byteLength!=e.byteLength||!i(new T_(t),new T_(e)));case YG:case jG:case ZG:return VG(+t,+e);case KG:return t.name==e.name&&t.message==e.message;case QG:case eU:return t==e+"";case XG:var o=HG;case JG:var l=n&UG;if(o||(o=GG),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=$G,s.set(t,e);var c=WG(o(t),o(e),n,a,i,s);return s.delete(t),c;case tU:if(Uh)return Uh.call(t)==Uh.call(e)}return!1}A_.exports=aU});var L_=B((Aee,D_)=>{var M_=kh(),iU=1,sU=Object.prototype,oU=sU.hasOwnProperty;function lU(t,e,r,n,a,i){var s=r&iU,o=M_(t),l=o.length,u=M_(e),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var d=o[f];if(!(s?d in e:oU.call(e,d)))return!1}var h=i.get(t),v=i.get(e);if(h&&v)return h==e&&v==t;var p=!0;i.set(t,e),i.set(e,t);for(var g=s;++f<l;){d=o[f];var m=t[d],y=e[d];if(n)var b=s?n(y,m,d,e,t,i):n(m,y,d,t,e,i);if(!(b===void 0?m===y||a(m,y,r,n,i):b)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var x=t.constructor,E=e.constructor;x!=E&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof E=="function"&&E instanceof E)&&(p=!1)}return i.delete(t),i.delete(e),p}D_.exports=lU});var z_=B((Pee,N_)=>{var $h=Qs(),uU=Gh(),cU=P_(),fU=L_(),R_=Fa(),O_=Mt(),B_=Ia(),dU=Fi(),hU=1,I_="[object Arguments]",q_="[object Array]",Lu="[object Object]",vU=Object.prototype,F_=vU.hasOwnProperty;function gU(t,e,r,n,a,i){var s=O_(t),o=O_(e),l=s?q_:R_(t),u=o?q_:R_(e);l=l==I_?Lu:l,u=u==I_?Lu:u;var c=l==Lu,f=u==Lu,d=l==u;if(d&&B_(t)){if(!B_(e))return!1;s=!0,c=!1}if(d&&!c)return i||(i=new $h),s||dU(t)?uU(t,e,r,n,a,i):cU(t,e,l,r,n,a,i);if(!(r&hU)){var h=c&&F_.call(t,"__wrapped__"),v=f&&F_.call(e,"__wrapped__");if(h||v){var p=h?t.value():t,g=v?e.value():e;return i||(i=new $h),a(p,g,r,n,i)}}return d?(i||(i=new $h),fU(t,e,r,n,a,i)):!1}N_.exports=gU});var Yh=B((Mee,H_)=>{var pU=z_(),V_=Fr();function W_(t,e,r,n,a){return t===e?!0:t==null||e==null||!V_(t)&&!V_(e)?t!==t&&e!==e:pU(t,e,r,n,W_,a)}H_.exports=W_});var U_=B((Dee,G_)=>{var mU=Qs(),yU=Yh(),bU=1,xU=2;function wU(t,e,r,n){var a=r.length,i=a,s=!n;if(t==null)return!i;for(t=Object(t);a--;){var o=r[a];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<i;){o=r[a];var l=o[0],u=t[l],c=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new mU;if(n)var d=n(u,c,l,t,e,f);if(!(d===void 0?yU(c,u,bU|xU,n,f):d))return!1}}return!0}G_.exports=wU});var jh=B((Lee,$_)=>{var EU=mr();function _U(t){return t===t&&!EU(t)}$_.exports=_U});var j_=B((Ree,Y_)=>{var SU=jh(),CU=yn();function TU(t){for(var e=CU(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,SU(a)]}return e}Y_.exports=TU});var Kh=B((Oee,K_)=>{function kU(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}K_.exports=kU});var Z_=B((Bee,X_)=>{var AU=U_(),PU=j_(),MU=Kh();function DU(t){var e=PU(t);return e.length==1&&e[0][2]?MU(e[0][0],e[0][1]):function(r){return r===t||AU(r,t,e)}}X_.exports=DU});var Na=B((Iee,Q_)=>{var LU=ta(),RU=Fr(),OU="[object Symbol]";function BU(t){return typeof t=="symbol"||RU(t)&&LU(t)==OU}Q_.exports=BU});var Ru=B((qee,J_)=>{var IU=Mt(),qU=Na(),FU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NU=/^\w*$/;function zU(t,e){if(IU(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||qU(t)?!0:NU.test(t)||!FU.test(t)||e!=null&&t in Object(e)}J_.exports=zU});var rS=B((Fee,tS)=>{var eS=yu(),VU="Expected a function";function Xh(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(VU);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=t.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(Xh.Cache||eS),r}Xh.Cache=eS;tS.exports=Xh});var aS=B((Nee,nS)=>{var WU=rS(),HU=500;function GU(t){var e=WU(t,function(n){return r.size===HU&&r.clear(),n}),r=e.cache;return e}nS.exports=GU});var sS=B((zee,iS)=>{var UU=aS(),$U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,YU=/\\(\\)?/g,jU=UU(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace($U,function(r,n,a,i){e.push(a?i.replace(YU,"$1"):n||r)}),e});iS.exports=jU});var co=B((Vee,oS)=>{function KU(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}oS.exports=KU});var hS=B((Wee,dS)=>{var lS=Ba(),XU=co(),ZU=Mt(),QU=Na(),JU=1/0,uS=lS?lS.prototype:void 0,cS=uS?uS.toString:void 0;function fS(t){if(typeof t=="string")return t;if(ZU(t))return XU(t,fS)+"";if(QU(t))return cS?cS.call(t):"";var e=t+"";return e=="0"&&1/t==-JU?"-0":e}dS.exports=fS});var Zh=B((Hee,vS)=>{var e$=hS();function t$(t){return t==null?"":e$(t)}vS.exports=t$});var fo=B((Gee,gS)=>{var r$=Mt(),n$=Ru(),a$=sS(),i$=Zh();function s$(t,e){return r$(t)?t:n$(t,e)?[t]:a$(i$(t))}gS.exports=s$});var Vi=B((Uee,pS)=>{var o$=Na(),l$=1/0;function u$(t){if(typeof t=="string"||o$(t))return t;var e=t+"";return e=="0"&&1/t==-l$?"-0":e}pS.exports=u$});var ho=B(($ee,mS)=>{var c$=fo(),f$=Vi();function d$(t,e){e=c$(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[f$(e[r++])];return r&&r==n?t:void 0}mS.exports=d$});var bS=B((Yee,yS)=>{var h$=ho();function v$(t,e,r){var n=t==null?void 0:h$(t,e);return n===void 0?r:n}yS.exports=v$});var wS=B((jee,xS)=>{function g$(t,e){return t!=null&&e in Object(t)}xS.exports=g$});var Qh=B((Kee,ES)=>{var p$=fo(),m$=Bi(),y$=Mt(),b$=ro(),x$=xu(),w$=Vi();function E$(t,e,r){e=p$(e,t);for(var n=-1,a=e.length,i=!1;++n<a;){var s=w$(e[n]);if(!(i=t!=null&&r(t,s)))break;t=t[s]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&x$(a)&&b$(s,a)&&(y$(t)||m$(t)))}ES.exports=E$});var Jh=B((Xee,_S)=>{var _$=wS(),S$=Qh();function C$(t,e){return t!=null&&S$(t,e,_$)}_S.exports=C$});var CS=B((Zee,SS)=>{var T$=Yh(),k$=bS(),A$=Jh(),P$=Ru(),M$=jh(),D$=Kh(),L$=Vi(),R$=1,O$=2;function B$(t,e){return P$(t)&&M$(e)?D$(L$(t),e):function(r){var n=k$(r,t);return n===void 0&&n===e?A$(r,t):T$(e,n,R$|O$)}}SS.exports=B$});var ev=B((Qee,TS)=>{function I$(t){return function(e){return e==null?void 0:e[t]}}TS.exports=I$});var AS=B((Jee,kS)=>{var q$=ho();function F$(t){return function(e){return q$(e,t)}}kS.exports=F$});var MS=B((ete,PS)=>{var N$=ev(),z$=AS(),V$=Ru(),W$=Vi();function H$(t){return V$(t)?N$(W$(t)):z$(t)}PS.exports=H$});var Qr=B((tte,DS)=>{var G$=Z_(),U$=CS(),$$=aa(),Y$=Mt(),j$=MS();function K$(t){return typeof t=="function"?t:t==null?$$:typeof t=="object"?Y$(t)?U$(t[0],t[1]):G$(t):j$(t)}DS.exports=K$});var tv=B((rte,LS)=>{var X$=_h(),Z$=d_(),Q$=Qr(),J$=Mt();function eY(t,e){var r=J$(t)?X$:Z$;return r(t,Q$(e,3))}LS.exports=eY});var OS=B((nte,RS)=>{var tY=Object.prototype,rY=tY.hasOwnProperty;function nY(t,e){return t!=null&&rY.call(t,e)}RS.exports=nY});var rv=B((ate,BS)=>{var aY=OS(),iY=Qh();function sY(t,e){return t!=null&&iY(t,e,aY)}BS.exports=sY});var qS=B((ite,IS)=>{var oY=Eu(),lY=Fa(),uY=Bi(),cY=Mt(),fY=Zr(),dY=Ia(),hY=so(),vY=Fi(),gY="[object Map]",pY="[object Set]",mY=Object.prototype,yY=mY.hasOwnProperty;function bY(t){if(t==null)return!0;if(fY(t)&&(cY(t)||typeof t=="string"||typeof t.splice=="function"||dY(t)||vY(t)||uY(t)))return!t.length;var e=lY(t);if(e==gY||e==pY)return!t.size;if(hY(t))return!oY(t).length;for(var r in t)if(yY.call(t,r))return!1;return!0}IS.exports=bY});var nv=B((ste,FS)=>{function xY(t){return t===void 0}FS.exports=xY});var av=B((ote,NS)=>{var wY=uo(),EY=Zr();function _Y(t,e){var r=-1,n=EY(t)?Array(t.length):[];return wY(t,function(a,i,s){n[++r]=e(a,i,s)}),n}NS.exports=_Y});var iv=B((lte,zS)=>{var SY=co(),CY=Qr(),TY=av(),kY=Mt();function AY(t,e){var r=kY(t)?SY:TY;return r(t,CY(e,3))}zS.exports=AY});var WS=B((ute,VS)=>{function PY(t,e,r,n){var a=-1,i=t==null?0:t.length;for(n&&i&&(r=t[++a]);++a<i;)r=e(r,t[a],a,t);return r}VS.exports=PY});var GS=B((cte,HS)=>{function MY(t,e,r,n,a){return a(t,function(i,s,o){r=n?(n=!1,i):e(r,i,s,o)}),r}HS.exports=MY});var sv=B((fte,US)=>{var DY=WS(),LY=uo(),RY=Qr(),OY=GS(),BY=Mt();function IY(t,e,r){var n=BY(t)?DY:OY,a=arguments.length<3;return n(t,RY(e,4),r,a,LY)}US.exports=IY});var YS=B((dte,$S)=>{var qY=ta(),FY=Mt(),NY=Fr(),zY="[object String]";function VY(t){return typeof t=="string"||!FY(t)&&NY(t)&&qY(t)==zY}$S.exports=VY});var KS=B((hte,jS)=>{var WY=ev(),HY=WY("length");jS.exports=HY});var ZS=B((vte,XS)=>{var GY="\\ud800-\\udfff",UY="\\u0300-\\u036f",$Y="\\ufe20-\\ufe2f",YY="\\u20d0-\\u20ff",jY=UY+$Y+YY,KY="\\ufe0e\\ufe0f",XY="\\u200d",ZY=RegExp("["+XY+GY+jY+KY+"]");function QY(t){return ZY.test(t)}XS.exports=QY});var sC=B((gte,iC)=>{var JS="\\ud800-\\udfff",JY="\\u0300-\\u036f",ej="\\ufe20-\\ufe2f",tj="\\u20d0-\\u20ff",rj=JY+ej+tj,nj="\\ufe0e\\ufe0f",aj="["+JS+"]",ov="["+rj+"]",lv="\\ud83c[\\udffb-\\udfff]",ij="(?:"+ov+"|"+lv+")",eC="[^"+JS+"]",tC="(?:\\ud83c[\\udde6-\\uddff]){2}",rC="[\\ud800-\\udbff][\\udc00-\\udfff]",sj="\\u200d",nC=ij+"?",aC="["+nj+"]?",oj="(?:"+sj+"(?:"+[eC,tC,rC].join("|")+")"+aC+nC+")*",lj=aC+nC+oj,uj="(?:"+[eC+ov+"?",ov,tC,rC,aj].join("|")+")",QS=RegExp(lv+"(?="+lv+")|"+uj+lj,"g");function cj(t){for(var e=QS.lastIndex=0;QS.test(t);)++e;return e}iC.exports=cj});var lC=B((pte,oC)=>{var fj=KS(),dj=ZS(),hj=sC();function vj(t){return dj(t)?hj(t):fj(t)}oC.exports=vj});var cC=B((mte,uC)=>{var gj=Eu(),pj=Fa(),mj=Zr(),yj=YS(),bj=lC(),xj="[object Map]",wj="[object Set]";function Ej(t){if(t==null)return 0;if(mj(t))return yj(t)?bj(t):t.length;var e=pj(t);return e==xj||e==wj?t.size:gj(t).length}uC.exports=Ej});var dC=B((yte,fC)=>{var _j=bu(),Sj=Ih(),Cj=Pu(),Tj=Qr(),kj=lo(),Aj=Mt(),Pj=Ia(),Mj=Mi(),Dj=mr(),Lj=Fi();function Rj(t,e,r){var n=Aj(t),a=n||Pj(t)||Lj(t);if(e=Tj(e,4),r==null){var i=t&&t.constructor;a?r=n?new i:[]:Dj(t)?r=Mj(i)?Sj(kj(t)):{}:r={}}return(a?_j:Cj)(t,function(s,o,l){return e(r,s,o,l)}),r}fC.exports=Rj});var pC=B((bte,gC)=>{var hC=Ba(),Oj=Bi(),Bj=Mt(),vC=hC?hC.isConcatSpreadable:void 0;function Ij(t){return Bj(t)||Oj(t)||!!(vC&&t&&t[vC])}gC.exports=Ij});var Ou=B((xte,yC)=>{var qj=Su(),Fj=pC();function mC(t,e,r,n,a){var i=-1,s=t.length;for(r||(r=Fj),a||(a=[]);++i<s;){var o=t[i];e>0&&r(o)?e>1?mC(o,e-1,r,n,a):qj(a,o):n||(a[a.length]=o)}return a}yC.exports=mC});var xC=B((wte,bC)=>{function Nj(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}bC.exports=Nj});var uv=B((Ete,EC)=>{var zj=xC(),wC=Math.max;function Vj(t,e,r){return e=wC(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,i=wC(n.length-e,0),s=Array(i);++a<i;)s[a]=n[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=n[a];return o[e]=r(s),zj(t,this,o)}}EC.exports=Vj});var CC=B((_te,SC)=>{var Wj=ku(),_C=mh(),Hj=aa(),Gj=_C?function(t,e){return _C(t,"toString",{configurable:!0,enumerable:!1,value:Wj(e),writable:!0})}:Hj;SC.exports=Gj});var kC=B((Ste,TC)=>{var Uj=800,$j=16,Yj=Date.now;function jj(t){var e=0,r=0;return function(){var n=Yj(),a=$j-(n-r);if(r=n,a>0){if(++e>=Uj)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}TC.exports=jj});var cv=B((Cte,AC)=>{var Kj=CC(),Xj=kC(),Zj=Xj(Kj);AC.exports=Zj});var vo=B((Tte,PC)=>{var Qj=aa(),Jj=uv(),eK=cv();function tK(t,e){return eK(Jj(t,e,Qj),t+"")}PC.exports=tK});var fv=B((kte,MC)=>{function rK(t,e,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(e(t[i],i,t))return i;return-1}MC.exports=rK});var LC=B((Ate,DC)=>{function nK(t){return t!==t}DC.exports=nK});var OC=B((Pte,RC)=>{function aK(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}RC.exports=aK});var IC=B((Mte,BC)=>{var iK=fv(),sK=LC(),oK=OC();function lK(t,e,r){return e===e?oK(t,e,r):iK(t,sK,r)}BC.exports=lK});var FC=B((Dte,qC)=>{var uK=IC();function cK(t,e){var r=t==null?0:t.length;return!!r&&uK(t,e,0)>-1}qC.exports=cK});var zC=B((Lte,NC)=>{function fK(t,e,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1}NC.exports=fK});var WC=B((Rte,VC)=>{function dK(){}VC.exports=dK});var GC=B((Ote,HC)=>{var dv=Ah(),hK=WC(),vK=Du(),gK=1/0,pK=dv&&1/vK(new dv([,-0]))[1]==gK?function(t){return new dv(t)}:hK;HC.exports=pK});var $C=B((Bte,UC)=>{var mK=Wh(),yK=FC(),bK=zC(),xK=Hh(),wK=GC(),EK=Du(),_K=200;function SK(t,e,r){var n=-1,a=yK,i=t.length,s=!0,o=[],l=o;if(r)s=!1,a=bK;else if(i>=_K){var u=e?null:wK(t);if(u)return EK(u);s=!1,a=xK,l=new mK}else l=e?[]:o;e:for(;++n<i;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,s&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),o.push(c)}else a(l,f,r)||(l!==o&&l.push(f),o.push(c))}return o}UC.exports=SK});var hv=B((Ite,YC)=>{var CK=Zr(),TK=Fr();function kK(t){return TK(t)&&CK(t)}YC.exports=kK});var KC=B((qte,jC)=>{var AK=Ou(),PK=vo(),MK=$C(),DK=hv(),LK=PK(function(t){return MK(AK(t,1,DK,!0))});jC.exports=LK});var ZC=B((Fte,XC)=>{var RK=co();function OK(t,e){return RK(e,function(r){return t[r]})}XC.exports=OK});var vv=B((Nte,QC)=>{var BK=ZC(),IK=yn();function qK(t){return t==null?[]:BK(t,IK(t))}QC.exports=qK});var yr=B((zte,JC)=>{var Bu;if(typeof Ga=="function")try{Bu={clone:QE(),constant:ku(),each:Vh(),filter:tv(),has:rv(),isArray:Mt(),isEmpty:qS(),isFunction:Mi(),isUndefined:nv(),keys:yn(),map:iv(),reduce:sv(),size:cC(),transform:dC(),union:KC(),values:vv()}}catch(t){}Bu||(Bu=window._);JC.exports=Bu});var Iu=B((Wte,nT)=>{"use strict";var Ie=yr();nT.exports=$e;var FK="\0",za="\0",eT="";function $e(t){this._isDirected=Ie.has(t,"directed")?t.directed:!0,this._isMultigraph=Ie.has(t,"multigraph")?t.multigraph:!1,this._isCompound=Ie.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=Ie.constant(void 0),this._defaultEdgeLabelFn=Ie.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[za]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}$e.prototype._nodeCount=0;$e.prototype._edgeCount=0;$e.prototype.isDirected=function(){return this._isDirected};$e.prototype.isMultigraph=function(){return this._isMultigraph};$e.prototype.isCompound=function(){return this._isCompound};$e.prototype.setGraph=function(t){return this._label=t,this};$e.prototype.graph=function(){return this._label};$e.prototype.setDefaultNodeLabel=function(t){return Ie.isFunction(t)||(t=Ie.constant(t)),this._defaultNodeLabelFn=t,this};$e.prototype.nodeCount=function(){return this._nodeCount};$e.prototype.nodes=function(){return Ie.keys(this._nodes)};$e.prototype.sources=function(){var t=this;return Ie.filter(this.nodes(),function(e){return Ie.isEmpty(t._in[e])})};$e.prototype.sinks=function(){var t=this;return Ie.filter(this.nodes(),function(e){return Ie.isEmpty(t._out[e])})};$e.prototype.setNodes=function(t,e){var r=arguments,n=this;return Ie.each(t,function(a){r.length>1?n.setNode(a,e):n.setNode(a)}),this};$e.prototype.setNode=function(t,e){return Ie.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=za,this._children[t]={},this._children[za][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)};$e.prototype.node=function(t){return this._nodes[t]};$e.prototype.hasNode=function(t){return Ie.has(this._nodes,t)};$e.prototype.removeNode=function(t){var e=this;if(Ie.has(this._nodes,t)){var r=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],Ie.each(this.children(t),function(n){e.setParent(n)}),delete this._children[t]),Ie.each(Ie.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],Ie.each(Ie.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this};$e.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Ie.isUndefined(e))e=za;else{e+="";for(var r=e;!Ie.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this};$e.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]};$e.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==za)return e}};$e.prototype.children=function(t){if(Ie.isUndefined(t)&&(t=za),this._isCompound){var e=this._children[t];if(e)return Ie.keys(e)}else{if(t===za)return this.nodes();if(this.hasNode(t))return[]}};$e.prototype.predecessors=function(t){var e=this._preds[t];if(e)return Ie.keys(e)};$e.prototype.successors=function(t){var e=this._sucs[t];if(e)return Ie.keys(e)};$e.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return Ie.union(e,this.successors(t))};$e.prototype.isLeaf=function(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0};$e.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;Ie.each(this._nodes,function(i,s){t(s)&&e.setNode(s,i)}),Ie.each(this._edgeObjs,function(i){e.hasNode(i.v)&&e.hasNode(i.w)&&e.setEdge(i,r.edge(i))});var n={};function a(i){var s=r.parent(i);return s===void 0||e.hasNode(s)?(n[i]=s,s):s in n?n[s]:a(s)}return this._isCompound&&Ie.each(e.nodes(),function(i){e.setParent(i,a(i))}),e};$e.prototype.setDefaultEdgeLabel=function(t){return Ie.isFunction(t)||(t=Ie.constant(t)),this._defaultEdgeLabelFn=t,this};$e.prototype.edgeCount=function(){return this._edgeCount};$e.prototype.edges=function(){return Ie.values(this._edgeObjs)};$e.prototype.setPath=function(t,e){var r=this,n=arguments;return Ie.reduce(t,function(a,i){return n.length>1?r.setEdge(a,i,e):r.setEdge(a,i),i}),this};$e.prototype.setEdge=function(){var t,e,r,n,a=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(t=i.v,e=i.w,r=i.name,arguments.length===2&&(n=arguments[1],a=!0)):(t=i,e=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],a=!0)),t=""+t,e=""+e,Ie.isUndefined(r)||(r=""+r);var s=go(this._isDirected,t,e,r);if(Ie.has(this._edgeLabels,s))return a&&(this._edgeLabels[s]=n),this;if(!Ie.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=a?n:this._defaultEdgeLabelFn(t,e,r);var o=NK(this._isDirected,t,e,r);return t=o.v,e=o.w,Object.freeze(o),this._edgeObjs[s]=o,tT(this._preds[e],t),tT(this._sucs[t],e),this._in[e][s]=o,this._out[t][s]=o,this._edgeCount++,this};$e.prototype.edge=function(t,e,r){var n=arguments.length===1?gv(this._isDirected,arguments[0]):go(this._isDirected,t,e,r);return this._edgeLabels[n]};$e.prototype.hasEdge=function(t,e,r){var n=arguments.length===1?gv(this._isDirected,arguments[0]):go(this._isDirected,t,e,r);return Ie.has(this._edgeLabels,n)};$e.prototype.removeEdge=function(t,e,r){var n=arguments.length===1?gv(this._isDirected,arguments[0]):go(this._isDirected,t,e,r),a=this._edgeObjs[n];return a&&(t=a.v,e=a.w,delete this._edgeLabels[n],delete this._edgeObjs[n],rT(this._preds[e],t),rT(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this};$e.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=Ie.values(r);return e?Ie.filter(n,function(a){return a.v===e}):n}};$e.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=Ie.values(r);return e?Ie.filter(n,function(a){return a.w===e}):n}};$e.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};function tT(t,e){t[e]?t[e]++:t[e]=1}function rT(t,e){--t[e]||delete t[e]}function go(t,e,r,n){var a=""+e,i=""+r;if(!t&&a>i){var s=a;a=i,i=s}return a+eT+i+eT+(Ie.isUndefined(n)?FK:n)}function NK(t,e,r,n){var a=""+e,i=""+r;if(!t&&a>i){var s=a;a=i,i=s}var o={v:a,w:i};return n&&(o.name=n),o}function gv(t,e){return go(t,e.v,e.w,e.name)}});var iT=B((Hte,aT)=>{aT.exports="2.1.8"});var oT=B((Gte,sT)=>{sT.exports={Graph:Iu(),version:iT()}});var uT=B((Ute,lT)=>{var Jr=yr(),zK=Iu();lT.exports={write:VK,read:GK};function VK(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:WK(t),edges:HK(t)};return Jr.isUndefined(t.graph())||(e.value=Jr.clone(t.graph())),e}function WK(t){return Jr.map(t.nodes(),function(e){var r=t.node(e),n=t.parent(e),a={v:e};return Jr.isUndefined(r)||(a.value=r),Jr.isUndefined(n)||(a.parent=n),a})}function HK(t){return Jr.map(t.edges(),function(e){var r=t.edge(e),n={v:e.v,w:e.w};return Jr.isUndefined(e.name)||(n.name=e.name),Jr.isUndefined(r)||(n.value=r),n})}function GK(t){var e=new zK(t.options).setGraph(t.value);return Jr.each(t.nodes,function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),Jr.each(t.edges,function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}});var fT=B(($te,cT)=>{var qu=yr();cT.exports=UK;function UK(t){var e={},r=[],n;function a(i){qu.has(e,i)||(e[i]=!0,n.push(i),qu.each(t.successors(i),a),qu.each(t.predecessors(i),a))}return qu.each(t.nodes(),function(i){n=[],a(i),n.length&&r.push(n)}),r}});var pv=B((Yte,hT)=>{var dT=yr();hT.exports=Pr;function Pr(){this._arr=[],this._keyIndices={}}Pr.prototype.size=function(){return this._arr.length};Pr.prototype.keys=function(){return this._arr.map(function(t){return t.key})};Pr.prototype.has=function(t){return dT.has(this._keyIndices,t)};Pr.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority};Pr.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};Pr.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!dT.has(r,t)){var n=this._arr,a=n.length;return r[t]=a,n.push({key:t,priority:e}),this._decrease(a),!0}return!1};Pr.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key};Pr.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)};Pr.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,a=t;r<e.length&&(a=e[r].priority<e[a].priority?r:a,n<e.length&&(a=e[n].priority<e[a].priority?n:a),a!==t&&(this._swap(t,a),this._heapify(a)))};Pr.prototype._decrease=function(t){for(var e=this._arr,r=e[t].priority,n;t!==0&&(n=t>>1,!(e[n].priority<r));)this._swap(t,n),t=n};Pr.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,a=r[t],i=r[e];r[t]=i,r[e]=a,n[i.key]=t,n[a.key]=e}});var mv=B((jte,vT)=>{var $K=yr(),YK=pv();vT.exports=KK;var jK=$K.constant(1);function KK(t,e,r,n){return XK(t,String(e),r||jK,n||function(a){return t.outEdges(a)})}function XK(t,e,r,n){var a={},i=new YK,s,o,l=function(u){var c=u.v!==s?u.v:u.w,f=a[c],d=r(u),h=o.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+d);h<f.distance&&(f.distance=h,f.predecessor=s,i.decrease(c,h))};for(t.nodes().forEach(function(u){var c=u===e?0:Number.POSITIVE_INFINITY;a[u]={distance:c},i.add(u,c)});i.size()>0&&(s=i.removeMin(),o=a[s],o.distance!==Number.POSITIVE_INFINITY);)n(s).forEach(l);return a}});var pT=B((Kte,gT)=>{var ZK=mv(),QK=yr();gT.exports=JK;function JK(t,e,r){return QK.transform(t.nodes(),function(n,a){n[a]=ZK(t,a,e,r)},{})}});var yv=B((Xte,yT)=>{var mT=yr();yT.exports=e8;function e8(t){var e=0,r=[],n={},a=[];function i(s){var o=n[s]={onStack:!0,lowlink:e,index:e++};if(r.push(s),t.successors(s).forEach(function(c){mT.has(n,c)?n[c].onStack&&(o.lowlink=Math.min(o.lowlink,n[c].index)):(i(c),o.lowlink=Math.min(o.lowlink,n[c].lowlink))}),o.lowlink===o.index){var l=[],u;do u=r.pop(),n[u].onStack=!1,l.push(u);while(s!==u);a.push(l)}}return t.nodes().forEach(function(s){mT.has(n,s)||i(s)}),a}});var xT=B((Zte,bT)=>{var t8=yr(),r8=yv();bT.exports=n8;function n8(t){return t8.filter(r8(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}});var ET=B((Qte,wT)=>{var a8=yr();wT.exports=s8;var i8=a8.constant(1);function s8(t,e,r){return o8(t,e||i8,r||function(n){return t.outEdges(n)})}function o8(t,e,r){var n={},a=t.nodes();return a.forEach(function(i){n[i]={},n[i][i]={distance:0},a.forEach(function(s){i!==s&&(n[i][s]={distance:Number.POSITIVE_INFINITY})}),r(i).forEach(function(s){var o=s.v===i?s.w:s.v,l=e(s);n[i][o]={distance:l,predecessor:i}})}),a.forEach(function(i){var s=n[i];a.forEach(function(o){var l=n[o];a.forEach(function(u){var c=l[i],f=s[u],d=l[u],h=c.distance+f.distance;h<d.distance&&(d.distance=h,d.predecessor=f.predecessor)})})}),n}});var bv=B((Jte,ST)=>{var po=yr();ST.exports=_T;_T.CycleException=Fu;function _T(t){var e={},r={},n=[];function a(i){if(po.has(r,i))throw new Fu;po.has(e,i)||(r[i]=!0,e[i]=!0,po.each(t.predecessors(i),a),delete r[i],n.push(i))}if(po.each(t.sinks(),a),po.size(e)!==t.nodeCount())throw new Fu;return n}function Fu(){}Fu.prototype=new Error});var kT=B((ere,TT)=>{var CT=bv();TT.exports=l8;function l8(t){try{CT(t)}catch(e){if(e instanceof CT.CycleException)return!1;throw e}return!0}});var xv=B((tre,PT)=>{var Nu=yr();PT.exports=u8;function u8(t,e,r){Nu.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],i={};return Nu.each(e,function(s){if(!t.hasNode(s))throw new Error("Graph does not have node: "+s);AT(t,s,r==="post",i,n,a)}),a}function AT(t,e,r,n,a,i){Nu.has(n,e)||(n[e]=!0,r||i.push(e),Nu.each(a(e),function(s){AT(t,s,r,n,a,i)}),r&&i.push(e))}});var DT=B((rre,MT)=>{var c8=xv();MT.exports=f8;function f8(t,e){return c8(t,e,"post")}});var RT=B((nre,LT)=>{var d8=xv();LT.exports=h8;function h8(t,e){return d8(t,e,"pre")}});var IT=B((are,BT)=>{var OT=yr(),v8=Iu(),g8=pv();BT.exports=p8;function p8(t,e){var r=new v8,n={},a=new g8,i;function s(l){var u=l.v===i?l.w:l.v,c=a.priority(u);if(c!==void 0){var f=e(l);f<c&&(n[u]=i,a.decrease(u,f))}}if(t.nodeCount()===0)return r;OT.each(t.nodes(),function(l){a.add(l,Number.POSITIVE_INFINITY),r.setNode(l)}),a.decrease(t.nodes()[0],0);for(var o=!1;a.size()>0;){if(i=a.removeMin(),OT.has(n,i))r.setEdge(i,n[i]);else{if(o)throw new Error("Input graph is not connected: "+t);o=!0}t.nodeEdges(i).forEach(s)}return r}});var FT=B((ire,qT)=>{qT.exports={components:fT(),dijkstra:mv(),dijkstraAll:pT(),findCycles:xT(),floydWarshall:ET(),isAcyclic:kT(),postorder:DT(),preorder:RT(),prim:IT(),tarjan:yv(),topsort:bv()}});var VT=B((sre,zT)=>{var NT=oT();zT.exports={Graph:NT.Graph,json:uT(),alg:FT(),version:NT.version}});var Mr=B((ore,WT)=>{var zu;if(typeof Ga=="function")try{zu=VT()}catch(t){}zu||(zu=window.graphlib);WT.exports=zu});var GT=B((ure,HT)=>{var m8=Fh(),y8=1,b8=4;function x8(t){return m8(t,y8|b8)}HT.exports=x8});var mo=B((cre,UT)=>{var w8=Oa(),E8=Zr(),_8=ro(),S8=mr();function C8(t,e,r){if(!S8(r))return!1;var n=typeof e;return(n=="number"?E8(r)&&_8(e,r.length):n=="string"&&e in r)?w8(r[e],t):!1}UT.exports=C8});var jT=B((fre,YT)=>{var T8=vo(),k8=Oa(),A8=mo(),P8=na(),$T=Object.prototype,M8=$T.hasOwnProperty,D8=T8(function(t,e){t=Object(t);var r=-1,n=e.length,a=n>2?e[2]:void 0;for(a&&A8(e[0],e[1],a)&&(n=1);++r<n;)for(var i=e[r],s=P8(i),o=-1,l=s.length;++o<l;){var u=s[o],c=t[u];(c===void 0||k8(c,$T[u])&&!M8.call(t,u))&&(t[u]=i[u])}return t});YT.exports=D8});var XT=B((dre,KT)=>{var L8=Qr(),R8=Zr(),O8=yn();function B8(t){return function(e,r,n){var a=Object(e);if(!R8(e)){var i=L8(r,3);e=O8(e),r=function(o){return i(a[o],o,a)}}var s=t(e,r,n);return s>-1?a[i?e[s]:s]:void 0}}KT.exports=B8});var QT=B((hre,ZT)=>{var I8=/\s/;function q8(t){for(var e=t.length;e--&&I8.test(t.charAt(e)););return e}ZT.exports=q8});var ek=B((vre,JT)=>{var F8=QT(),N8=/^\s+/;function z8(t){return t&&t.slice(0,F8(t)+1).replace(N8,"")}JT.exports=z8});var ak=B((gre,nk)=>{var V8=ek(),tk=mr(),W8=Na(),rk=NaN,H8=/^[-+]0x[0-9a-f]+$/i,G8=/^0b[01]+$/i,U8=/^0o[0-7]+$/i,$8=parseInt;function Y8(t){if(typeof t=="number")return t;if(W8(t))return rk;if(tk(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tk(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=V8(t);var r=G8.test(t);return r||U8.test(t)?$8(t.slice(2),r?2:8):H8.test(t)?rk:+t}nk.exports=Y8});var wv=B((pre,sk)=>{var j8=ak(),ik=1/0,K8=17976931348623157e292;function X8(t){if(!t)return t===0?t:0;if(t=j8(t),t===ik||t===-ik){var e=t<0?-1:1;return e*K8}return t===t?t:0}sk.exports=X8});var lk=B((mre,ok)=>{var Z8=wv();function Q8(t){var e=Z8(t),r=e%1;return e===e?r?e-r:e:0}ok.exports=Q8});var ck=B((yre,uk)=>{var J8=fv(),eX=Qr(),tX=lk(),rX=Math.max;function nX(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:tX(r);return a<0&&(a=rX(n+a,0)),J8(t,eX(e,3),a)}uk.exports=nX});var dk=B((bre,fk)=>{var aX=XT(),iX=ck(),sX=aX(iX);fk.exports=sX});var Ev=B((xre,hk)=>{var oX=Ou();function lX(t){var e=t==null?0:t.length;return e?oX(t,1):[]}hk.exports=lX});var gk=B((wre,vk)=>{var uX=Au(),cX=Nh(),fX=na();function dX(t,e){return t==null?t:uX(t,cX(e),fX)}vk.exports=dX});var mk=B((Ere,pk)=>{function hX(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}pk.exports=hX});var bk=B((_re,yk)=>{var vX=Js(),gX=Pu(),pX=Qr();function mX(t,e){var r={};return e=pX(e,3),gX(t,function(n,a,i){vX(r,a,e(n,a,i))}),r}yk.exports=mX});var Vu=B((Sre,xk)=>{var yX=Na();function bX(t,e,r){for(var n=-1,a=t.length;++n<a;){var i=t[n],s=e(i);if(s!=null&&(o===void 0?s===s&&!yX(s):r(s,o)))var o=s,l=i}return l}xk.exports=bX});var Ek=B((Cre,wk)=>{function xX(t,e){return t>e}wk.exports=xX});var Sk=B((Tre,_k)=>{var wX=Vu(),EX=Ek(),_X=aa();function SX(t){return t&&t.length?wX(t,_X,EX):void 0}_k.exports=SX});var _v=B((kre,Ck)=>{var CX=Js(),TX=Oa();function kX(t,e,r){(r!==void 0&&!TX(t[e],r)||r===void 0&&!(e in t))&&CX(t,e,r)}Ck.exports=kX});var Ak=B((Are,kk)=>{var AX=ta(),PX=lo(),MX=Fr(),DX="[object Object]",LX=Function.prototype,RX=Object.prototype,Tk=LX.toString,OX=RX.hasOwnProperty,BX=Tk.call(Object);function IX(t){if(!MX(t)||AX(t)!=DX)return!1;var e=PX(t);if(e===null)return!0;var r=OX.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Tk.call(r)==BX}kk.exports=IX});var Sv=B((Pre,Pk)=>{function qX(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}Pk.exports=qX});var Dk=B((Mre,Mk)=>{var FX=Oi(),NX=na();function zX(t){return FX(t,NX(t))}Mk.exports=zX});var qk=B((Dre,Ik)=>{var Lk=_v(),VX=wh(),WX=Bh(),HX=Eh(),GX=qh(),Rk=Bi(),Ok=Mt(),UX=hv(),$X=Ia(),YX=Mi(),jX=mr(),KX=Ak(),XX=Fi(),Bk=Sv(),ZX=Dk();function QX(t,e,r,n,a,i,s){var o=Bk(t,r),l=Bk(e,r),u=s.get(l);if(u){Lk(t,r,u);return}var c=i?i(o,l,r+"",t,e,s):void 0,f=c===void 0;if(f){var d=Ok(l),h=!d&&$X(l),v=!d&&!h&&XX(l);c=l,d||h||v?Ok(o)?c=o:UX(o)?c=HX(o):h?(f=!1,c=VX(l,!0)):v?(f=!1,c=WX(l,!0)):c=[]:KX(l)||Rk(l)?(c=o,Rk(o)?c=ZX(o):(!jX(o)||YX(o))&&(c=GX(l))):f=!1}f&&(s.set(l,c),a(c,l,n,i,s),s.delete(l)),Lk(t,r,c)}Ik.exports=QX});var zk=B((Lre,Nk)=>{var JX=Qs(),e6=_v(),t6=Au(),r6=qk(),n6=mr(),a6=na(),i6=Sv();function Fk(t,e,r,n,a){t!==e&&t6(e,function(i,s){if(a||(a=new JX),n6(i))r6(t,e,s,r,Fk,n,a);else{var o=n?n(i6(t,s),i,s+"",t,e,a):void 0;o===void 0&&(o=i),e6(t,s,o)}},a6)}Nk.exports=Fk});var Wk=B((Rre,Vk)=>{var s6=vo(),o6=mo();function l6(t){return s6(function(e,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(a--,i):void 0,s&&o6(r[0],r[1],s)&&(i=a<3?void 0:i,a=1),e=Object(e);++n<a;){var o=r[n];o&&t(e,o,n,i)}return e})}Vk.exports=l6});var Gk=B((Ore,Hk)=>{var u6=zk(),c6=Wk(),f6=c6(function(t,e,r){u6(t,e,r)});Hk.exports=f6});var Cv=B((Bre,Uk)=>{function d6(t,e){return t<e}Uk.exports=d6});var Yk=B((Ire,$k)=>{var h6=Vu(),v6=Cv(),g6=aa();function p6(t){return t&&t.length?h6(t,g6,v6):void 0}$k.exports=p6});var Kk=B((qre,jk)=>{var m6=Vu(),y6=Qr(),b6=Cv();function x6(t,e){return t&&t.length?m6(t,y6(e,2),b6):void 0}jk.exports=x6});var Zk=B((Fre,Xk)=>{var w6=Ar(),E6=function(){return w6.Date.now()};Xk.exports=E6});var e2=B((Nre,Jk)=>{var _6=eo(),S6=fo(),C6=ro(),Qk=mr(),T6=Vi();function k6(t,e,r,n){if(!Qk(t))return t;e=S6(e,t);for(var a=-1,i=e.length,s=i-1,o=t;o!=null&&++a<i;){var l=T6(e[a]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(a!=s){var c=o[l];u=n?n(c,l,o):void 0,u===void 0&&(u=Qk(c)?c:C6(e[a+1])?[]:{})}_6(o,l,u),o=o[l]}return t}Jk.exports=k6});var r2=B((zre,t2)=>{var A6=ho(),P6=e2(),M6=fo();function D6(t,e,r){for(var n=-1,a=e.length,i={};++n<a;){var s=e[n],o=A6(t,s);r(o,s)&&P6(i,M6(s,t),o)}return i}t2.exports=D6});var a2=B((Vre,n2)=>{var L6=r2(),R6=Jh();function O6(t,e){return L6(t,e,function(r,n){return R6(t,n)})}n2.exports=O6});var s2=B((Wre,i2)=>{var B6=Ev(),I6=uv(),q6=cv();function F6(t){return q6(I6(t,void 0,B6),t+"")}i2.exports=F6});var l2=B((Hre,o2)=>{var N6=a2(),z6=s2(),V6=z6(function(t,e){return t==null?{}:N6(t,e)});o2.exports=V6});var c2=B((Gre,u2)=>{var W6=Math.ceil,H6=Math.max;function G6(t,e,r,n){for(var a=-1,i=H6(W6((e-t)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=t,t+=r;return s}u2.exports=G6});var d2=B((Ure,f2)=>{var U6=c2(),$6=mo(),Tv=wv();function Y6(t){return function(e,r,n){return n&&typeof n!="number"&&$6(e,r,n)&&(r=n=void 0),e=Tv(e),r===void 0?(r=e,e=0):r=Tv(r),n=n===void 0?e<r?1:-1:Tv(n),U6(e,r,n,t)}}f2.exports=Y6});var v2=B(($re,h2)=>{var j6=d2(),K6=j6();h2.exports=K6});var p2=B((Yre,g2)=>{function X6(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}g2.exports=X6});var b2=B((jre,y2)=>{var m2=Na();function Z6(t,e){if(t!==e){var r=t!==void 0,n=t===null,a=t===t,i=m2(t),s=e!==void 0,o=e===null,l=e===e,u=m2(e);if(!o&&!u&&!i&&t>e||i&&s&&l&&!o&&!u||n&&s&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&t<e||u&&r&&a&&!n&&!i||o&&r&&a||!s&&a||!l)return-1}return 0}y2.exports=Z6});var w2=B((Kre,x2)=>{var Q6=b2();function J6(t,e,r){for(var n=-1,a=t.criteria,i=e.criteria,s=a.length,o=r.length;++n<s;){var l=Q6(a[n],i[n]);if(l){if(n>=o)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return t.index-e.index}x2.exports=J6});var _2=B((Xre,E2)=>{var kv=co(),e9=ho(),t9=Qr(),r9=av(),n9=p2(),a9=no(),i9=w2(),s9=aa(),o9=Mt();function l9(t,e,r){e.length?e=kv(e,function(i){return o9(i)?function(s){return e9(s,i.length===1?i[0]:i)}:i}):e=[s9];var n=-1;e=kv(e,a9(t9));var a=r9(t,function(i,s,o){var l=kv(e,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return n9(a,function(i,s){return i9(i,s,r)})}E2.exports=l9});var T2=B((Zre,C2)=>{var u9=Ou(),c9=_2(),f9=vo(),S2=mo(),d9=f9(function(t,e){if(t==null)return[];var r=e.length;return r>1&&S2(t,e[0],e[1])?e=[]:r>2&&S2(e[0],e[1],e[2])&&(e=[e[0]]),c9(t,u9(e,1),[])});C2.exports=d9});var A2=B((Qre,k2)=>{var h9=Zh(),v9=0;function g9(t){var e=++v9;return h9(t)+e}k2.exports=g9});var M2=B((Jre,P2)=>{function p9(t,e,r){for(var n=-1,a=t.length,i=e.length,s={};++n<a;){var o=n<i?e[n]:void 0;r(s,t[n],o)}return s}P2.exports=p9});var L2=B((ene,D2)=>{var m9=eo(),y9=M2();function b9(t,e){return y9(t||[],e||[],m9)}D2.exports=b9});var xt=B((tne,R2)=>{var Wu;if(typeof Ga=="function")try{Wu={cloneDeep:GT(),constant:ku(),defaults:jT(),each:Vh(),filter:tv(),find:dk(),flatten:Ev(),forEach:zh(),forIn:gk(),has:rv(),isUndefined:nv(),last:mk(),map:iv(),mapValues:bk(),max:Sk(),merge:Gk(),min:Yk(),minBy:Kk(),now:Zk(),pick:l2(),range:v2(),reduce:sv(),sortBy:T2(),uniqueId:A2(),values:vv(),zipObject:L2()}}catch(t){}Wu||(Wu=window._);R2.exports=Wu});var I2=B((nne,B2)=>{B2.exports=Hu;function Hu(){var t={};t._next=t._prev=t,this._sentinel=t}Hu.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return O2(e),e};Hu.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&O2(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};Hu.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,x9)),r=r._prev;return"["+t.join(", ")+"]"};function O2(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function x9(t,e){if(t!=="_next"&&t!=="_prev")return e}});var F2=B((ane,q2)=>{var bn=xt(),w9=Mr().Graph,E9=I2();q2.exports=S9;var _9=bn.constant(1);function S9(t,e){if(t.nodeCount()<=1)return[];var r=T9(t,e||_9),n=C9(r.graph,r.buckets,r.zeroIdx);return bn.flatten(bn.map(n,function(a){return t.outEdges(a.v,a.w)}),!0)}function C9(t,e,r){for(var n=[],a=e[e.length-1],i=e[0],s;t.nodeCount();){for(;s=i.dequeue();)Av(t,e,r,s);for(;s=a.dequeue();)Av(t,e,r,s);if(t.nodeCount()){for(var o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(Av(t,e,r,s,!0));break}}}return n}function Av(t,e,r,n,a){var i=a?[]:void 0;return bn.forEach(t.inEdges(n.v),function(s){var o=t.edge(s),l=t.node(s.v);a&&i.push({v:s.v,w:s.w}),l.out-=o,Pv(e,r,l)}),bn.forEach(t.outEdges(n.v),function(s){var o=t.edge(s),l=s.w,u=t.node(l);u.in-=o,Pv(e,r,u)}),t.removeNode(n.v),i}function T9(t,e){var r=new w9,n=0,a=0;bn.forEach(t.nodes(),function(o){r.setNode(o,{v:o,in:0,out:0})}),bn.forEach(t.edges(),function(o){var l=r.edge(o.v,o.w)||0,u=e(o),c=l+u;r.setEdge(o.v,o.w,c),a=Math.max(a,r.node(o.v).out+=u),n=Math.max(n,r.node(o.w).in+=u)});var i=bn.range(a+n+3).map(function(){return new E9}),s=n+1;return bn.forEach(r.nodes(),function(o){Pv(i,s,r.node(o))}),{graph:r,buckets:i,zeroIdx:s}}function Pv(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}});var z2=B((ine,N2)=>{"use strict";var Va=xt(),k9=F2();N2.exports={run:A9,undo:M9};function A9(t){var e=t.graph().acyclicer==="greedy"?k9(t,r(t)):P9(t);Va.forEach(e,function(n){var a=t.edge(n);t.removeEdge(n),a.forwardName=n.name,a.reversed=!0,t.setEdge(n.w,n.v,a,Va.uniqueId("rev"))});function r(n){return function(a){return n.edge(a).weight}}}function P9(t){var e=[],r={},n={};function a(i){Va.has(n,i)||(n[i]=!0,r[i]=!0,Va.forEach(t.outEdges(i),function(s){Va.has(r,s.w)?e.push(s):a(s.w)}),delete r[i])}return Va.forEach(t.nodes(),a),e}function M9(t){Va.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}});var sr=B((sne,G2)=>{"use strict";var nt=xt(),V2=Mr().Graph;G2.exports={addDummyNode:W2,simplify:D9,asNonCompoundGraph:L9,successorWeights:R9,predecessorWeights:O9,intersectRect:B9,buildLayerMatrix:I9,normalizeRanks:q9,removeEmptyRanks:F9,addBorderNode:N9,maxRank:H2,partition:z9,time:V9,notime:W9};function W2(t,e,r,n){var a;do a=nt.uniqueId(n);while(t.hasNode(a));return r.dummy=e,t.setNode(a,r),a}function D9(t){var e=new V2().setGraph(t.graph());return nt.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),nt.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},a=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+a.weight,minlen:Math.max(n.minlen,a.minlen)})}),e}function L9(t){var e=new V2({multigraph:t.isMultigraph()}).setGraph(t.graph());return nt.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),nt.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e}function R9(t){var e=nt.map(t.nodes(),function(r){var n={};return nt.forEach(t.outEdges(r),function(a){n[a.w]=(n[a.w]||0)+t.edge(a).weight}),n});return nt.zipObject(t.nodes(),e)}function O9(t){var e=nt.map(t.nodes(),function(r){var n={};return nt.forEach(t.inEdges(r),function(a){n[a.v]=(n[a.v]||0)+t.edge(a).weight}),n});return nt.zipObject(t.nodes(),e)}function B9(t,e){var r=t.x,n=t.y,a=e.x-r,i=e.y-n,s=t.width/2,o=t.height/2;if(!a&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(i)*s>Math.abs(a)*o?(i<0&&(o=-o),l=o*a/i,u=o):(a<0&&(s=-s),l=s,u=s*i/a),{x:r+l,y:n+u}}function I9(t){var e=nt.map(nt.range(H2(t)+1),function(){return[]});return nt.forEach(t.nodes(),function(r){var n=t.node(r),a=n.rank;nt.isUndefined(a)||(e[a][n.order]=r)}),e}function q9(t){var e=nt.min(nt.map(t.nodes(),function(r){return t.node(r).rank}));nt.forEach(t.nodes(),function(r){var n=t.node(r);nt.has(n,"rank")&&(n.rank-=e)})}function F9(t){var e=nt.min(nt.map(t.nodes(),function(i){return t.node(i).rank})),r=[];nt.forEach(t.nodes(),function(i){var s=t.node(i).rank-e;r[s]||(r[s]=[]),r[s].push(i)});var n=0,a=t.graph().nodeRankFactor;nt.forEach(r,function(i,s){nt.isUndefined(i)&&s%a!==0?--n:n&&nt.forEach(i,function(o){t.node(o).rank+=n})})}function N9(t,e,r,n){var a={width:0,height:0};return arguments.length>=4&&(a.rank=r,a.order=n),W2(t,"border",a,e)}function H2(t){return nt.max(nt.map(t.nodes(),function(e){var r=t.node(e).rank;if(!nt.isUndefined(r))return r}))}function z9(t,e){var r={lhs:[],rhs:[]};return nt.forEach(t,function(n){e(n)?r.lhs.push(n):r.rhs.push(n)}),r}function V9(t,e){var r=nt.now();try{return e()}finally{console.log(t+" time: "+(nt.now()-r)+"ms")}}function W9(t,e){return e()}});var Y2=B((one,$2)=>{"use strict";var U2=xt(),H9=sr();$2.exports={run:G9,undo:$9};function G9(t){t.graph().dummyChains=[],U2.forEach(t.edges(),function(e){U9(t,e)})}function U9(t,e){var r=e.v,n=t.node(r).rank,a=e.w,i=t.node(a).rank,s=e.name,o=t.edge(e),l=o.labelRank;if(i!==n+1){t.removeEdge(e);var u,c,f;for(f=0,++n;n<i;++f,++n)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:e,rank:n},u=H9.addDummyNode(t,"edge",c,"_d"),n===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),t.setEdge(r,u,{weight:o.weight},s),f===0&&t.graph().dummyChains.push(u),r=u;t.setEdge(r,a,{weight:o.weight},s)}}function $9(t){U2.forEach(t.graph().dummyChains,function(e){var r=t.node(e),n=r.edgeLabel,a;for(t.setEdge(r.edgeObj,n);r.dummy;)a=t.successors(e)[0],t.removeNode(e),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),e=a,r=t.node(e)})}});var yo=B((lne,j2)=>{"use strict";var Gu=xt();j2.exports={longestPath:Y9,slack:j9};function Y9(t){var e={};function r(n){var a=t.node(n);if(Gu.has(e,n))return a.rank;e[n]=!0;var i=Gu.min(Gu.map(t.outEdges(n),function(s){return r(s.w)-t.edge(s).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),a.rank=i}Gu.forEach(t.sources(),r)}function j9(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}});var Mv=B((une,K2)=>{"use strict";var Uu=xt(),K9=Mr().Graph,$u=yo().slack;K2.exports=X9;function X9(t){var e=new K9({directed:!1}),r=t.nodes()[0],n=t.nodeCount();e.setNode(r,{});for(var a,i;Z9(e,t)<n;)a=Q9(e,t),i=e.hasNode(a.v)?$u(t,a):-$u(t,a),J9(e,t,i);return e}function Z9(t,e){function r(n){Uu.forEach(e.nodeEdges(n),function(a){var i=a.v,s=n===i?a.w:i;!t.hasNode(s)&&!$u(e,a)&&(t.setNode(s,{}),t.setEdge(n,s,{}),r(s))})}return Uu.forEach(t.nodes(),r),t.nodeCount()}function Q9(t,e){return Uu.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return $u(e,r)})}function J9(t,e,r){Uu.forEach(t.nodes(),function(n){e.node(n).rank+=r})}});var nA=B((cne,rA)=>{"use strict";var xn=xt(),e7=Mv(),t7=yo().slack,r7=yo().longestPath,n7=Mr().alg.preorder,a7=Mr().alg.postorder,i7=sr().simplify;rA.exports=Wa;Wa.initLowLimValues=Lv;Wa.initCutValues=Dv;Wa.calcCutValue=Z2;Wa.leaveEdge=J2;Wa.enterEdge=eA;Wa.exchangeEdges=tA;function Wa(t){t=i7(t),r7(t);var e=e7(t);Lv(e),Dv(e,t);for(var r,n;r=J2(e);)n=eA(e,t,r),tA(e,t,r,n)}function Dv(t,e){var r=a7(t,t.nodes());r=r.slice(0,r.length-1),xn.forEach(r,function(n){s7(t,e,n)})}function s7(t,e,r){var n=t.node(r),a=n.parent;t.edge(r,a).cutvalue=Z2(t,e,r)}function Z2(t,e,r){var n=t.node(r),a=n.parent,i=!0,s=e.edge(r,a),o=0;return s||(i=!1,s=e.edge(a,r)),o=s.weight,xn.forEach(e.nodeEdges(r),function(l){var u=l.v===r,c=u?l.w:l.v;if(c!==a){var f=u===i,d=e.edge(l).weight;if(o+=f?d:-d,l7(t,r,c)){var h=t.edge(r,c).cutvalue;o+=f?-h:h}}}),o}function Lv(t,e){arguments.length<2&&(e=t.nodes()[0]),Q2(t,{},1,e)}function Q2(t,e,r,n,a){var i=r,s=t.node(n);return e[n]=!0,xn.forEach(t.neighbors(n),function(o){xn.has(e,o)||(r=Q2(t,e,r,o,n))}),s.low=i,s.lim=r++,a?s.parent=a:delete s.parent,r}function J2(t){return xn.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function eA(t,e,r){var n=r.v,a=r.w;e.hasEdge(n,a)||(n=r.w,a=r.v);var i=t.node(n),s=t.node(a),o=i,l=!1;i.lim>s.lim&&(o=s,l=!0);var u=xn.filter(e.edges(),function(c){return l===X2(t,t.node(c.v),o)&&l!==X2(t,t.node(c.w),o)});return xn.minBy(u,function(c){return t7(e,c)})}function tA(t,e,r,n){var a=r.v,i=r.w;t.removeEdge(a,i),t.setEdge(n.v,n.w,{}),Lv(t),Dv(t,e),o7(t,e)}function o7(t,e){var r=xn.find(t.nodes(),function(a){return!e.node(a).parent}),n=n7(t,r);n=n.slice(1),xn.forEach(n,function(a){var i=t.node(a).parent,s=e.edge(a,i),o=!1;s||(s=e.edge(i,a),o=!0),e.node(a).rank=e.node(i).rank+(o?s.minlen:-s.minlen)})}function l7(t,e,r){return t.hasEdge(e,r)}function X2(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}});var oA=B((fne,sA)=>{"use strict";var u7=yo(),iA=u7.longestPath,c7=Mv(),f7=nA();sA.exports=d7;function d7(t){switch(t.graph().ranker){case"network-simplex":aA(t);break;case"tight-tree":v7(t);break;case"longest-path":h7(t);break;default:aA(t)}}var h7=iA;function v7(t){iA(t),c7(t)}function aA(t){f7(t)}});var uA=B((dne,lA)=>{var Rv=xt();lA.exports=g7;function g7(t){var e=m7(t);Rv.forEach(t.graph().dummyChains,function(r){for(var n=t.node(r),a=n.edgeObj,i=p7(t,e,a.v,a.w),s=i.path,o=i.lca,l=0,u=s[l],c=!0;r!==a.w;){if(n=t.node(r),c){for(;(u=s[l])!==o&&t.node(u).maxRank<n.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&t.node(u=s[l+1]).minRank<=n.rank;)l++;u=s[l]}t.setParent(r,u),r=t.successors(r)[0]}})}function p7(t,e,r,n){var a=[],i=[],s=Math.min(e[r].low,e[n].low),o=Math.max(e[r].lim,e[n].lim),l,u;l=r;do l=t.parent(l),a.push(l);while(l&&(e[l].low>s||o>e[l].lim));for(u=l,l=n;(l=t.parent(l))!==u;)i.push(l);return{path:a.concat(i.reverse()),lca:u}}function m7(t){var e={},r=0;function n(a){var i=r;Rv.forEach(t.children(a),n),e[a]={low:i,lim:r++}}return Rv.forEach(t.children(),n),e}});var dA=B((hne,fA)=>{var wn=xt(),Ov=sr();fA.exports={run:y7,cleanup:w7};function y7(t){var e=Ov.addDummyNode(t,"root",{},"_root"),r=b7(t),n=wn.max(wn.values(r))-1,a=2*n+1;t.graph().nestingRoot=e,wn.forEach(t.edges(),function(s){t.edge(s).minlen*=a});var i=x7(t)+1;wn.forEach(t.children(),function(s){cA(t,e,a,i,n,r,s)}),t.graph().nodeRankFactor=a}function cA(t,e,r,n,a,i,s){var o=t.children(s);if(!o.length){s!==e&&t.setEdge(e,s,{weight:0,minlen:r});return}var l=Ov.addBorderNode(t,"_bt"),u=Ov.addBorderNode(t,"_bb"),c=t.node(s);t.setParent(l,s),c.borderTop=l,t.setParent(u,s),c.borderBottom=u,wn.forEach(o,function(f){cA(t,e,r,n,a,i,f);var d=t.node(f),h=d.borderTop?d.borderTop:f,v=d.borderBottom?d.borderBottom:f,p=d.borderTop?n:2*n,g=h!==v?1:a-i[s]+1;t.setEdge(l,h,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(v,u,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:a+i[s]})}function b7(t){var e={};function r(n,a){var i=t.children(n);i&&i.length&&wn.forEach(i,function(s){r(s,a+1)}),e[n]=a}return wn.forEach(t.children(),function(n){r(n,1)}),e}function x7(t){return wn.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)}function w7(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,wn.forEach(t.edges(),function(r){var n=t.edge(r);n.nestingEdge&&t.removeEdge(r)})}});var gA=B((vne,vA)=>{var Bv=xt(),E7=sr();vA.exports=_7;function _7(t){function e(r){var n=t.children(r),a=t.node(r);if(n.length&&Bv.forEach(n,e),Bv.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var i=a.minRank,s=a.maxRank+1;i<s;++i)hA(t,"borderLeft","_bl",r,a,i),hA(t,"borderRight","_br",r,a,i)}}Bv.forEach(t.children(),e)}function hA(t,e,r,n,a,i){var s={width:0,height:0,rank:i,borderType:e},o=a[e][i-1],l=E7.addDummyNode(t,"border",s,r);a[e][i]=l,t.setParent(l,n),o&&t.setEdge(o,l,{weight:1})}});var bA=B((gne,yA)=>{"use strict";var en=xt();yA.exports={adjust:S7,undo:C7};function S7(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&mA(t)}function C7(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&T7(t),(e==="lr"||e==="rl")&&(k7(t),mA(t))}function mA(t){en.forEach(t.nodes(),function(e){pA(t.node(e))}),en.forEach(t.edges(),function(e){pA(t.edge(e))})}function pA(t){var e=t.width;t.width=t.height,t.height=e}function T7(t){en.forEach(t.nodes(),function(e){Iv(t.node(e))}),en.forEach(t.edges(),function(e){var r=t.edge(e);en.forEach(r.points,Iv),en.has(r,"y")&&Iv(r)})}function Iv(t){t.y=-t.y}function k7(t){en.forEach(t.nodes(),function(e){qv(t.node(e))}),en.forEach(t.edges(),function(e){var r=t.edge(e);en.forEach(r.points,qv),en.has(r,"x")&&qv(r)})}function qv(t){var e=t.x;t.x=t.y,t.y=e}});var wA=B((pne,xA)=>{"use strict";var En=xt();xA.exports=A7;function A7(t){var e={},r=En.filter(t.nodes(),function(o){return!t.children(o).length}),n=En.max(En.map(r,function(o){return t.node(o).rank})),a=En.map(En.range(n+1),function(){return[]});function i(o){if(!En.has(e,o)){e[o]=!0;var l=t.node(o);a[l.rank].push(o),En.forEach(t.successors(o),i)}}var s=En.sortBy(r,function(o){return t.node(o).rank});return En.forEach(s,i),a}});var _A=B((mne,EA)=>{"use strict";var ia=xt();EA.exports=P7;function P7(t,e){for(var r=0,n=1;n<e.length;++n)r+=M7(t,e[n-1],e[n]);return r}function M7(t,e,r){for(var n=ia.zipObject(r,ia.map(r,function(u,c){return c})),a=ia.flatten(ia.map(e,function(u){return ia.sortBy(ia.map(t.outEdges(u),function(c){return{pos:n[c.w],weight:t.edge(c).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var s=2*i-1;i-=1;var o=ia.map(new Array(s),function(){return 0}),l=0;return ia.forEach(a.forEach(function(u){var c=u.pos+i;o[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*f})),l}});var TA=B((yne,CA)=>{var SA=xt();CA.exports=D7;function D7(t,e){return SA.map(e,function(r){var n=t.inEdges(r);if(n.length){var a=SA.reduce(n,function(i,s){var o=t.edge(s),l=t.node(s.v);return{sum:i.sum+o.weight*l.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}});var AA=B((bne,kA)=>{"use strict";var br=xt();kA.exports=L7;function L7(t,e){var r={};br.forEach(t,function(a,i){var s=r[a.v]={indegree:0,in:[],out:[],vs:[a.v],i};br.isUndefined(a.barycenter)||(s.barycenter=a.barycenter,s.weight=a.weight)}),br.forEach(e.edges(),function(a){var i=r[a.v],s=r[a.w];!br.isUndefined(i)&&!br.isUndefined(s)&&(s.indegree++,i.out.push(r[a.w]))});var n=br.filter(r,function(a){return!a.indegree});return R7(n)}function R7(t){var e=[];function r(i){return function(s){s.merged||(br.isUndefined(s.barycenter)||br.isUndefined(i.barycenter)||s.barycenter>=i.barycenter)&&O7(i,s)}}function n(i){return function(s){s.in.push(i),--s.indegree===0&&t.push(s)}}for(;t.length;){var a=t.pop();e.push(a),br.forEach(a.in.reverse(),r(a)),br.forEach(a.out,n(a))}return br.map(br.filter(e,function(i){return!i.merged}),function(i){return br.pick(i,["vs","i","barycenter","weight"])})}function O7(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}});var DA=B((xne,MA)=>{var bo=xt(),B7=sr();MA.exports=I7;function I7(t,e){var r=B7.partition(t,function(c){return bo.has(c,"barycenter")}),n=r.lhs,a=bo.sortBy(r.rhs,function(c){return-c.i}),i=[],s=0,o=0,l=0;n.sort(q7(!!e)),l=PA(i,a,l),bo.forEach(n,function(c){l+=c.vs.length,i.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=PA(i,a,l)});var u={vs:bo.flatten(i,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function PA(t,e,r){for(var n;e.length&&(n=bo.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}function q7(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}});var OA=B((wne,RA)=>{var sa=xt(),F7=TA(),N7=AA(),z7=DA();RA.exports=LA;function LA(t,e,r,n){var a=t.children(e),i=t.node(e),s=i?i.borderLeft:void 0,o=i?i.borderRight:void 0,l={};s&&(a=sa.filter(a,function(v){return v!==s&&v!==o}));var u=F7(t,a);sa.forEach(u,function(v){if(t.children(v.v).length){var p=LA(t,v.v,r,n);l[v.v]=p,sa.has(p,"barycenter")&&W7(v,p)}});var c=N7(u,r);V7(c,l);var f=z7(c,n);if(s&&(f.vs=sa.flatten([s,f.vs,o],!0),t.predecessors(s).length)){var d=t.node(t.predecessors(s)[0]),h=t.node(t.predecessors(o)[0]);sa.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+h.order)/(f.weight+2),f.weight+=2}return f}function V7(t,e){sa.forEach(t,function(r){r.vs=sa.flatten(r.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function W7(t,e){sa.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}});var IA=B((Ene,BA)=>{var xo=xt(),H7=Mr().Graph;BA.exports=G7;function G7(t,e,r){var n=U7(t),a=new H7({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return t.node(i)});return xo.forEach(t.nodes(),function(i){var s=t.node(i),o=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,o||n),xo.forEach(t[r](i),function(l){var u=l.v===i?l.w:l.v,c=a.edge(u,i),f=xo.isUndefined(c)?0:c.weight;a.setEdge(u,i,{weight:t.edge(l).weight+f})}),xo.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}function U7(t){for(var e;t.hasNode(e=xo.uniqueId("_root")););return e}});var FA=B((_ne,qA)=>{var $7=xt();qA.exports=Y7;function Y7(t,e,r){var n={},a;$7.forEach(r,function(i){for(var s=t.parent(i),o,l;s;){if(o=t.parent(s),o?(l=n[o],n[o]=s):(l=a,a=s),l&&l!==s){e.setEdge(l,s);return}s=o}})}});var HA=B((Sne,WA)=>{"use strict";var oa=xt(),j7=wA(),K7=_A(),X7=OA(),Z7=IA(),Q7=FA(),J7=Mr().Graph,NA=sr();WA.exports=eZ;function eZ(t){var e=NA.maxRank(t),r=zA(t,oa.range(1,e+1),"inEdges"),n=zA(t,oa.range(e-1,-1,-1),"outEdges"),a=j7(t);VA(t,a);for(var i=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){tZ(o%2?r:n,o%4>=2),a=NA.buildLayerMatrix(t);var u=K7(t,a);u<i&&(l=0,s=oa.cloneDeep(a),i=u)}VA(t,s)}function zA(t,e,r){return oa.map(e,function(n){return Z7(t,n,r)})}function tZ(t,e){var r=new J7;oa.forEach(t,function(n){var a=n.graph().root,i=X7(n,a,r,e);oa.forEach(i.vs,function(s,o){n.node(s).order=o}),Q7(n,r,i.vs)})}function VA(t,e){oa.forEach(e,function(r){oa.forEach(r,function(n,a){t.node(n).order=a})})}});var JA=B((Cne,QA)=>{"use strict";var qe=xt(),rZ=Mr().Graph,nZ=sr();QA.exports={positionX:sZ,findType1Conflicts:GA,findType2Conflicts:UA,addConflict:Fv,hasConflict:$A,verticalAlignment:YA,horizontalCompaction:jA,alignCoordinates:XA,findSmallestWidthAlignment:KA,balance:ZA};function GA(t,e){var r={};function n(a,i){var s=0,o=0,l=a.length,u=qe.last(i);return qe.forEach(i,function(c,f){var d=aZ(t,c),h=d?t.node(d).order:l;(d||c===u)&&(qe.forEach(i.slice(o,f+1),function(v){qe.forEach(t.predecessors(v),function(p){var g=t.node(p),m=g.order;(m<s||h<m)&&!(g.dummy&&t.node(v).dummy)&&Fv(r,p,v)})}),o=f+1,s=h)}),i}return qe.reduce(e,n),r}function UA(t,e){var r={};function n(i,s,o,l,u){var c;qe.forEach(qe.range(s,o),function(f){c=i[f],t.node(c).dummy&&qe.forEach(t.predecessors(c),function(d){var h=t.node(d);h.dummy&&(h.order<l||h.order>u)&&Fv(r,d,c)})})}function a(i,s){var o=-1,l,u=0;return qe.forEach(s,function(c,f){if(t.node(c).dummy==="border"){var d=t.predecessors(c);d.length&&(l=t.node(d[0]).order,n(s,u,f,o,l),u=f,o=l)}n(s,u,s.length,l,i.length)}),s}return qe.reduce(e,a),r}function aZ(t,e){if(t.node(e).dummy)return qe.find(t.predecessors(e),function(r){return t.node(r).dummy})}function Fv(t,e,r){if(e>r){var n=e;e=r,r=n}var a=t[e];a||(t[e]=a={}),a[r]=!0}function $A(t,e,r){if(e>r){var n=e;e=r,r=n}return qe.has(t[e],r)}function YA(t,e,r,n){var a={},i={},s={};return qe.forEach(e,function(o){qe.forEach(o,function(l,u){a[l]=l,i[l]=l,s[l]=u})}),qe.forEach(e,function(o){var l=-1;qe.forEach(o,function(u){var c=n(u);if(c.length){c=qe.sortBy(c,function(p){return s[p]});for(var f=(c.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var v=c[d];i[u]===u&&l<s[v]&&!$A(r,u,v)&&(i[v]=u,i[u]=a[u]=a[v],l=s[v])}}})}),{root:a,align:i}}function jA(t,e,r,n,a){var i={},s=iZ(t,e,r,a),o=a?"borderLeft":"borderRight";function l(f,d){for(var h=s.nodes(),v=h.pop(),p={};v;)p[v]?f(v):(p[v]=!0,h.push(v),h=h.concat(d(v))),v=h.pop()}function u(f){i[f]=s.inEdges(f).reduce(function(d,h){return Math.max(d,i[h.v]+s.edge(h))},0)}function c(f){var d=s.outEdges(f).reduce(function(v,p){return Math.min(v,i[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),h=t.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==o&&(i[f]=Math.max(i[f],d))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),qe.forEach(n,function(f){i[f]=i[r[f]]}),i}function iZ(t,e,r,n){var a=new rZ,i=t.graph(),s=oZ(i.nodesep,i.edgesep,n);return qe.forEach(e,function(o){var l;qe.forEach(o,function(u){var c=r[u];if(a.setNode(c),l){var f=r[l],d=a.edge(f,c);a.setEdge(f,c,Math.max(s(t,u,l),d||0))}l=u})}),a}function KA(t,e){return qe.minBy(qe.values(e),function(r){var n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return qe.forIn(r,function(i,s){var o=lZ(t,s)/2;n=Math.max(i+o,n),a=Math.min(i-o,a)}),n-a})}function XA(t,e){var r=qe.values(e),n=qe.min(r),a=qe.max(r);qe.forEach(["u","d"],function(i){qe.forEach(["l","r"],function(s){var o=i+s,l=t[o],u;if(l!==e){var c=qe.values(l);u=s==="l"?n-qe.min(c):a-qe.max(c),u&&(t[o]=qe.mapValues(l,function(f){return f+u}))}})})}function ZA(t,e){return qe.mapValues(t.ul,function(r,n){if(e)return t[e.toLowerCase()][n];var a=qe.sortBy(qe.map(t,n));return(a[1]+a[2])/2})}function sZ(t){var e=nZ.buildLayerMatrix(t),r=qe.merge(GA(t,e),UA(t,e)),n={},a;qe.forEach(["u","d"],function(s){a=s==="u"?e:qe.values(e).reverse(),qe.forEach(["l","r"],function(o){o==="r"&&(a=qe.map(a,function(f){return qe.values(f).reverse()}));var l=(s==="u"?t.predecessors:t.successors).bind(t),u=YA(t,a,r,l),c=jA(t,a,u.root,u.align,o==="r");o==="r"&&(c=qe.mapValues(c,function(f){return-f})),n[s+o]=c})});var i=KA(t,n);return XA(n,i),ZA(n,t.graph().align)}function oZ(t,e,r){return function(n,a,i){var s=n.node(a),o=n.node(i),l=0,u;if(l+=s.width/2,qe.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=r?u:-u),u=0,l+=(s.dummy?e:t)/2,l+=(o.dummy?e:t)/2,l+=o.width/2,qe.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=r?u:-u),u=0,l}}function lZ(t,e){return t.node(e).width}});var rP=B((Tne,tP)=>{"use strict";var wo=xt(),eP=sr(),uZ=JA().positionX;tP.exports=cZ;function cZ(t){t=eP.asNonCompoundGraph(t),fZ(t),wo.forEach(uZ(t),function(e,r){t.node(r).x=e})}function fZ(t){var e=eP.buildLayerMatrix(t),r=t.graph().ranksep,n=0;wo.forEach(e,function(a){var i=wo.max(wo.map(a,function(s){return t.node(s).height}));wo.forEach(a,function(s){t.node(s).y=n+i/2}),n+=i+r})}});var lP=B((kne,oP)=>{"use strict";var Ue=xt(),nP=z2(),aP=Y2(),dZ=oA(),hZ=sr().normalizeRanks,vZ=uA(),gZ=sr().removeEmptyRanks,iP=dA(),pZ=gA(),sP=bA(),mZ=HA(),yZ=rP(),la=sr(),bZ=Mr().Graph;oP.exports=xZ;function xZ(t,e){var r=e&&e.debugTiming?la.time:la.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return DZ(t)});r("  runLayout",function(){wZ(n,r)}),r("  updateInputGraph",function(){EZ(t,n)})})}function wZ(t,e){e("    makeSpaceForEdgeLabels",function(){LZ(t)}),e("    removeSelfEdges",function(){VZ(t)}),e("    acyclic",function(){nP.run(t)}),e("    nestingGraph.run",function(){iP.run(t)}),e("    rank",function(){dZ(la.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){RZ(t)}),e("    removeEmptyRanks",function(){gZ(t)}),e("    nestingGraph.cleanup",function(){iP.cleanup(t)}),e("    normalizeRanks",function(){hZ(t)}),e("    assignRankMinMax",function(){OZ(t)}),e("    removeEdgeLabelProxies",function(){BZ(t)}),e("    normalize.run",function(){aP.run(t)}),e("    parentDummyChains",function(){vZ(t)}),e("    addBorderSegments",function(){pZ(t)}),e("    order",function(){mZ(t)}),e("    insertSelfEdges",function(){WZ(t)}),e("    adjustCoordinateSystem",function(){sP.adjust(t)}),e("    position",function(){yZ(t)}),e("    positionSelfEdges",function(){HZ(t)}),e("    removeBorderNodes",function(){zZ(t)}),e("    normalize.undo",function(){aP.undo(t)}),e("    fixupEdgeLabelCoords",function(){FZ(t)}),e("    undoCoordinateSystem",function(){sP.undo(t)}),e("    translateGraph",function(){IZ(t)}),e("    assignNodeIntersects",function(){qZ(t)}),e("    reversePoints",function(){NZ(t)}),e("    acyclic.undo",function(){nP.undo(t)})}function EZ(t,e){Ue.forEach(t.nodes(),function(r){var n=t.node(r),a=e.node(r);n&&(n.x=a.x,n.y=a.y,e.children(r).length&&(n.width=a.width,n.height=a.height))}),Ue.forEach(t.edges(),function(r){var n=t.edge(r),a=e.edge(r);n.points=a.points,Ue.has(a,"x")&&(n.x=a.x,n.y=a.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var _Z=["nodesep","edgesep","ranksep","marginx","marginy"],SZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},CZ=["acyclicer","ranker","rankdir","align"],TZ=["width","height"],kZ={width:0,height:0},AZ=["minlen","weight","width","height","labeloffset"],PZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},MZ=["labelpos"];function DZ(t){var e=new bZ({multigraph:!0,compound:!0}),r=zv(t.graph());return e.setGraph(Ue.merge({},SZ,Nv(r,_Z),Ue.pick(r,CZ))),Ue.forEach(t.nodes(),function(n){var a=zv(t.node(n));e.setNode(n,Ue.defaults(Nv(a,TZ),kZ)),e.setParent(n,t.parent(n))}),Ue.forEach(t.edges(),function(n){var a=zv(t.edge(n));e.setEdge(n,Ue.merge({},PZ,Nv(a,AZ),Ue.pick(a,MZ)))}),e}function LZ(t){var e=t.graph();e.ranksep/=2,Ue.forEach(t.edges(),function(r){var n=t.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function RZ(t){Ue.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),a=t.node(e.w),i={rank:(a.rank-n.rank)/2+n.rank,e};la.addDummyNode(t,"edge-proxy",i,"_ep")}})}function OZ(t){var e=0;Ue.forEach(t.nodes(),function(r){var n=t.node(r);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=Ue.max(e,n.maxRank))}),t.graph().maxRank=e}function BZ(t){Ue.forEach(t.nodes(),function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}function IZ(t){var e=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,a=0,i=t.graph(),s=i.marginx||0,o=i.marginy||0;function l(u){var c=u.x,f=u.y,d=u.width,h=u.height;e=Math.min(e,c-d/2),r=Math.max(r,c+d/2),n=Math.min(n,f-h/2),a=Math.max(a,f+h/2)}Ue.forEach(t.nodes(),function(u){l(t.node(u))}),Ue.forEach(t.edges(),function(u){var c=t.edge(u);Ue.has(c,"x")&&l(c)}),e-=s,n-=o,Ue.forEach(t.nodes(),function(u){var c=t.node(u);c.x-=e,c.y-=n}),Ue.forEach(t.edges(),function(u){var c=t.edge(u);Ue.forEach(c.points,function(f){f.x-=e,f.y-=n}),Ue.has(c,"x")&&(c.x-=e),Ue.has(c,"y")&&(c.y-=n)}),i.width=r-e+s,i.height=a-n+o}function qZ(t){Ue.forEach(t.edges(),function(e){var r=t.edge(e),n=t.node(e.v),a=t.node(e.w),i,s;r.points?(i=r.points[0],s=r.points[r.points.length-1]):(r.points=[],i=a,s=n),r.points.unshift(la.intersectRect(n,i)),r.points.push(la.intersectRect(a,s))})}function FZ(t){Ue.forEach(t.edges(),function(e){var r=t.edge(e);if(Ue.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function NZ(t){Ue.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}function zZ(t){Ue.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),n=t.node(r.borderTop),a=t.node(r.borderBottom),i=t.node(Ue.last(r.borderLeft)),s=t.node(Ue.last(r.borderRight));r.width=Math.abs(s.x-i.x),r.height=Math.abs(a.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}}),Ue.forEach(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function VZ(t){Ue.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function WZ(t){var e=la.buildLayerMatrix(t);Ue.forEach(e,function(r){var n=0;Ue.forEach(r,function(a,i){var s=t.node(a);s.order=i+n,Ue.forEach(s.selfEdges,function(o){la.addDummyNode(t,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:i+ ++n,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function HZ(t){Ue.forEach(t.nodes(),function(e){var r=t.node(e);if(r.dummy==="selfedge"){var n=t.node(r.e.v),a=n.x+n.width/2,i=n.y,s=r.x-a,o=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:a+2*s/3,y:i-o},{x:a+5*s/6,y:i-o},{x:a+s,y:i},{x:a+5*s/6,y:i+o},{x:a+2*s/3,y:i+o}],r.label.x=r.x,r.label.y=r.y}})}function Nv(t,e){return Ue.mapValues(Ue.pick(t,e),Number)}function zv(t){var e={};return Ue.forEach(t,function(r,n){e[n.toLowerCase()]=r}),e}});var cP=B((Ane,uP)=>{var Yu=xt(),GZ=sr(),UZ=Mr().Graph;uP.exports={debugOrdering:$Z};function $Z(t){var e=GZ.buildLayerMatrix(t),r=new UZ({compound:!0,multigraph:!0}).setGraph({});return Yu.forEach(t.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+t.node(n).rank)}),Yu.forEach(t.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),Yu.forEach(e,function(n,a){var i="layer"+a;r.setNode(i,{rank:"same"}),Yu.reduce(n,function(s,o){return r.setEdge(s,o,{style:"invis"}),o})}),r}});var dP=B((Pne,fP)=>{fP.exports="0.8.5"});var Vv=B((Mne,hP)=>{hP.exports={graphlib:Mr(),layout:lP(),debug:cP(),util:{time:sr().time,notime:sr().notime},version:dP()}});var vP=B((Eo,Wv)=>{(function(e,r){typeof Eo=="object"&&typeof Wv=="object"?Wv.exports=r(Vv()):typeof define=="function"&&define.amd?define(["dagre"],r):typeof Eo=="object"?Eo.cytoscapeDagre=r(Vv()):e.cytoscapeDagre=r(e.dagre)})(Eo,function(t){return function(e){var r={};function n(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=r,n.d=function(a,i,s){n.o(a,i)||Object.defineProperty(a,i,{enumerable:!0,get:s})},n.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,i){if(i&1&&(a=n(a)),i&8||i&4&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),i&2&&typeof a!="string")for(var o in a)n.d(s,o,function(l){return a[l]}.bind(null,o));return s},n.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(i,"a",i),i},n.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},n.p="",n(n.s=0)}([function(e,r,n){var a=n(1),i=function(o){o&&o("layout","dagre",a)};typeof cytoscape!="undefined"&&i(cytoscape),e.exports=i},function(e,r,n){function a(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(d){return typeof d}:a=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},a(c)}var i=function(f){return typeof f=="function"},s=n(2),o=n(3),l=n(4);function u(c){this.options=o({},s,c)}u.prototype.run=function(){var c=this.options,f=this,d=c.cy,h=c.eles,v=function(F,z){return i(z)?z.apply(F,[F]):z},p=c.boundingBox||{x1:0,y1:0,w:d.width(),h:d.height()};p.x2===void 0&&(p.x2=p.x1+p.w),p.w===void 0&&(p.w=p.x2-p.x1),p.y2===void 0&&(p.y2=p.y1+p.h),p.h===void 0&&(p.h=p.y2-p.y1);var g=new l.graphlib.Graph({multigraph:!0,compound:!0}),m={},y=function(F,z){z!=null&&(m[F]=z)};y("nodesep",c.nodeSep),y("edgesep",c.edgeSep),y("ranksep",c.rankSep),y("rankdir",c.rankDir),y("align",c.align),y("ranker",c.ranker),y("acyclicer",c.acyclicer),g.setGraph(m),g.setDefaultEdgeLabel(function(){return{}}),g.setDefaultNodeLabel(function(){return{}});var b=h.nodes();i(c.sort)&&(b=b.sort(c.sort));for(var x=0;x<b.length;x++){var E=b[x],S=E.layoutDimensions(c);g.setNode(E.id(),{width:S.w,height:S.h,name:E.id()})}for(var w=0;w<b.length;w++){var T=b[w];T.isChild()&&g.setParent(T.id(),T.parent().id())}var k=h.edges().stdFilter(function(I){return!I.source().isParent()&&!I.target().isParent()});i(c.sort)&&(k=k.sort(c.sort));for(var P=0;P<k.length;P++){var A=k[P];g.setEdge(A.source().id(),A.target().id(),{minlen:v(A,c.minLen),weight:v(A,c.edgeWeight),name:A.id()},A.id())}l.layout(g);for(var C=g.nodes(),_=0;_<C.length;_++){var R=C[_],L=g.node(R);d.getElementById(R).scratch().dagre=L}var O;c.boundingBox?(O={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},b.forEach(function(I){var F=I.scratch().dagre;O.x1=Math.min(O.x1,F.x),O.x2=Math.max(O.x2,F.x),O.y1=Math.min(O.y1,F.y),O.y2=Math.max(O.y2,F.y)}),O.w=O.x2-O.x1,O.h=O.y2-O.y1):O=p;var D=function(F){if(c.boundingBox){var z=O.w===0?0:(F.x-O.x1)/O.w,q=O.h===0?0:(F.y-O.y1)/O.h;return{x:p.x1+z*p.w,y:p.y1+q*p.h}}else return F};return b.layoutPositions(f,c,function(I){I=a(I)==="object"?I:this;var F=I.scratch().dagre;return D({x:F.x,y:F.y})}),this},e.exports=u},function(e,r){var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(i){return 1},edgeWeight:function(i){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(i,s){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(i,s){return s},ready:function(){},sort:void 0,stop:function(){}};e.exports=n},function(e,r){e.exports=Object.assign!=null?Object.assign.bind(Object):function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return i.forEach(function(o){Object.keys(o).forEach(function(l){return n[l]=o[l]})}),n}},function(e,r){e.exports=t}])})});var ZZ=B(()=>{Zp();mx();var pP=kP(vP());rr.register(ti,ri,pa,On,ma,Yp,Kp,$p);console.log("Chart.js registered OK:",!!rr.registry);qr.use(pP.default);console.log("Dagre layout available");window.__WATER_CLD_READY__=new Promise(function(t){window.__WATER_CLD_RESOLVE__=t});var Ha=()=>window.CLD_SAFE&&window.CLD_SAFE.cy;window.__CLD_READY__=window.__CLD_READY__||!1;window.onCyReady=window.onCyReady||function(t){let e=Ha();if(e&&typeof e.on=="function"){try{t(e)}catch(r){}return}window.__CLD_READY__||(window.__CLD_READY__=!0,document.addEventListener("cy:ready",r=>{var a;let n=((a=r.detail)==null?void 0:a.cy)||Ha();if(n&&typeof t=="function")try{t(n)}catch(i){}},{once:!0}),window.whenModelReady?window.whenModelReady(()=>{let r=Ha();if(r&&typeof t=="function")try{t(r)}catch(n){}}):document.addEventListener("DOMContentLoaded",()=>{let r=Ha();if(r&&typeof t=="function")try{t(r)}catch(n){}},{once:!0}))};window.__cldDebounce=window.__cldDebounce||function(t,e=50){let r=0;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t(...n),e)}};window.__cldSafeFit=window.__cldSafeFit||function(t){if(!(!t||t.elements().length===0))try{t.fit(t.elements(),40)}catch(e){}};(function(){if(!window.__cld_cy_init){let t=function(){if(window.__cy&&typeof window.__cy.startBatch=="function")return window.__cy;let e=document.getElementById("cy");if(!e)return console.warn("[CLD init] #cy missing"),null;if(!qr)return console.warn("[CLD init] cytoscape not loaded"),null;try{window.cy&&window.cy.tagName&&(window._cyDom=window.cy,window.cy=void 0)}catch(n){}let r=qr({container:e,elements:[]});return window.__cy=r,window.lastCy=r,window.CLD_SAFE=window.CLD_SAFE||{},window.CLD_SAFE.cy=r,window._cyDom||(window.cy=r),document.dispatchEvent(new CustomEvent("cy:ready",{detail:{cy:r}})),document.dispatchEvent(new CustomEvent("cld:ready",{detail:{cy:r}})),console.log("[CLD init] cy built",!0),r};window.__cld_cy_init=!0,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t,{once:!0}):t()}})();function _o(){let t=window.CLD_SAFE&&window.CLD_SAFE.cy||window.__cy||window.lastCy||window.cy||null;return t&&typeof t.startBatch=="function"?t:null}function YZ(t){var f;let e=t||{},r=Array.isArray(e.nodes)?e.nodes:[],n=Array.isArray(e.edges)?e.edges:[],a=e.meta||{},i=a.synonymToId instanceof Map?a.synonymToId:null,s=new Set,o=new Set,l=[];for(let d of r){let h=String((d==null?void 0:d.id)||"").trim();!h||s.has(h)||(s.add(h),o.add(h),l.push({data:{id:h,label:(f=d==null?void 0:d.label)!=null?f:h,group:(d==null?void 0:d.group)||""},classes:(d==null?void 0:d.classes)||""}))}let u=new Set,c=[];for(let d of n){let h=String((d==null?void 0:d.source)||"").trim(),v=String((d==null?void 0:d.target)||"").trim();if(i&&(h=String(i.get(h)||h),v=String(i.get(v)||v)),!h||!v||!o.has(h)||!o.has(v))continue;let p=(d==null?void 0:d.polarity)==="-"||(d==null?void 0:d.polarity)==="+"?d.polarity:(d==null?void 0:d.p)||(d==null?void 0:d.sign)||"",g=`${h}->${v}:${p}`;u.has(g)||(u.add(g),c.push({data:{id:(d==null?void 0:d.id)||g,source:h,target:v,polarity:p,weight:+(d==null?void 0:d.weight)||0},classes:(d==null?void 0:d.classes)||""}))}return{nodes:l,edges:c,meta:a}}function gP(t){let e=_o();if(e&&typeof t=="function"){try{t(e)}catch(r){}return}document.addEventListener("cy:ready",r=>{let n=r&&r.detail&&r.detail.cy||_o();if(n&&typeof t=="function")try{t(n)}catch(a){}},{once:!0})}function jZ(t){var n,a,i;let e=(i=(a=(n=Ha())==null?void 0:n.graph)==null?void 0:a.meta)!=null?i:{synonymToId:new Map,nodes:new Map,edges:new Map};return((e.synonymToId instanceof Map?e.synonymToId:new Map).get(t)||[]).map(function(s){return s}).filter(Boolean)}function KZ(t){var n,a,i;let e=(i=(a=(n=Ha())==null?void 0:n.graph)==null?void 0:a.meta)!=null?i:{synonymToId:new Map,nodes:new Map,edges:new Map};return((e.synonymToId instanceof Map?e.synonymToId:new Map).get(t)||[]).map(function(s){var o,l;return(l=(o=e.nodes)==null?void 0:o.get)==null?void 0:l.call(o,s)}).filter(Boolean)}window.findSynonyms=jZ;window.findSynonymNodes=KZ;function XZ(t){let e=Array.isArray(t)?t:(t==null?void 0:t.nodes)||(t==null?void 0:t.vertices)||[],r=Array.isArray(t)?[]:(t==null?void 0:t.edges)||(t==null?void 0:t.links)||(t==null?void 0:t.connections)||[],n=YZ({nodes:e,edges:r,meta:(t==null?void 0:t.meta)||{}}),a=n.nodes.map(s=>({group:"nodes",data:s.data,classes:s.classes})),i=n.edges.map(s=>({group:"edges",data:s.data,classes:s.classes}));return{nodes:a,edges:i,meta:n.meta,graph:n,rawNodes:e,rawEdges:r}}(function(){let t=window.exprEval&&window.exprEval.Parser||function(){this.parse=function(){return{evaluate:function(){return 0},variables:function(){return[]}}}};var e=!1,r=!1,n=[];function a(C){if(e)try{C()}catch(_){console.error(_)}else n.push(C)}function i(){e=!0;for(var C=0;C<n.length;C++)try{n[C]()}catch(_){console.error(_)}n=[]}window.whenModelReady=a;function s(){let C=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${C}px`)}s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",()=>{setTimeout(s,100)});let o,l,u={},c="cld-scenarios";function f(){try{return JSON.parse(localStorage.getItem(c))||{}}catch(C){return{}}}function d(C){localStorage.setItem(c,JSON.stringify(C))}function h(C){let _=new t;o={nodes:{},edges:[],order:[],initials:{}},(C.nodes||[]).forEach(D=>{let I=ko(Hi({},D),{deps:[]});if(D.expr)try{I.fn=_.parse(D.expr)}catch(F){console.error("node parse",D.id,F)}D.type==="init"&&(I.value=I.fn?I.fn.evaluate({}):parseFloat(D.expr)||0,o.initials[D.id]=I.value),typeof D.init!="undefined"&&(o.initials[D.id]=D.init),o.nodes[D.id]=I}),(C.edges||[]).forEach(D=>{let I=Hi({},D);if(D.expr)try{I.fn=_.parse(D.expr)}catch(F){console.error("edge parse",D.source,D.target,F)}o.edges.push(I)}),Object.values(o.nodes).forEach(D=>{D.type==="expr"&&D.fn&&(D.deps=D.fn.variables().filter(I=>o.nodes[I]))});let R={};Object.keys(o.nodes).forEach(D=>R[D]=0),Object.values(o.nodes).forEach(D=>D.deps.forEach(I=>R[D.id]++));let L=[];Object.keys(R).forEach(D=>{R[D]===0&&L.push(D)});let O=[];for(;L.length;){let D=L.shift();O.push(D),Object.values(o.nodes).forEach(I=>{I.deps.includes(D)&&(R[I.id]--,R[I.id]===0&&L.push(I.id))})}return Object.keys(o.nodes).forEach(D=>{O.includes(D)||O.push(D)}),o.order=O,o}function v(C,_){let R=o&&o.initials?o.initials:{},L=C[_-1]||{},O={},D=1e-6,I=8,F=0,z=!0;for(;z&&F<I;){z=!1;for(let q of o.order){let N=o.nodes[q];if(N.type==="init"){O[q]=o.initials[q];continue}let U=Object.assign({},u,L,O,{delay:function($,j){j=typeof j=="number"?j:1;let te=_-j;if(te<0)return R[$]||0;let oe=C[te];return oe&&oe[$]!=null?oe[$]:R[$]||0}}),Y=0;try{Y=N.fn?N.fn.evaluate(U):0}catch($){console.error("eval",q,$)}(O[q]===void 0||Math.abs(O[q]-Y)>D)&&(O[q]=Y,z=!0)}F++}return O}function p(C){if(!o||!o.initials)throw new Error("model not ready");C=C||{},u=C;let _=C.years||30,R=o.initials||{},L=[Object.assign({},R)];for(var O=1;O<=_;O++)L[O]=v(L,O);return{years:Array.from({length:_+1},function(D,I){return I}),series:L.map(function(D){return D.gw_stock})}}function g(C){let R=document.createElement("canvas").getContext("2d");return{setFont:function(L){R.font=C+"px "+L},measure:function(L){return R&&typeof R.measureText=="function"?R.measureText(L).width:0},wrapLines:function(L,O){if(!L)return[""];let D=L.split(/\s+/),I=[],F=D[0]||"";for(let z=1;z<D.length;z++){let q=D[z],N=F+" "+q;this.measure(N)<=O?F=N:(I.push(F),F=q)}return I.push(F),I}}}function m(C,_={}){let R=_.fontSize||15,L=typeof _.padding=="number"?_.padding:18,O=_.maxWidth||_.maxTextWidth||260,D=_.minWidth||100,I=_.minHeight||48,F=C.container(),z=window.getComputedStyle(F),q=z&&z.fontFamily?z.fontFamily:"sans-serif",N=g(R);N.setFont(q),C.batch(()=>{C.nodes().forEach(U=>{if(U.isParent&&U.isParent())return;let $=(U.data("label")!==void 0?String(U.data("label")):U.id()||"").replace(/\s+/g," ").trim(),j=N.wrapLines($,O),te=0;j.forEach(Q=>{let se=N.measure(Q);se>te&&(te=se)});let oe=Math.ceil(R*1.3),ee=j.length*oe,V=Math.max(D,Math.ceil(te+L*2)),W=Math.max(I,Math.ceil(ee+L*2)),H=j.join(`
`);U.data("label",H),U.style({width:V+"px",height:W+"px","text-valign":"center","text-halign":"center"})})})}window.measureAndResizeNodes=m;let y,b,x;function E(){try{let C=document.getElementById("sim-chart");if(!C)return console.warn("sim-chart not found");if(!rr)return console.warn("Chart.js not loaded");let _=C.getContext("2d");window.__wesh_sim_chart||(rr.defaults.font.family="Vazirmatn, sans-serif",window.__wesh_sim_chart=new rr(_,{type:"line",data:{labels:[],datasets:[{label:"\u067E\u0627\u06CC\u0647",data:[],borderWidth:2,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}})),b=window.__wesh_sim_chart,r=!0,a(S)}catch(C){console.error("initSimChart failed",C)}}document.addEventListener("DOMContentLoaded",E),document.fonts&&document.fonts.ready&&document.fonts.ready.then(E).catch(function(){E()});function S(){if(window.__wesh_sim_chart)try{if(typeof p=="function"&&o&&o.initials){var C=p({eff:0,dem:0,delay:0,years:30}),_=C.years||(C.baseline?C.baseline.map(function(R,L){return L}):[]);x={years:_,baseline:C.baseline||C.series||[]},w(x)}else window.__wesh_sim_chart.data.labels.length||(x={years:Array.from({length:30},function(R,L){return L}),baseline:Array.from({length:30},function(){return 100})},w(x))}catch(R){console.error("baseline init failed",R)}}function w(C){if(!window.__wesh_sim_chart||!C)return;let _=C.years||Array.from({length:C.baseline?C.baseline.length:C.series?C.series.length:0},(L,O)=>O);window.__wesh_sim_chart.data.labels=_;let R=[{label:"\u067E\u0627\u06CC\u0647",data:C.baseline||C.series||[],borderWidth:2,borderColor:"#0ea5e9",backgroundColor:"rgba(14,165,233,0.1)",fill:!1}];C.scenario&&R.push({label:"\u0633\u0646\u0627\u0631\u06CC\u0648",data:C.scenario,borderWidth:2,borderColor:"rgb(220,38,38)",backgroundColor:"rgba(220,38,38,0.1)",fill:!1}),window.__wesh_sim_chart.data.datasets=R,window.__wesh_sim_chart.update()}function T(C){var _={};C.nodes().forEach(function(F){var z=F.data("group")||"_";(_[z]=_[z]||[]).push(F)});var R=Object.keys(_),L=Math.ceil(Math.sqrt(R.length)),O=0,D=0,I=0;R.forEach(function(F){var z=I%L*800+200,q=Math.floor(I/L)*600+200,N=_[F];N.forEach(function(U,Y){var $=Y%3,j=Math.floor(Y/3),te=z+$*260+(Math.random()*20-10),oe=q+j*220+(Math.random()*20-10);U.position({x:te,y:oe})}),I++})}function k(C){let _=(C.nodes||[]).map(function(L,O){return{data:{id:L.id||L.data&&L.data.id||"n_"+O,label:L.label,group:L.group,unit:L.unit,desc:L.desc}}}),R=(C.edges||[]).map(function(L,O){return{data:{id:L.id||L.data&&L.data.id||L.source+"__"+L.target+"__"+(L.sign||"")||"e_"+O,source:L.source,target:L.target,sign:L.sign,label:L.label||(L.sign==="-"?"\u2212":"+"),weight:typeof L.weight=="number"?L.weight:void 0,delayYears:typeof L.delayYears=="number"?L.delayYears:0}}});return{nodes:_,edges:R}}async function P(C){var z;let _=await fetch(C,{cache:"no-store"}).catch(q=>{console.error("[CLD] fetch failed",q)});if(!_||!_.ok){console.error("[CLD] fetch bad status",_&&_.status);return}let R;try{R=await _.json()}catch(q){console.error("[CLD] invalid model JSON",q);return}let L=XZ(R);console.table({rawNodes:L.rawNodes.length,rawEdges:L.rawEdges.length}),console.log("first raw node",L.rawNodes[0]);let O=L.graph;if((z=window.graphStore)!=null&&z.setGraph?window.graphStore.setGraph(O):(window.graphStore=window.graphStore||{},window.graphStore.graph=O),window.kernel=window.kernel||{},window.kernel.graph=O,l=R,typeof h=="function")try{h(R)}catch(q){console.error("[CLD] parse model",q)}typeof i=="function"&&i(),r&&typeof S=="function"&&S();let D={nodes:L.nodes,edges:L.edges};window.__lastElementsForCy=D;let I=()=>{var Y,$,j,te,oe,ee,V,W;console.debug("[CLD] to-cy arrays",{nNodes:D.nodes.length,nEdges:D.edges.length,sampleNode:D.nodes[0]}),(!D||!Array.isArray(D.nodes))&&console.warn("[CLD] invalid els");try{if((Y=window.graphStore)!=null&&Y.restore)window.graphStore.restore({elements:{nodes:D.nodes,edges:D.edges}});else{let H=_o();if(!H)return;H.startBatch&&H.startBatch();try{typeof H.json=="function"?(H.elements().remove(),H.json({elements:{nodes:D.nodes,edges:D.edges}})):H.add(D.nodes.concat(D.edges))}finally{if(H.endBatch)try{H.endBatch()}catch(Q){}}}}catch(H){console.error("[CLD] inject failed",H);return}let q=_o(),N=(($=q==null?void 0:q.nodes())==null?void 0:$.length)||0,U=((j=q==null?void 0:q.edges())==null?void 0:j.length)||0;console.log("[CLD] added to cy",{cyNodes:N,cyEdges:U});try{let H=(window==null?void 0:window.cldLayoutName)||"dagre";q.layout({name:H,rankDir:"LR",fit:!0}).run(),q.once("layoutstop",()=>{var se,ve,Ne,De,ke;try{q.fit()}catch(Ce){}(ve=(se=window.waterKernel)==null?void 0:se.emit)==null||ve.call(se,"MODEL_LOADED",O),(De=(Ne=window.waterKernel)==null?void 0:Ne.emit)==null||De.call(Ne,"GRAPH_READY",O),(ke=window.__WATER_CLD_RESOLVE__)==null||ke.call(window)})}catch(H){console.warn("[CLD] layout/fit error",H),(oe=(te=window.waterKernel)==null?void 0:te.emit)==null||oe.call(te,"MODEL_LOADED",O),(V=(ee=window.waterKernel)==null?void 0:ee.emit)==null||V.call(ee,"GRAPH_READY",O),(W=window.__WATER_CLD_RESOLVE__)==null||W.call(window)}},F=()=>I();window.graphStore&&typeof window.graphStore.ready=="function"?window.graphStore.ready().then(()=>F()).catch(()=>gP(()=>F())):gP(()=>F())}window.loadModelFromUrl=P;function A(){if(!x)return;w(x);let C=document.getElementById("p-eff"),_=document.getElementById("p-dem"),R=document.getElementById("p-delay");C&&(C.value=0,C.dispatchEvent(new Event("input"))),_&&(_.value=0,_.dispatchEvent(new Event("input"))),R&&(R.value=0,R.dispatchEvent(new Event("input")))}document.addEventListener("DOMContentLoaded",async function(){if(!document.getElementById("cy")){console.warn("cy container not found");return}if(typeof qr=="undefined"){console.warn("cytoscape not loaded");return}let _=_o();if(!_){console.warn("[CLD init] cy missing");return}window.tippy&&tippy(".hint",{allowHTML:!0,theme:"light",delay:[80,0],placement:"bottom",maxWidth:320,interactive:!0});let R=getComputedStyle(document.documentElement),L=R.getPropertyValue("--pos").trim()||"#16a34a",O=R.getPropertyValue("--neg").trim()||"#dc2626",D=R.getPropertyValue("--accent").trim()||"#58a79a",I=R.getPropertyValue("--line").trim()||"#2f6158",F=R.getPropertyValue("--text").trim()||"#e6f1ef",z=[{selector:"node",style:{"background-color":"#f8faf9","border-width":2}},{selector:"node[label][!isGroup]",style:{label:"data(label)","font-family":"Vazirmatn, sans-serif","text-wrap":"wrap","text-max-width":260,"font-size":15,"font-weight":500,color:"#0a0f0e","text-valign":"center","text-halign":"center","text-margin-y":0,"text-outline-width":0,"background-color":"#eaf3f1",shape:"round-rectangle",padding:"12px 18px","border-width":3,"border-color":"#ffffff","min-zoomed-font-size":8}},{selector:"node.compound",style:{shape:"round-rectangle","background-color":"#ffffff","background-opacity":.12,"border-color":"#2b3c39","border-width":1.5,label:"data(label)","text-valign":"top","text-halign":"center","font-size":12,color:"#cfe7e2",padding:24,"font-family":"Vazirmatn, sans-serif"}},{selector:"edge",style:{"curve-style":"bezier",width:ae=>2+(ae.data("weight")||0),"line-style":ae=>ae.data("delayYears")>0?"dashed":"solid","line-dash-pattern":ae=>ae.data("delayYears")>0?[8,6]:[0],"target-arrow-shape":"triangle","arrow-scale":1.2,"line-color":I,"target-arrow-color":I,"source-arrow-color":I,label:"data(label)","text-rotation":"autorotate","text-background-color":"rgba(0,0,0,0.35)","text-background-opacity":1,"text-background-padding":1,"text-wrap":"wrap","text-max-width":100,"font-family":"Vazirmatn, sans-serif","font-size":12,color:F}},{selector:"edge.pos",style:{"line-color":L,"target-arrow-color":L,"source-arrow-color":L}},{selector:"edge.neg",style:{"line-color":O,"target-arrow-color":O,"source-arrow-color":O}},{selector:".hidden",style:{display:"none"}},{selector:".faded",style:{opacity:.1}},{selector:".highlighted",style:{"border-color":"#facc15","border-width":3}},{selector:".highlight",style:{"border-color":D,"border-width":3}},{selector:"edge.highlight",style:{"line-color":D,"target-arrow-color":D,"source-arrow-color":D,width:4}}];_.style().fromJson(z).update(),_.layout({name:"grid"}).run(),function(){var ae=1;function ie(){var ge=_.zoom();_.batch(function(){_.edges().forEach(function(He){He.style("label",ge>=ae?He.data("label"):"")})})}window.__WATER_CLD_READY__.then(function(){_.on("zoom",ie),ie()})}(),function(){var ae=.15;window.__WATER_CLD_READY__.then(function(){_.on("mouseover","node",function(ie){var ge=ie.target,He=ge.closedNeighborhood();_.batch(function(){var _e;let Te=_.elements().difference(He);CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(Te,"faded"):(console.warn("CLD_SAFE.safeAddClass missing"),Te!=null&&Te.forEach?Te.forEach(ce=>{var re;return(re=ce.classList)==null?void 0:re.add("faded")}):(_e=Te==null?void 0:Te.classList)==null||_e.add("faded")),He.removeClass("faded")})}),_.on("mouseout","node",function(){_.elements().removeClass("faded")}),_.style().selector(".faded").style({opacity:ae}).update()})}(),window.__WATER_CLD_READY__.then(function(){_.style().selector("node").style({width:"label",height:"label","text-wrap":"wrap","text-max-width":240,padding:"16px","font-size":15,"font-weight":600,color:"#0a0f0e","background-color":"#f8fafc","border-color":"#94a3b8","border-width":1,shape:"round-rectangle"}).selector("node.compound").style({width:"auto",height:"auto"}).selector("edge").style({"curve-style":"bezier",width:"mapData(weight, 0, 1.2, 2, 6)","target-arrow-shape":"triangle","line-cap":"round",label:"data(label)","text-rotation":"autorotate","font-size":11,"text-background-color":"rgba(11,18,32,.65)","text-background-opacity":1,"text-background-shape":"roundrectangle","text-background-padding":3,color:"#e6f1ff"}).selector('edge[sign = "+"]').style({"line-color":"#16a34a","target-arrow-color":"#16a34a"}).selector('edge[sign = "-"]').style({"line-color":"#dc2626","target-arrow-color":"#dc2626"}).selector("edge[delayYears > 0]").style({"line-style":"dashed","line-dash-pattern":[8,6]}).update(),_.on("layoutstop",function(){window.measureAndResizeNodes&&window.measureAndResizeNodes(_,{maxWidth:240,padding:16})}),document.fonts&&document.fonts.ready&&document.fonts.ready.then(function(){window.measureAndResizeNodes&&window.measureAndResizeNodes(_,{maxWidth:240,padding:16})}),_.on("ready",()=>setTimeout(()=>window.__cldSafeFit(_),0)),window.addEventListener("resize",()=>requestAnimationFrame(()=>window.__cldSafeFit(_))),window.addEventListener("orientationchange",()=>setTimeout(()=>window.__cldSafeFit(_),150)),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>setTimeout(()=>window.__cldSafeFit(_),60))}),function(){if(!window.tippy)return;function ae(_e){return _e==null?"":String(_e).replace(/[&<>"]/g,ce=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"})[ce])}function ie(_e,ce){return function(){let le=_e.renderedBoundingBox({includeLabels:!0}),he=ce.container().getBoundingClientRect(),vt=Math.max(10,le.w||le.x2-le.x1),ot=Math.max(10,le.h||le.y2-le.y1),Lt=he.left+(le.x1||0),Ht=he.top+(le.y1||0);return{width:vt,height:ot,top:Ht,left:Lt,right:Lt+vt,bottom:Ht+ot}}}function ge(_e){let ce=_e.data()||{},re=document.createElement("div");re.dir="rtl",re.style.whiteSpace="normal",re.style.maxWidth="260px";let le=[];if(_e.isNode&&_e.isNode()){le.push(`<div style="font-weight:600;margin-bottom:4px">${ae(ce.label||ce.id||"")}</div>`),ce.desc&&le.push(`<div>${ae(ce.desc)}</div>`);let he=[];ce.unit&&he.push(`\u0648\u0627\u062D\u062F: ${ae(ce.unit)}`),ce.group&&he.push(`\u06AF\u0631\u0648\u0647: ${ae(ce.group)}`),he.length&&le.push(`<div style="opacity:.8;margin-top:4px">${he.join(" \u2022 ")}</div>`)}else{le.push(`<div style="font-weight:600;margin-bottom:4px">${ae(ce.label||"")}</div>`);let he=[];ce.sign&&he.push(`\u0642\u0637\u0628\u06CC\u062A: ${ce.sign==="+"?"\u0645\u062B\u0628\u062A (+)":"\u0645\u0646\u0641\u06CC (\u2212)"}`),typeof ce.weight=="number"&&he.push(`\u0648\u0632\u0646: ${ce.weight}`),typeof ce.delayYears=="number"&&he.push(`\u062A\u0623\u062E\u06CC\u0631: ${ce.delayYears} \u0633\u0627\u0644`),he.length&&le.push(`<div>${he.join(" \u2022 ")}</div>`)}return re.innerHTML=le.join(""),re}function He(_e,ce){return tippy(document.body,{trigger:"manual",appendTo:()=>ce.container(),allowHTML:!0,interactive:!1,arrow:!0,placement:"top",getReferenceClientRect:ie(_e,ce),content:ge(_e),theme:"light",hideOnClick:!1})}function Te(_e){_e.on("mouseover","node, edge",function(re){let le=re.target;if(le.scratch("_tippy"))return;let he=He(le,_e);le.scratch("_tippy",he),he.show()}),_e.on("mouseout tap","node, edge",function(re){let le=re.target.scratch("_tippy");le&&(le.destroy(),re.target.scratch("_tippy",null))});let ce=()=>{_e.$("node, edge").forEach(re=>{let le=re.scratch("_tippy");le&&(le.setProps({getReferenceClientRect:ie(re,_e)}),le.popperInstance&&le.popperInstance.update&&le.popperInstance.update())})};_e.on("pan zoom drag position",ce),_e.on("layoutstop",ce),_e.on("remove","node, edge",function(re){let le=re.target.scratch("_tippy");le&&le.destroy()})}window.__WATER_CLD_READY__.then(function(){Te(_)})}(),window.__WATER_CLD_READY__.then(function(){_.on("dbltap","node",ae=>{var ie;if(ae.target.locked())ae.target.unlock().removeClass("highlight");else{let ge=ae.target.lock();CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(ge,"highlight"):(console.warn("CLD_SAFE.safeAddClass missing"),(ie=ge==null?void 0:ge.classList)==null||ie.add("highlight"))}})});let q=document.getElementById("layout"),N=document.getElementById("layout-preset");N&&N.addEventListener("change",()=>{let ae=N.value;if(!ae){q&&runLayout(q.value);return}if(window.getLayoutPreset){let ie=window.getLayoutPreset(ae);if(ie)try{_.layout(ie).run()}catch(ge){console.error("layout preset",ge)}}});let U=document.getElementById("f-pos"),Y=document.getElementById("f-neg"),$=document.getElementById("f-group"),j=document.getElementById("f-delay"),te=document.getElementById("q"),oe=document.getElementById("loops-list"),ee=document.getElementById("btn-loops"),V=document.getElementById("panel-loops"),W=document.getElementById("flt-weight-min"),H=document.getElementById("flt-delay-max"),Q=document.getElementById("flt-weight-min-val"),se=document.getElementById("flt-delay-max-val");function ve(){_.elements().removeClass("hidden");let ae=!(U&&U.classList.contains("off")),ie=!(Y&&Y.classList.contains("off")),ge=$?$.value:"",He=j?j.checked:!1;_.edges().forEach(Te=>{var le;let _e=Te.data("sign")==="+"?ae:ie,ce=!ge||Te.source().data("parent")===ge&&Te.target().data("parent")===ge,re=!He||Te.data("delayYears")>0;_e&&ce&&re||(CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(Te,"hidden"):(console.warn("CLD_SAFE.safeAddClass missing"),(le=Te==null?void 0:Te.classList)==null||le.add("hidden")))}),_.nodes().forEach(Te=>{var _e;ge&&Te.data("parent")!==ge&&Te.id()!==ge&&(CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(Te,"hidden"):(console.warn("CLD_SAFE.safeAddClass missing"),(_e=Te==null?void 0:Te.classList)==null||_e.add("hidden")))}),window.__cldSafeFit(_)}function Ne(ae,ie){ae&&ie&&(ie.textContent=String(ae.value),ae.addEventListener("input",()=>{ie.textContent=String(ae.value)}))}Ne(W,Q),Ne(H,se);function De(){_.edges().removeClass("hidden");let ae=W?Number(W.value):0,ie=H?Number(H.value):0;_.edges().forEach(ge=>{var He;(ge.data("weight")<ae||ge.data("delayYears")>ie)&&(CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(ge,"hidden"):(console.warn("CLD_SAFE.safeAddClass missing"),(He=ge==null?void 0:ge.classList)==null||He.add("hidden")))}),window.__cldSafeFit(_)}W&&W.addEventListener("input",De,{passive:!0}),H&&H.addEventListener("input",De,{passive:!0}),U&&U.addEventListener("click",()=>{U.classList.toggle("off"),ve()}),Y&&Y.addEventListener("click",()=>{Y.classList.toggle("off"),ve()}),$&&$.addEventListener("change",ve),j&&j.addEventListener("change",ve),ve(),De(),te&&te.addEventListener("input",()=>{var ie,ge,He;_.elements().removeClass("faded"),_.nodes().removeClass("highlighted");let ae=te.value.trim();if(ae){let Te;try{Te=new RegExp(ae,"i")}catch(le){return}let _e=_.nodes();CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(_e,"faded"):(console.warn("CLD_SAFE.safeAddClass missing"),_e!=null&&_e.forEach?_e.forEach(le=>{var he;return(he=le.classList)==null?void 0:he.add("faded")}):(ie=_e==null?void 0:_e.classList)==null||ie.add("faded"));let ce=_.edges();CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(ce,"faded"):(console.warn("CLD_SAFE.safeAddClass missing"),ce!=null&&ce.forEach?ce.forEach(le=>{var he;return(he=le.classList)==null?void 0:he.add("faded")}):(ge=ce==null?void 0:ce.classList)==null||ge.add("faded"));let re=_.nodes().filter(le=>Te.test(le.data("label")));re.removeClass("faded"),CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(re,"highlighted"):(console.warn("CLD_SAFE.safeAddClass missing"),re!=null&&re.forEach?re.forEach(le=>{var he;return(he=le.classList)==null?void 0:he.add("highlighted")}):(He=re==null?void 0:re.classList)==null||He.add("highlighted")),re.connectedEdges().removeClass("faded")}}),ee&&ee.addEventListener("click",()=>{ke(),V&&(V.open=!0)});function ke(){if(!oe||!window.cydetectLoops)return;oe.innerHTML="",(window.cydetectLoops(_)||[]).forEach(ie=>{let ge=document.createElement("li"),He=(ie.nodeIds||[]).map(ce=>_.getElementById(ce).data("label")||ce),_e=(ie.edgeIds||[]).filter(ce=>_.getElementById(ce).data("sign")==="-").length%2===0?"+":"-";ge.textContent=`${_e}: ${He.join(" \u2192 ")}`,ge.style.cursor="pointer",ge.addEventListener("click",()=>{_.elements().removeClass("highlight");let ce=_.collection();(ie.nodeIds||[]).forEach(re=>{var he;let le=_.getElementById(re);CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(le,"highlight"):(console.warn("CLD_SAFE.safeAddClass missing"),(he=le==null?void 0:le.classList)==null||he.add("highlight")),ce.merge(le)}),(ie.edgeIds||[]).forEach(re=>{var he;let le=_.getElementById(re);CLD_SAFE!=null&&CLD_SAFE.safeAddClass?CLD_SAFE.safeAddClass(le,"highlight"):(console.warn("CLD_SAFE.safeAddClass missing"),(he=le==null?void 0:le.classList)==null||he.add("highlight")),ce.merge(le)}),_.fit(ce,50)}),oe.appendChild(ge)})}let Ce=document.getElementById("import-json");Ce&&Ce.addEventListener("change",ae=>{let ie=ae.target.files[0];if(!ie)return;let ge=new FileReader;ge.onload=He=>{try{let Te=JSON.parse(He.target.result),_e=Te.groups||[];groupSelect&&(groupSelect.innerHTML='<option value="">\u0647\u0645\u0647 \u06AF\u0631\u0648\u0647\u200C\u0647\u0627</option>',_e.forEach(re=>{let le=document.createElement("option");le.value=re.id,le.textContent=re.id,groupSelect.appendChild(le)}));let ce=[];_e.forEach(re=>ce.push({data:{id:re.id,color:re.color,isGroup:!0},classes:"compound group"})),(Te.nodes||[]).forEach(re=>ce.push({data:{id:re.id,label:re.label,parent:re.group,desc:re.desc,unit:re.unit}})),(Te.edges||[]).forEach((re,le)=>ce.push({data:{id:`e${le}`,source:re.source,target:re.target,label:re.label,sign:re.sign,weight:re.weight||0,delayYears:re.delayYears||0},classes:re.sign==="-"?"neg":"pos"})),_.elements().remove(),_.add(ce),runLayout("elk"),updateSignFilter()}catch(Te){console.error("Import JSON failed",Te)}},ge.readAsText(ie)});let de=document.getElementById("legend");if(de){let ae=['<span class="badge pos"><i class="dot" style="background:var(--pos)"></i>\u0645\u062B\u0628\u062A</span>','<span class="badge neg"><i class="dot" style="background:var(--neg)"></i>\u0645\u0646\u0641\u06CC</span>','<span class="badge dashed"><i class="dot" style="border:2px dashed #cbd5e1"></i>\u062A\u0627\u062E\u06CC\u0631\u062F\u0627\u0631/\u063A\u06CC\u0631\u0645\u0633\u062A\u0642\u06CC\u0645</span>'];groups.forEach(ie=>ae.push(`<span class="badge" style="border-color:${ie.color}"><i class="dot" style="background:${ie.color}"></i>${ie.id}</span>`)),de.innerHTML=ae.join("")}let xe=document.getElementById("p-eff"),we=document.getElementById("p-dem"),Me=document.getElementById("p-delay"),Se=document.getElementById("btn-run"),ze=document.getElementById("btn-reset"),Ye=document.getElementById("btn-export-csv"),Ke=document.getElementById("sc-new"),Xe=document.getElementById("sc-save"),Ze=document.getElementById("sc-load"),Re=document.getElementById("sc-delete"),pe=document.getElementById("sc-table"),J=document.getElementById("sens-param"),M=document.getElementById("sens-min"),G=document.getElementById("sens-max"),K=document.getElementById("sens-step"),X=document.getElementById("sens-run"),Z=document.getElementById("sens-progress"),fe=null,ne=null,Ee=new Worker("/assets/sim-worker.js");Ee.postMessage({cmd:"init"});let be=document.getElementById("val-eff"),Pe=document.getElementById("val-dem"),We=document.getElementById("val-delay");function Be(ae,ie){ae&&ie&&(ie.textContent=ae.value,ae.addEventListener("input",()=>{ie.textContent=ae.value}))}Be(xe,be),Be(we,Pe),Be(Me,We);let me=pe?pe.querySelector("tbody"):null;function Ve(){if(!me)return;me.innerHTML="";let ae=f();Object.entries(ae).forEach(([ie,ge])=>{let He=document.createElement("tr");He.innerHTML=`<td>${ie}</td><td>${ge.eff}</td><td>${ge.dem}</td><td>${ge.delay}</td>`,He.addEventListener("click",()=>{fe=ie,Array.from(me.children).forEach(Te=>Te.classList.remove("selected")),CLD_SAFE==null||CLD_SAFE.safeAddClass(He,"selected")}),me.appendChild(He)})}Ve(),Ke&&Ke.addEventListener("click",()=>{fe=null,A(),me&&Array.from(me.children).forEach(ae=>ae.classList.remove("selected"))}),Xe&&Xe.addEventListener("click",()=>{let ae=prompt("Scenario name",fe||"");if(!ae)return;let ie=f();ie[ae]={eff:parseFloat(xe.value),dem:parseFloat(we.value),delay:parseInt(Me.value)},d(ie),fe=ae,Ve()}),Ze&&Ze.addEventListener("click",()=>{let ae=f();if(!fe||!ae[fe])return;let ie=ae[fe];xe.value=ie.eff,we.value=ie.dem,Me.value=ie.delay,xe.dispatchEvent(new Event("input")),we.dispatchEvent(new Event("input")),Me.dispatchEvent(new Event("input")),Se.click()}),Re&&Re.addEventListener("click",()=>{let ae=f();fe&&ae[fe]&&(delete ae[fe],d(ae),fe=null,Ve())}),Ye&&Ye.addEventListener("click",()=>{if(!b)return;let ae=b.data.labels||[],ie=b.data.datasets||[],ge=`year,baseline,scenario
`;for(let ce=0;ce<ae.length;ce++){let re=[ae[ce]];re.push(ie[0]&&ie[0].data?ie[0].data[ce]:""),re.push(ie[1]&&ie[1].data?ie[1].data[ce]:""),ge+=re.join(",")+`
`}let He=new Blob([ge],{type:"text/csv"}),Te=URL.createObjectURL(He),_e=document.createElement("a");_e.href=Te,_e.download="results.csv",_e.click(),URL.revokeObjectURL(Te)}),Ee.onmessage=ae=>{if(ae.data.type==="progress")Z&&(Z.textContent=Math.round(ae.data.value*100)+"%");else if(ae.data.type==="complete"){Z&&(Z.textContent="");let{years:ie,p10:ge,p50:He,p90:Te}=ae.data;for(;b.data.datasets.length>1;)b.data.datasets.pop();b.data.labels=ie,b.data.datasets.push({label:"p90",data:Te,borderColor:"rgba(0,0,0,0)",fill:!1}),b.data.datasets.push({label:"p10",data:ge,borderColor:"rgba(0,0,0,0)",backgroundColor:"rgba(99,102,241,0.2)",fill:"-1"}),b.data.datasets.push({label:"p50",data:He,borderColor:"#f97316",backgroundColor:"rgba(249,115,22,0.1)",fill:!1}),b.update(),ne={years:ie,p10:ge,p50:He,p90:Te}}},X&&X.addEventListener("click",ae=>{ae.preventDefault();let ie=J.value,ge={min:parseFloat(M.value),max:parseFloat(G.value),step:parseFloat(K.value)},He={eff:parseFloat(xe.value),dem:parseFloat(we.value),delay:parseInt(Me.value)};Z&&(Z.textContent="0%"),Ee.postMessage({cmd:"runBatch",param:ie,range:ge,base:He})});let Fe=document.getElementById("tab-param"),wt=document.getElementById("tab-formula"),ht=document.getElementById("panel-param"),qt=document.getElementById("panel-formula");Fe&&wt&&ht&&qt&&(Fe.addEventListener("click",()=>{CLD_SAFE==null||CLD_SAFE.safeAddClass(Fe,"active"),wt.classList.remove("active"),ht.style.display="block",qt.style.display="none"}),wt.addEventListener("click",()=>{CLD_SAFE==null||CLD_SAFE.safeAddClass(wt,"active"),Fe.classList.remove("active"),ht.style.display="none",qt.style.display="block"}));let ut=document.getElementById("formula-node"),Et=document.getElementById("formula-expr"),tt=document.getElementById("formula-msg");ut&&Et&&((l.nodes||[]).forEach(ae=>{let ie=document.createElement("option");ie.value=ae.id,ie.textContent=ae.label||ae.id,ut.appendChild(ie)}),ut.addEventListener("change",()=>{let ae=l.nodes.find(ie=>ie.id===ut.value);Et.value=ae&&ae.expr?ae.expr:"",tt&&(tt.textContent="")}),ut.dispatchEvent(new Event("change")));let Dt=document.getElementById("btn-validate");Dt&&Dt.addEventListener("click",()=>{try{new t().parse(Et.value),tt&&(tt.textContent="\u2705")}catch(ae){tt&&(tt.textContent=ae.message)}});let Dr=document.getElementById("btn-save");Dr&&Dr.addEventListener("click",function(){try{new t().parse(Et.value);var ae=l.nodes.find(function(ie){return ie.id===ut.value});ae&&(ae.expr=Et.value),h(l),i(),r&&S(),a(function(){try{var ie=p({eff:0,dem:0,delay:0,years:30});x={years:ie.years,baseline:ie.series},w(x),tt&&(tt.textContent="Saved")}catch(ge){tt&&(tt.textContent=ge.message)}})}catch(ie){tt&&(tt.textContent=ie.message)}}),Se&&Se.addEventListener("click",function(){a(function(){try{var ae={eff:parseFloat(xe.value),dem:parseFloat(we.value),delay:parseInt(Me.value,10),years:x&&x.years?x.years.length-1:30},ie=p(ae);w({years:ie.years,baseline:x?x.baseline:[],scenario:ie.series}),window.__wesh_sim_chart&&window.__wesh_sim_chart.update()}catch(ge){console.error("simulate failed",ge)}})}),function(){var ae="waterCLD.ui.v1";function ie(){try{return JSON.parse(localStorage.getItem(ae)||"{}")}catch(re){return{}}}function ge(re){var le=ie();for(var he in re)le[he]=re[he];localStorage.setItem(ae,JSON.stringify(le))}function He(){var re=document.getElementById("layout");if(!re)return null;var le=document.getElementById("layout-dir");if(le)return le;var he=document.createElement("select");he.id="layout-dir",he.setAttribute("aria-label","\u062C\u0647\u062A \u0686\u06CC\u062F\u0645\u0627\u0646");var vt=document.createElement("option");vt.value="LR",vt.textContent="\u0686\u067E\u2192\u0631\u0627\u0633\u062A";var ot=document.createElement("option");return ot.value="TB",ot.textContent="\u0628\u0627\u0644\u0627\u2192\u067E\u0627\u06CC\u06CC\u0646",he.appendChild(vt),he.appendChild(ot),re.insertAdjacentElement("afterend",he),he.addEventListener("change",function(){var Lt=(document.getElementById("layout")||{}).value||"elk";ge({dir:he.value,layout:Lt}),window.runLayout&&window.runLayout(Lt,he.value)}),re.addEventListener("change",function(){var Lt=re.value,Ht=(document.getElementById("layout-dir")||{}).value||"LR";ge({dir:Ht,layout:Lt}),window.runLayout&&window.runLayout(Lt,Ht)}),he}function Te(re,le){return new Promise(function(he,vt){if(document.getElementById(le)||document.querySelector('script[src="'+re+'"]'))return he();var ot=document.createElement("script");ot.id=le,ot.src=re,ot.defer=!0,ot.onload=he,ot.onerror=vt,document.head.appendChild(ot)})}async function _e(re){re==="elk"?(await Te("/assets/vendor/elk.bundled.js","elk-lib"),await Te("/assets/vendor/cytoscape-elk.js","cy-elk")):(await Te("/assets/vendor/dagre.min.js","dagre-lib"),await Te("/assets/vendor/cytoscape-dagre.js","cy-dagre"))}(function(){var re=window.runLayout;window.runLayout=async function(le,he){var vt=Ha();if(vt){le=(le||"elk").toLowerCase(),he=he||(document.getElementById("layout-dir")?document.getElementById("layout-dir").value:"LR"),await _e(le);var ot;if(le==="elk"){var Lt=he==="TB"?"DOWN":"RIGHT";ot={name:"elk",nodeDimensionsIncludeLabels:!0,fit:!1,animate:"end",animationDuration:300,elk:{algorithm:"layered","elk.direction":Lt,"elk.layered.spacing.nodeNodeBetweenLayers":140,"elk.spacing.nodeNode":100,"elk.layered.considerModelOrder.strategy":"NODES_AND_EDGES","elk.edgeRouting":"POLYLINE"}}}else{var Ht=he==="TB"?"TB":"LR";ot={name:"dagre",rankDir:Ht,nodeSep:120,rankSep:140,fit:!1,animate:"end",animationDuration:300}}vt.layout(ot).run(),vt.once("layoutstop",function(){window.measureAndResizeNodes&&window.measureAndResizeNodes(vt,{maxWidth:240,padding:16}),requestAnimationFrame(()=>window.__cldSafeFit(vt))})}}})();function ce(){var re=ie(),le=document.getElementById("layout"),he=document.getElementById("layout-dir")||He(),vt=document.getElementById("flt-weight-min"),ot=document.getElementById("flt-delay-max"),Lt=document.getElementById("q"),Ht=document.getElementById("f-group"),_n=document.querySelectorAll("input[type=checkbox].pos"),Sn=document.querySelectorAll("input[type=checkbox].neg"),tn=document.getElementById("f-pos"),rn=document.getElementById("f-neg");re.layout&&le&&(le.value=re.layout),re.dir&&he&&(he.value=re.dir),re.flt&&(vt&&typeof re.flt.weightMin!="undefined"&&(vt.value=re.flt.weightMin),ot&&typeof re.flt.delayMax!="undefined"&&(ot.value=re.flt.delayMax),typeof re.flt.pos=="boolean"&&(_n.length&&_n.forEach(function(Rt){Rt.checked=re.flt.pos}),tn&&tn.classList.toggle("off",!re.flt.pos)),typeof re.flt.neg=="boolean"&&(Sn.length&&Sn.forEach(function(Rt){Rt.checked=re.flt.neg}),rn&&rn.classList.toggle("off",!re.flt.neg)),Ht&&typeof re.flt.group!="undefined"&&(Ht.value=re.flt.group),(tn||rn)&&ve()),Lt&&typeof re.q=="string"&&(Lt.value=re.q),["change","input"].forEach(function(Rt){vt&&vt.dispatchEvent(new Event(Rt)),ot&&ot.dispatchEvent(new Event(Rt)),Lt&&Lt.dispatchEvent(new Event(Rt)),Ht&&Ht.dispatchEvent(new Event(Rt)),le&&le.dispatchEvent(new Event("change")),he&&he.dispatchEvent(new Event("change")),_n.forEach(function(Nr){Nr.dispatchEvent(new Event("change"))}),Sn.forEach(function(Nr){Nr.dispatchEvent(new Event("change"))})});function vr(){ge({flt:{weightMin:vt?Number(vt.value):void 0,delayMax:ot?Number(ot.value):void 0,pos:_n.length?_n[0].checked:!(tn&&tn.classList.contains("off")),neg:Sn.length?Sn[0].checked:!(rn&&rn.classList.contains("off")),group:Ht?Ht.value:""}})}vt&&vt.addEventListener("input",vr),ot&&ot.addEventListener("input",vr),_n.forEach(function(Rt){Rt.addEventListener("change",vr)}),Sn.forEach(function(Rt){Rt.addEventListener("change",vr)}),tn&&tn.addEventListener("click",vr),rn&&rn.addEventListener("click",vr),Ht&&Ht.addEventListener("change",vr),Lt&&Lt.addEventListener("input",function(){ge({q:Lt.value})}),le&&le.addEventListener("change",function(){ge({layout:le.value})}),he&&he.addEventListener("change",function(){ge({dir:he.value})}),window.__WATER_CLD_READY__.then(function(){var Rt;function Nr(){var Co=_.zoom(),To=_.pan();ge({zoom:Co,pan:{x:To.x,y:To.y}}),Rt=null}function So(){Rt||(Rt=setTimeout(Nr,200))}_.on("zoom pan",So)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){He(),ce()}):(He(),ce())}();let Ct=ze;Ct&&Ct.addEventListener("click",function(){a(function(){try{A(),window.__wesh_sim_chart&&window.__wesh_sim_chart.update()}catch(ae){console.error(ae)}})})}),function(){function C(){var _=document.getElementById("model-switch");if(_){try{var R=localStorage.getItem("waterCLD.activeModel");R&&(_.value=R)}catch(L){}_.addEventListener("change",function(){window.loadModelFromUrl(_.value)}),_.value&&window.loadModelFromUrl(_.value)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C()}(),window.CLDSim={simulate:p,runLayout:function(C,_){return window.runLayout(C,_)},resetScenario:A,parseModel:h,simulateStep:v}})()});ZZ();})();
/*! Bundled license information:

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
  (*!
   * Chart.js v4.5.0
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chart.js:
  (*!
   * Chart.js v4.5.0
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/
