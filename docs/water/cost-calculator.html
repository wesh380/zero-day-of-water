<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <!-- CSS Bundles - Phase 2 Optimization -->
  <link rel="stylesheet" href="/assets/css-bundles-dist/core.bundle.css">
  <link rel="stylesheet" href="/assets/css-bundles-dist/layout.bundle.css">
  <link rel="stylesheet" href="/assets/css-bundles-dist/features.bundle.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://wesh360.ir/water/cost-calculator.html">
  <meta property="og:title" content="ماشین‌حساب قیمت تمام‌شده آب - محاسبه دقیق هزینه آب">
  <meta property="og:description" content="محاسبه قیمت تمام‌شده آب با لحاظ عوامل فنی، اقتصادی و زیست‌محیطی">
  <meta property="og:image" content="https://wesh360.ir/page/landing/logo2.webp">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ماشین‌حساب قیمت آب مشهد">
  <meta name="twitter:description" content="محاسبه دقیق قیمت تمام‌شده آب">
  <meta name="twitter:image" content="https://wesh360.ir/page/landing/logo2.webp">
  <title>ماشین‌حساب قیمت تمام‌شده آب مشهد - محاسبه دقیق هزینه آب | WESH360</title>
  <meta name="description" content="ماشین‌حساب پیشرفته قیمت تمام‌شده آب در مشهد - محاسبه دقیق هزینه آب با لحاظ عوامل فنی، اقتصادی، زیست‌محیطی و هزینه فرصت منابع آب">
  <link rel="canonical" href="https://wesh360.ir/water/cost-calculator.html">
  <link rel="stylesheet" href="../assets/water-cost.css">
  <!-- UI Enhancements -->
  <link rel="icon" type="image/svg+xml" href="/assets/img/logo/wesh360.svg" />
  <link rel="alternate icon" type="image/png" sizes="32x32" href="/assets/img/logo/icons/icon-32.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/logo/icons/icon-180.png" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="mask-icon" href="/assets/img/logo/wesh360.svg" color="#0ea5e9" />
  <meta name="theme-color" content="#0ea5e9" />
  <script defer src="/assets/unified-badge.js"></script>
  <script defer src="/assets/global-footer.js"></script>
  <script src="/assets/js/nav-utils.js" defer></script>
  <script defer src="/assets/js/ui-enhancements.js"></script>
  <!-- Schema.org JSON-LD for Breadcrumb -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "خانه",
        "item": "https://wesh360.ir/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "آب",
        "item": "https://wesh360.ir/water/hub"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "ماشین‌حساب قیمت آب",
        "item": "https://wesh360.ir/water/cost-calculator.html"
      }
    ]
  }
  </script>
  <!-- Schema.org JSON-LD for WebApplication -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "ماشین‌حساب پیشرفته قیمت تمام‌شده آب",
    "description": "محاسبه دقیق قیمت تمام‌شده آب با لحاظ عوامل فنی، اقتصادی و زیست‌محیطی",
    "applicationCategory": "UtilitiesApplication",
    "url": "https://wesh360.ir/water/cost-calculator.html",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "IRR"
    }
  }
  </script>
</head>
<body>
  <a class="skip-link" href="#main">پرش به محتوای اصلی</a>

    <header id="site-header" class="site-header" dir="rtl" role="banner" aria-label="سربرگ سایت">
      <div class="site-header__inner container">
        <a class="brand brand--rtl" href="/" aria-label="خانه هم‌افزایی انرژی و آب">
          <img src="/assets/img/logo/wesh360.svg" alt="WESH360" decoding="async" fetchpriority="high" />
        </a>
        <button class="nav-toggle" type="button" aria-label="نمایش منو" aria-expanded="false" aria-controls="site-header-menu">
          <span class="nav-toggle__bar" aria-hidden="true"></span>
          <span class="nav-toggle__bar" aria-hidden="true"></span>
          <span class="nav-toggle__bar" aria-hidden="true"></span>
        </button>
        <div id="site-header-menu" class="site-header__menu" data-header-menu aria-hidden="true">
          <nav class="site-header__nav" aria-label="ناوبری اصلی">
            <ul class="site-header__nav-list">
              <li class="site-header__nav-item"><a class="site-header__nav-link" href="/dashboards/">داشبوردها</a></li>
              <li class="site-header__nav-item"><a class="site-header__nav-link" href="/calculators/">ماشین‌حساب (آزمایشی)</a></li>
              <li class="site-header__nav-item"><a class="site-header__nav-link" href="/research/">پژوهش</a></li>
              <li class="site-header__nav-item"><a class="site-header__nav-link" href="/contact/">ارتباط</a></li>
              <li class="site-header__nav-item"><a class="site-header__nav-link" href="/security/">سیاست امنیت</a></li>
            </ul>
          </nav>
          <div class="site-header__actions" aria-label="اقدامات اصلی">
            <a class="site-header__action site-header__action--outline" href="/responsible-disclosure/">سیاست امنیت</a>
          </div>
        </div>
      </div>
    </header>
<main id="main" role="main" class="container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
  <h1 class="page-title">ماشین‌حساب پیشرفته قیمت تمام‌شده آب در مشهد</h1>
  <div class="page-sub">صفحه‌بندی مرتب: ورودی‌ها سمت راست، خروجی‌ها سمت چپ</div>

  <section class="grid grid-cols-1 gap-6 lg:[grid-template-columns:1.35fr_.95fr]">
    <!-- ستون چپ: خروجی‌های مدل -->
    <div class="left space-y-6">
      <div class="stat-wrap grid grid-cols-1 gap-4 sm:grid-cols-2">
        <div class="stat badge-warn">
          <div class="label">قیمت پیشنهادی واقعی (به ازای هر مترمکعب)</div>
          <div id="true-price" class="value" data-testid="bill-amount">—</div>
          <span class="badge" id="true-price-unit">تومان</span>
        </div>
        <div class="stat badge-success">
          <div class="label">قیمت نهایی برای مصرف‌کننده (پس از یارانه/تخفیف)</div>
          <div id="final-price" class="value" data-testid="consumer-bill">—</div>
          <span class="badge" id="final-price-unit">تومان</span>
        </div>
      </div>

      <div class="card dash-card space-y-4">
        <h3>جدول سهم هر متغیر</h3>
        <div class="scroll-x">
          <table class="tbl" aria-describedby="tbl-hint">
            <thead>
              <tr><th>آیتم</th><th>سهم</th><th>پیشرفت</th><th>هزینه</th></tr>
            </thead>
            <tbody id="breakdown-body" data-testid="cost-breakdown"><!-- filled by JS --></tbody>
          </table>
        </div>
        <div id="tbl-hint" class="hint mt-8">مقادیر با تغییر ورودی‌ها به‌روزرسانی می‌شوند.</div>
      </div>

      <div class="card dash-card space-y-4">
        <h3>نمودار حلقه‌ای سهم عوامل</h3>
        <div class="scroll-x">
          <div class="chart-wrap"><canvas id="shareChart"></canvas></div>
        </div>
      </div>

      <div class="card dash-card space-y-4">
        <h3>تحلیل حساسیت (±۱۰٪ در ورودی‌ها)</h3>
        <ul id="sensitivity-list" class="list"><!-- li items by JS --></ul>
      </div>

      <div class="card dash-card note space-y-3">
        <h3>جمع‌بندی تحلیل</h3>
        <div id="analysis-summary" data-testid="analysis-summary">—</div>
      </div>
    </div>

    <!-- ستون راست: ورودی‌های مدل -->
    <div class="right controls space-y-6">
      <div class="card dash-card space-y-5">
        <h3>۱) عوامل فنی و زیربنایی</h3>
        <div class="group space-y-2.5">
          <label for="cost_production">هزینه تولید هر مترمکعب (تومان)</label>
          <div class="inline flex items-center gap-2.5">
          <input id="cost_production" type="number" min="0" max="200000" step="100" value="2000" aria-describedby="cost_production_r error-cost_production" required>
          </div>
          <div class="field-error" data-error-for="cost_production" id="error-cost_production" aria-live="polite"></div>
          <input id="cost_production_r" type="range" min="0" max="10000" step="100" value="2000">
        </div>
        <div class="group space-y-2.5">
          <label for="cost_energy">هزینه انرژی (تومان)</label>
          <input id="cost_energy" type="number" min="0" max="200000" step="50" value="2000" required>
          <div class="field-error" data-error-for="cost_energy" id="error-cost_energy" aria-live="polite"></div>
          <input id="cost_energy_r" type="range" min="0" max="10000" step="50" value="2000">
        </div>
        <div class="group space-y-2.5">
          <label for="loss_network">درصد هدررفت شبکه (%)</label>
          <input id="loss_network" type="number" min="0" max="100" step="1" value="20" required>
          <div class="field-error" data-error-for="loss_network" id="error-loss_network" aria-live="polite"></div>
          <input id="loss_network_r" type="range" min="0" max="100" step="1" value="20">
        </div>
      </div>

      <div class="card dash-card space-y-5">
        <h3>۲) عوامل اقتصادی و مدیریتی</h3>
        <div class="group space-y-2.5">
          <label for="maintenance">هزینه نگهداری و تعمیرات (تومان)</label>
          <input id="maintenance" type="number" min="0" max="200000" step="50" value="1500" required>
          <div class="field-error" data-error-for="maintenance" id="error-maintenance" aria-live="polite"></div>
          <input id="maintenance_r" type="range" min="0" max="10000" step="50" value="1500">
        </div>
        <div class="group space-y-2.5">
          <label for="hidden_subsidy">درصد یارانه پنهان (%)</label>
          <input id="hidden_subsidy" type="number" min="0" max="100" step="1" value="25" required>
          <div class="field-error" data-error-for="hidden_subsidy" id="error-hidden_subsidy" aria-live="polite"></div>
          <input id="hidden_subsidy_r" type="range" min="0" max="100" step="1" value="25">
        </div>
      </div>

      <div class="card dash-card space-y-5">
        <h3>۳) محیطی و اجتماعی</h3>
        <div class="group space-y-2.5">
          <label for="power_change">درصد تغییر قیمتی برق (%)</label>
          <input id="power_change" type="number" min="-100" max="100" step="1" value="0" required>
          <div class="field-error" data-error-for="power_change" id="error-power_change" aria-live="polite"></div>
          <input id="power_change_r" type="range" min="-100" max="100" step="1" value="0">
        </div>
      </div>

      <div class="card dash-card space-y-5">
        <h3>آزمون ورودی‌ها</h3>
        <div class="group space-y-2.5">
          <label for="chargeinput">شارژ</label>
          <input id="chargeinput" type="text" />
        </div>
        <div class="group space-y-2.5">
          <label for="voteinput">رأی</label>
          <input id="voteinput" type="text" />
        </div>
      </div>

      <div class="actions flex justify-center gap-2.5 mt-3">
        <button id="recalc" class="btn btn-primary inline-flex items-center justify-center gap-2 px-4 py-3 text-base font-extrabold" type="button">به‌روزرسانی محاسبات</button>
      </div>
    </div>
  </section>

  <!-- فوتر فعلی سایت شما بدون تغییر بماند -->
  <div class="footer-note">با هر تغییر در ورودی‌ها، نتایج به‌صورت زنده محاسبه می‌شوند.</div>
</main>

  <script src="../assets/vendor/chart.umd.min.js"></script>
  <script defer src="../assets/water-cost.js"></script>
  <script defer src="../assets/water-init.js"></script>
  <script defer src="/assets/js/ui-prune-ctas.js"></script>
  <script src="/assets/js/header.js" defer></script>
  <script src="/assets/js/nav-prune.js" defer></script>
  <!-- دکمه ثبت بازخورد Porsline -->
  <a class="porsline-button-wrapper" href="#porsline-side-tab"
    onclick="clzdTiLuIp('porsline-side-tab-iframe');showSideTab()">
    بازخورد دهید
  </a>
  <script>
    // Load Porsline script immediately with async for better performance
    (function() {
      try {
        var js,q,d=document,
          gi=d.getElementById,
          ce=d.createElement,
          gt=d.getElementsByTagName,
          id="porsline-share",
          b="https://cdn.porsline.ir/static/panel/v2/statics/";
        if(!gi.call(d,id)) {
          js=ce.call(d,"script");
          js.id = id;
          js.setAttribute("data-position","right");
          js.src=b+"side-tab.js";
          js.async = true;
          js.onerror = function() {
            console.warn('Porsline script failed to load');
          };
          q=gt.call(d,"script")[0];
          q.parentNode.insertBefore(js,q);
        }
      } catch(e) {
        console.warn('Porsline initialization error:', e.message);
      }
    })();

    var clzdTiLuIp = function (ifid) {
      try {
        const el = document.getElementById(ifid);
        if (el) {
          el.fetchPriority = 'high';
          el.src = "https://survey.porsline.ir/s/zdTiLuIp#/?ac=0&ns=0";
        }
      } catch(e) {
        console.warn('Porsline iframe error:', e.message);
      }
    };
  </script>
  <!-- Statsfa Website Analytics Start -->
  <script data-host="https://statsfa.com" data-dnt="true" src="https://statsfa.com/js/script.js" id="ZwSg9rf6GA" async defer></script>
  <!-- Statsfa Website Analytics End -->
</body>
</html>
