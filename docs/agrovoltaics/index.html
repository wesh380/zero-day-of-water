<!doctype html>
<html lang="fa" dir="rtl" data-page="agrovoltaics">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ماشین‌حساب فوتوکِشت — wesh360</title>
  <!-- CSS اشتراکی سایت -->
  <link rel="stylesheet" href="/assets/css/tailwind.css">
  <link rel="stylesheet" href="/assets/css/responsive-baseline.css">
  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/unified-badge.css">
  <link rel="stylesheet" href="/assets/global-footer.css">
  <link rel="stylesheet" href="/assets/site-overrides.css">
  <link rel="stylesheet" href="/assets/inline-migration.css">
  <link rel="icon" type="image/svg+xml" href="/assets/img/logo/wesh360.svg">
</head>
<body>
  <a class="skip-link" href="#main">پرش به محتوای اصلی</a>
  <header id="site-header" class="site-header" role="banner"></header>
  <main id="main" role="main">
    <div id="root"></div>
  </main>
  <!-- وندورها و اپ موجود -->
  <script defer src="/solar/agrivoltaics/vendor/react.production.min.js" charset="utf-8"></script>
  <script defer src="/solar/agrivoltaics/vendor/react-dom.production.min.js" charset="utf-8"></script>
  <script defer src="/solar/agrivoltaics/vendor/qrcode.js" charset="utf-8"></script>
  <script defer src="/solar/agrivoltaics/vendor/jspdf.umd.min.js" charset="utf-8"></script>
  <script type="module" defer src="/solar/agrivoltaics/app.js" charset="utf-8"></script>
  <!-- اسکریپت‌های اشتراکی -->
  <script defer src="/assets/unified-badge.js" charset="utf-8"></script>
  <script defer src="/assets/global-footer.js" charset="utf-8"></script>
  <script defer src="/assets/js/utf8-fix.js" charset="utf-8"></script>
  <script defer src="/assets/js/ui-prune-ctas.js"></script>
  <script defer src="/assets/js/header.js"></script>
  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "9e1a59b59254492b858c1d1d730c72c7"}'></script>
  <!-- دکمه ثبت بازخورد Porsline -->
  <a class="porsline-button-wrapper" href="#porsline-side-tab"
    onclick="clzdTiLuIp('porsline-side-tab-iframe');showSideTab()">
    بازخورد دهید
  </a>
  <script>
    // Optimized lazy-loading Porsline feedback script
    (function() {
      let porslineLoaded = false;
      let porslineScriptLoading = false;

      function loadPorslineScript() {
        if (porslineLoaded || porslineScriptLoading) return;
        porslineScriptLoading = true;

        try {
          const d = document;
          const id = "porsline-share";

          if (!d.getElementById(id)) {
            const js = d.createElement("script");
            js.id = id;
            js.setAttribute("data-position", "right");
            js.src = "https://cdn.porsline.ir/static/panel/v2/statics/side-tab.js";
            js.async = true;
            js.onerror = function() {
              console.warn('Porsline script failed to load');
              porslineScriptLoading = false;
            };
            js.onload = function() {
              porslineLoaded = true;
            };

            const firstScript = d.getElementsByTagName("script")[0];
            firstScript.parentNode.insertBefore(js, firstScript);
          }
        } catch(e) {
          console.warn('Porsline initialization error:', e.message);
          porslineScriptLoading = false;
        }
      }

      // Load script on first interaction with feedback button
      const feedbackBtn = document.querySelector('.porsline-button-wrapper');
      if (feedbackBtn) {
        feedbackBtn.addEventListener('mouseenter', loadPorslineScript, { once: true });
        feedbackBtn.addEventListener('touchstart', loadPorslineScript, { once: true });
        feedbackBtn.addEventListener('focus', loadPorslineScript, { once: true });
      }

      // Fallback: load after idle time
      if ('requestIdleCallback' in window) {
        requestIdleCallback(() => loadPorslineScript(), { timeout: 3000 });
      } else {
        setTimeout(loadPorslineScript, 3000);
      }
    })();

    var clzdTiLuIp = function (ifid) {
      try {
        const el = document.getElementById(ifid);
        if (el) {
          el.fetchPriority = 'high';
          el.src = "https://survey.porsline.ir/s/zdTiLuIp#/?ac=0&ns=0";
        }
      } catch(e) {
        console.warn('Porsline iframe error:', e.message);
      }
    };
  </script>
</body>
</html>
