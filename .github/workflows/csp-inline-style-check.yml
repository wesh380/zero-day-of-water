name: CSP Inline Style Gate
on:
  pull_request:
jobs:
  csp-inline-style:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm i -g npm@latest || true
      - run: |
          set -o pipefail
          output=$(npm run -s csp:scan)
          echo "$output"
          count=$(printf "%s" "$output" | sed '/^$/d' | wc -l)
          echo "Found $count potential inline-style matches"
          if [ -n "$output" ]; then
            echo "CSP violation: Inline styles are not allowed (style=\" or .style. or style={{}}). Use classes from docs/assets/inline-migration.css and class toggling."
            exit 1
          fi

